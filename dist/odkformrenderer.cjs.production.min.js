"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=require("@material-ui/core");require("bootstrap/dist/css/bootstrap.min.css");var r=require("react"),n=e(r),a=require("react-redux"),o=require("@material-ui/core/styles"),i=require("@fortawesome/fontawesome-svg-core"),l=require("@fortawesome/free-solid-svg-icons"),s=require("reactstrap"),u=e(require("react-select")),c=e(require("@material-ui/core/Typography")),p=e(require("@material-ui/icons/ExpandMore")),m=require("@material-ui/styles"),d=e(require("seamless-immutable")),f=e(require("moment")),h=require("redux"),g=require("redux-devtools-extension"),v=require("@fortawesome/react-fontawesome"),E=e(require("lodash")),b=e(require("react-datepicker"));function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function y(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}require("react-datepicker/dist/react-datepicker.css");var S,F=o.createMuiTheme({palette:{primary:{main:"#EF6B73",dark:"#649a6a"},secondary:{main:"#D2AB16",light:"#EBFDED",dark:"#AD8C0F"},info:{dark:"#F5F4F4",main:"#EBFDED",light:"#F9F9F9"},text:{primary:"#EBFDED",secondary:"#000000",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"}},typography:{h1:{fontWeight:700,fontSize:30},h2:{fontWeight:500,fontSize:20},h3:{fontWeight:400,fontSize:18},h4:{fontWeight:700,fontSize:26},body1:{fontFamily:"Roboto",fontWeight:400,fontSize:16},caption:{fontFamily:"Roboto",fontWeight:600,fontSize:16},subtitle1:{fontFamily:"Roboto",fontWeight:400,fontSize:16},subtitle2:{fontFamily:"Roboto",fontWeight:500,fontSize:16}},overrides:{MuiPaper:{root:{color:"#222222 !important"}}}}),I=function(e){function t(){return e.apply(this,arguments)||this}return y(t,e),t.prototype.render=function(){var e=this.props,t=e.bodyText;return r.createElement(s.Alert,{color:e.color,isOpen:e.isOpen,toggle:e.handleToggle},r.createElement("h4",{className:"alert-heading"},e.headerText),r.createElement("p",null,t))},t}(r.Component),A=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).onChangeHandler=function(e){t.props.onChangeSelect(e.value)},t}return y(t,e),t.prototype.render=function(){var e,t=this,n=[];return[].concat(this.props.languages).map(function(e){n.push({label:e.label,value:e.value})}),n.map(function(r){r.value===t.props.defaultLanguage&&(e=r)}),r.createElement(u,{multi:!1,options:n,className:"col-md-2 dropDown",placeholder:"Language",onChange:this.onChangeHandler,value:e||""})},t}(r.Component),T="This field is required",N=h.createStore(Ue,g.composeWithDevTools()),L="",x={},V={};function P(e,t,r,n){return t===r[n]?[1,{type:e,value:t}]:[0,null]}var O=[function(e,t){return/\s/.test(e[t])?[1,null]:[0,null]},function(e,t){return P("paren","(",e,t)},function(e,t){return P("paren",")",e,t)},function(e,t){return"i"!==e[t]||!e[t+1]||"f"!==e[t+1]||void 0!==e[t+2]&&/[a-z]i/.test(e[t+2])?[0,null]:[2,{type:"if",value:"if"}]},function(e,t){return"o"===e[t]&&e[t+1]&&"r"===e[t+1]&&(void 0===e[t+2]||/[0-9\s]/.test(e[t+2]))?[2,{type:"or",value:"or"}]:[0,null]},function(e,t){return"a"===e[t]&&e[t+1]&&"n"===e[t+1]&&e[t+2]&&"d"===e[t+2]&&(void 0===e[t+3]||/[0-9\s]/.test(e[t+3]))?[3,{type:"and",value:"and"}]:[0,null]},function(e,t){if(("#"===e[t]||"$"===e[t])&&e[t+1]&&"{"===e[t+1]){for(var r="",n=1,a=e[t+(n+=1)];"}"!==a;){if(void 0===a)throw new TypeError("unterminated string ");r+=a,a=e[t+(n+=1)]}return[n+1,{type:"variable",value:r}]}return[0,null]},function(e,t){if('"'===e[t]||"'"===e[t]){for(var r=e[t],n="",a=0,o=e[t+(a+=1)];o!==r;){if(void 0===o)throw new TypeError("unterminated string ");n+=o,o=e[t+(a+=1)]}return[a+1,{type:"string",value:n}]}return[0,null]},function(e,t){if(/[a-z_]/i.test(e[t])){for(var r="",n=0,a=e[t+n];a&&/[:a-z0-9_-]/i.test(a);){if(void 0===a)throw new TypeError("unterminated string ");r+=a,a=e[t+(n+=1)]}for(;a&&/\s/.test(a);)a=e[t+(n+=1)];if("not"==r)return[0,null];if(a&&"("===a)return[n,{type:"function",value:r}]}return[0,null]},function(e,t){return P("equal","=",e,t)},function(e,t){return P("plus","+",e,t)},function(e,t){return P("minus","-",e,t)},function(e,t){return P("multiply","*",e,t)},function(e,t){return P("divide","/",e,t)},function(e,t){return"d"===e[t]&&e[t+1]&&"i"===e[t+1]&&e[t+2]&&"v"===e[t+2]&&(void 0===e[t+3]||/[0-9\s]/.test(e[t+3]))?[3,{type:"divide",value:"/"}]:[0,null]},function(e,t){return P("lessThan","<",e,t)},function(e,t){return P("greaterThan",">",e,t)},function(e,t){return"!"==e[t]?P("not","!",e,t):"n"==e[t]&&e[t+1]&&"o"==e[t+1]&&e[t+2]&&"t"==e[t+2]?[3,{type:"not",value:"!"}]:[0,null]},function(e,t){return P("brac","[",e,t)},function(e,t){return P("brac","]",e,t)},function(e,t){return P("dot",".",e,t)},function(e,t){return P("comma",",",e,t)},function(e,t){if(/[0-9]/i.test(e[t])){for(var r="",n=0,a=e[t+n];/[0-9]/i.test(a);){if(void 0===a)throw new TypeError("unterminated string ");r+=a,a=e[t+(n+=1)]}if("."!==a)return[n,{type:"number",value:r}]}return[0,null]},function(e,t){if(/[0-9.]/i.test(e[t])){for(var r="",n=0,a=e[t+n];/[0-9]/i.test(a);){if(void 0===a)throw new TypeError("unterminated string ");r+=a,a=e[t+(n+=1)]}if("."===a&&(r+=a,/[0-9]/i.test(a=e[t+(n+=1)]))){for(;/[0-9]/i.test(a);){if(void 0===a)throw new TypeError("unterminated string ");r+=a,a=e[t+(n+=1)]}return[n,{type:"decimal",value:r}]}}return[0,null]},function(e,t){return function(e,t,r,n){var a=r[n],o=0;if(t.test(a)){for(var i="";a&&t.test(a);)i+=a,a=r[n+(o+=1)];return[o,{type:"name",value:i}]}return[0,null]}(0,/[a-z_]/i,e,t)}];function w(e,t,r,n,a){if("selected"===e){var o=!1;return Array.isArray(t[0])?(t[0].forEach(function(e){o=o||e==t[1]}),[!0,o]):[!0,t[0]==t[1]]}return[!1,null]}function k(e,t,r,n,a){if("jr:choice-name"===e){var o,i=L.split("/"),l="";for(o=0;o<i.length-1;)"repeat"==i[o]?o+=3:(l=l+i[o+1]+"/",o+=2);var s=N.getState(),u=l+t[t.length-1].replace(/[^a-zA-Z ]/g,"");if(u in s.optionList)for(var c in s.optionList[u])if(s.optionList[u][c].name===t[0])return[!0,s.optionList[u][c].label[s.language]]}return[!1,null]}function R(e,t,r,n,a){if("pulldata"===e){var o=N.getState();if(t[3]){var i=o.csvList[t[0]+".csv"].find(function(e){return e[t[2]]==t[3]});if(null!=i&&null!=i)return[!0,i[t[1]]]}}return[!1,null]}function q(e,t,r,n,a){if("today"==e){var o=new Date;return o.setHours(0,0,0,0),[!0,o]}return[!1,null]}function M(e,t,r,n,a){return"now"==e?[!0,f().format()]:[!1,null]}function D(e,t,r,n,a){if("decimal-date-time"==e&&t[0]){var o=new Date(t[0]).getTime()-new Date("01/01/1970").getTime();return[!0,Math.round(Math.abs(o/864e5))]}return[!1,null]}function _(e,t,r,n,a){if("date"==e&&t[0]){var o=new Date("01/01/1970").getTime()+24*t[0]*60*60*1e3;return[!0,new Date(o)]}return[!1,null]}function H(e,t,r,n,a){if("format-date"==e&&2==t.length){var o="MM-DD-YYYY",i=null;if(t[1].includes("%a")){var l=t[1].replace("%a","ddd");i=null!=t[0]?f(t[0]).format(""+l):null}else if(t[1].includes("d"))o=t[1].replace("%d","DD").replace("%m","MM").replace("%Y","YYYY").replace("%y","YY"),i=null!=t[0]?f(t[0]).format(o):null;else if(t[1].includes("b")){var s=t[1].replace("%b","MMM");i=null!=t[0]?f(t[0]).format(""+s):null}return[!0,i]}return[!1,null]}function j(e,t,r,n,a){if("round"==e&&t[0]&&t[1]){if("number"==typeof t[0]&&"number"==typeof t[1])return[!0,t[0].toFixed(t[1])];if("string"==typeof t[0]&&"number"==typeof t[1])return[!0,parseFloat(t[0]).toFixed(t[1])]}return[!1,null]}function G(e,t,r,n,a){return"regex"==e?[!0,RegExp(t[1]).test(t[0])]:[!1,null]}function B(e,t,r,n,a){return"count-selected"==e?t[0]&&Array.isArray(t[0])?[!0,t[0].length]:t[0]&&"object"!=typeof t[0]?[!0,1]:[!0,0]:[!1,null]}function U(e,t,r,n,a){return"int"==e&&"string"==typeof t[0]?[!0,parseInt(t[0],10)]:[!1,null]}function z(e,t,r,n,a){return"coalesce"==e?t[0]||0===t[0]?[!0,t[0]]:[!0,t[1]]:[!1,null]}function W(e,t,r,n,a){if("position"==e&&L){var o=L.split("/");if(o.length>2)return[!0,parseInt(o[o.length-2],10)+1]}return[!1,null]}function Y(e,t,r){if("sum"==e){var n=null;return r&&r.length>0&&r[0]&&r[0].length>0&&"variable"===r[0][0].type&&(n=function e(t,r,n){var a;if(Array.isArray(r))for(a=0;a<r.length;a+=1)t=e(t,r[a],n);else if("object"==typeof r)for(var o in r)"object"==typeof r[o]?t=e(t,r[o],n):o===n&&("string"==typeof r[o]&&(t+=parseFloat(r[o])),"number"==typeof r[o]&&(t+=r[o]));return t}(0,V,r[0][0].value)),[!0,n]}return[!1,null]}function J(e,t,r){if("concat"==e&&t&&t.length>0){for(var n="",a=0;a<t.length;a+=1)n+=null==t[a]?"":t[a];return[!0,n]}return[!1,null]}function $(e,t,r){return"substr"==e&&t&&t.length>0&&t[0]&&null!==t[1]?null!==t[2]&&t[2]<t[0].length?[!0,t[0].substring(t[1],t[2])]:[!0,t[0].substring(t[1])]:[!1,null]}function X(e,t,r){for(var n in r){var a=n.split("/");if(a[a.length-1]===e)return r[n];"object"==typeof r[n]&&null==t&&(t=X(e,t,r[n]))}return t}function K(e){var t,r=L.split("/"),n=V,a=null;a=X(e,a,n);var o="";for(t=0;t<r.length-1;)if("repeat"==r[t]){t+=1;var i=parseInt(r[t+1],10);a=X(e,a,n[o+r[t]][i]),t+=2}else o=o+r[t+1]+"/",t+=2;return a}function Z(){var e,t=L.split("/"),r="",n=[];for(e=0;e<t.length-1;)"repeat"==t[e]?(n.push(r+t[e+=1]),n.push(parseInt(t[e+1],10)),r=r+t[e]+"/",e+=2):(r=r+t[e+1]+"/",e+=2);return n.push(r+t[t.length-1]),V.getIn(n)}function Q(e,t,r){return"number"===t[r].type?[1,parseInt(t[r].value,10)]:"string"===t[r].type?[1,t[r].value]:"decimal"===t[r].type?[1,parseFloat(t[r].value)]:"variable"===t[r].type?[1,K(t[r].value)]:"name"===t[r].type?"true"===t[r].value.toLowerCase()?[1,!0]:"false"===t[r].value.toLowerCase()?[1,!1]:x&&t[r].value in x?[1,x[t[r].value]]:[1,null]:"dot"===t[r].type?[1,Z()]:[0,null]}function ee(e,t,r){var n=[w,B,k,q,M,G,U,z,W,Y,J,$,j,H,R,D,_];if("function"===t[r].type){var a=t[r].value,o=[],i=[],l=1;if("paren"===t[r+l].type&&"("===t[r+l].value){var s=[];s.push(1),l+=1;for(var u=[];t[r+l]&&s.length;){if(u.push(t[r+l]),"paren"===t[r+l].type&&")"===t[r+l].value&&s.pop(),"paren"===t[r+l].type&&"("===t[r+l].value&&s.push(1),"comma"===t[r+l].type&&1===s.length){u.pop();var c=le(null,u,0);o.push(c),i.push(u),u=[]}l+=1}if("paren"===t[r+(l-=1)].type&&")"===t[r+l].value){u.pop();var p=le(null,u,0);o.push(p),i.push(u);var m=!1,d=null;if(n.forEach(function(t){if(!m){var n=t(a,o,i,e,r);m=n[0],d=n[1]}}),m)return[l+1,d]}}}return[0,null]}function te(e,t,r){if("and"===t[r].type&&null!=e){var n=[],a=1,o=null;if("paren"===t[r+a].type&&"("===t[r+a].value){var i=re(null,t,r+a);o=i[1],a+=i[0]}else{for(var l=["and","or"];t[r+a]&&-1===l.indexOf(t[r+a].type);)n.push(t[r+a]),a+=1;n.length&&(o=le(null,n,0))}if(null!=o){if(o=e&&o,t[r+a]&&"and"===t[r+a].type){var s=te(o,t,r+a);o=s[1],a+=s[0]}return[a,o]}}return[0,null]}function re(e,t,r){if("paren"===t[r].type&&"("===t[r].value){var n=[];n.push(1);for(var a=1,o=[];t[r+a]&&n.length;)o.push(t[r+a]),"paren"===t[r+a].type&&")"===t[r+a].value&&n.pop(),"paren"===t[r+a].type&&"("===t[r+a].value&&n.push(1),a+=1;if("paren"===t[r+(a-=1)].type&&")"===t[r+a].value)return o.pop(),[a+1,le(null,o,0)]}return[0,null]}function ne(e,t,r){if(null!=e&&"divide"===t[r].type&&r<t.length&&-1!==["number","decimal","minus","paren","variable","function"].indexOf(t[r+1].type)){var n=!1,a=null;if([Q,oe,re,ee].forEach(function(o){if(!n){var i,l;if(o===oe){var s=o(null,t,r+1);i=s[0],l=s[1]}else{var u=o(e,t,r+1);i=u[0],l=u[1]}0!==i&&(n=!0,r+=i+=1,a=i);var c,p=!1;[ne,ae].forEach(function(e){if(!p&&t[r]){var n=e(l,t,r);c=n[1],a+=i=n[0],0!==i&&(p=!0,l=c)}}),null!=l&&(e/=l)}}),n)return[a,e]}return[0,null]}function ae(e,t,r){if(null!=e&&"multiply"===t[r].type&&r<t.length&&-1!==["number","decimal","minus","paren","variable","function"].indexOf(t[r+1].type)){var n=!1,a=null;if([Q,oe,re,ee].forEach(function(o){if(!n){var i,l;if(o===oe){var s=o(null,t,r+1);i=s[0],l=s[1]}else{var u=o(e,t,r+1);i=u[0],l=u[1]}0!==i&&(n=!0,r+=i+=1,a=i);var c,p=!1;[ne,ae].forEach(function(e){if(!p&&t[r]){var n=e(l,t,r);c=n[1],a+=i=n[0],0!==i&&(p=!0,l=c)}}),null!=l&&(e*=l)}}),n)return[a,e]}return[0,null]}function oe(e,t,r){if("minus"===t[r].type&&r<t.length&&-1!==["number","decimal","paren","variable","function"].indexOf(t[r+1].type)){var n=!1,a=null;if([Q,re,ee].forEach(function(o){if(!n){var i=o(e,t,r+1),l=i[0],s=i[1];if(0!==l){n=!0,r+=l+=1,a=l;var u,c=!1;[ne,ae].forEach(function(e){if(!c&&t[r]){var n=e(s,t,r);u=n[1],a+=l=n[0],0!==l&&(c=!0,s=u)}})}s?e?"[object Date]"===Object.prototype.toString.call(s)&&"[object Date]"===Object.prototype.toString.call(e)?isNaN(e.getTime())||isNaN(s.getTime())?e=NaN:(e-=s,e=Math.ceil(e/864e5)):"[object Date]"===Object.prototype.toString.call(s)||"[object Date]"===Object.prototype.toString.call(e)?e=NaN:""===s||""===e?e=NaN:e-=s:e="[object Date]"===Object.prototype.toString.call(s)?NaN:-s:e=NaN}}),n)return""===e&&(e=NaN),[a,e]}return[0,null]}var ie=[function(e,t,r){if("if"===t[r].type){var n=[],a=1;if("paren"===t[r+a].type&&"("===t[r+a].value){var o=[];o.push(1),a+=1;for(var i=[];t[r+a]&&o.length;){if(i.push(t[r+a]),"paren"===t[r+a].type&&")"===t[r+a].value&&o.pop(),"paren"===t[r+a].type&&"("===t[r+a].value&&o.push(1),"comma"===t[r+a].type&&1===o.length){i.pop();var l=le(null,i,0);n.push(l),i=[]}a+=1}if("paren"===t[r+(a-=1)].type&&")"===t[r+a].value){i.pop();var s,u=le(null,i,0);if(n.push(u),n.length%2!=0){var c;for(c=0;c<n.length-1;c+=2)if(n[c])return[a+1,n[c+1]];return[a+1,n[n.length-1]]}for(s=0;s<n.length;s+=2)if(n[s])return[a+1,n[s+1]]}}}return[0,null]},re,Q,ne,ae,function(e,t,r){if(null!=e&&"plus"===t[r].type&&r<t.length&&-1!==["number","decimal","string","minus","paren","variable","function"].indexOf(t[r+1].type)){var n=!1,a=null;if([Q,oe,re,ee].forEach(function(o){if(!n){var i,l;if(o===oe){var s=o(null,t,r+1);i=s[0],l=s[1]}else{var u=o(e,t,r+1);i=u[0],l=u[1]}if(0!==i){n=!0,r+=i+=1,a=i;var c,p=!1;[ne,ae].forEach(function(e){if(!p&&t[r]){var n=e(l,t,r);c=n[1],a+=i=n[0],0!==i&&(p=!0,l=c)}})}null!=l&&(e+=l)}}),n)return[a,e]}return[0,null]},oe,function(e,t,r){if("lessThan"===t[r].type&&null!=e){var n=!1,a=[],o=1;"equal"===t[r+o].type&&(o+=1,n=!0);for(var i,l=["and","or"];t[r+o]&&-1===l.indexOf(t[r+o].type);)a.push(t[r+o]),o+=1;if(a.length)return i=le(null,a,0),n?"function"==typeof i.getMonth?[o,f(e).startOf("day").isSameOrBefore(f(i).startOf("day"))]:[o,e<=i]:"function"==typeof i.getMonth?[o,f(e).startOf("day").isBefore(f(i).startOf("day"))]:[o,e<i]}return[0,null]},function(e,t,r){if("greaterThan"===t[r].type&&null!=e){var n=!1,a=[],o=1;"equal"===t[r+o].type&&(o+=1,n=!0);for(var i,l=["and","or"];t[r+o]&&-1===l.indexOf(t[r+o].type);)a.push(t[r+o]),o+=1;if(a.length)return i=le(null,a,0),n?[o,e>=i]:[o,e>i]}return[0,null]},function(e,t,r){if("equal"===t[r].type&&null!=e){for(var n=[],a=1,o=["and","or"];t[r+a]&&-1===o.indexOf(t[r+a].type);)n.push(t[r+a]),a+=1;if(n.length)return[a,e==le(null,n,0)]}return[0,null]},te,function(e,t,r){if("or"===t[r].type&&null!=e){var n=[],a=1,o=null;if("paren"===t[r+a].type&&"("===t[r+a].value){var i=re(0,t,r+a);o=i[1],a+=i[0]}else{for(var l=["and","or"];t[r+a]&&-1===l.indexOf(t[r+a].type);)n.push(t[r+a]),a+=1;n.length&&(o=le(null,n,0))}if(null!=o||null!=e){if(t[r+a]&&"and"===t[r+a].type){var s=te(o,t,r+a);o=s[1],a+=s[0]}return[a,e||o]}}return[0,null]},function(e,t,r){if("not"===t[r].type){var n,a=1;if("equal"===t[r+a].type&&null!=e){n=[],a+=1;for(var o,i=["and","or"];t[r+a]&&-1===i.indexOf(t[r+a].type);)n.push(t[r+a]),a+=1;if(n.length)return o=le(null,n,0),[a,e!=o]}else{var l,s,u=!1;if([Q,oe,re,ee].forEach(function(n){if(!u){if(n===oe){var o=n(null,t,r+1);l=o[0],s=o[1]}else{var i=n(e,t,r+1);l=i[0],s=i[1]}0!==l&&(u=!0,a+=l)}}),u)return[a,!s]}}return[0,null]},ee];function le(e,t,r){for(var n=r,a=e,o=function(){var e=!1;if(ie.forEach(function(r){if(!e){var o=r(a,t,n),i=o[0],l=o[1];0!==i&&(e=!0,n+=i),null!=l&&(a=l)}}),!e)return console.log("syntax error"),console.log(S),{v:null}};n<t.length;){var i=o();if("object"==typeof i)return i.v}return a}function se(e,t,r,n){return t||(t={}),L=n,S=e,V=t,x=r,le(null,function(e){for(var t=0,r=[],n=function(){var n=!1;if(O.forEach(function(a){if(!n){var o=a(e,t),i=o[0],l=o[1];0!==i&&(n=!0,t+=i),l&&r.push(l)}}),!n)throw new TypeError("I dont know what this character is: "+e[t])};t<e.length;)n();return r}(e),0)}function ue(e,t){return"string"==typeof e?e||"":e[t]||""}function ce(e,t){return e.label?ue(e.label,t):""}function pe(e,t){return e.hint?ue(e.hint,t):""}function me(e,t,r){if(null==t)return null;var n=t.match(/\[(.*?)\]/g);if(n)n.forEach(function(n){n=n.substring(1,n.length-1);var a=e(n,r);t=t.replace("["+n+"]",null!=a&&void 0!==a?a:"")});else{var a=t.match(/\${(.*[^}])[\}?]$/g);a&&a.forEach(function(n){var a=e(n,r);t=t.replace(n,null!=a&&void 0!==a?a:"")})}return t}function de(e,t){return e.bind&&e.bind["jr:constraintMsg"]?ue(e.bind["jr:constraintMsg"],t):""}function fe(e){var t,r=!1;return e.bind&&e.bind.required&&"string"==typeof e.bind.required&&("yes"===(t=e.bind.required).toLowerCase()||"1"===t||"true"===t.toLowerCase())&&(r=!0),r}function he(e,t,r){return!(e&&e.bind&&e.bind.relevant&&!r(e.bind.relevant,t+e.name))}function ge(e,t,r){return!!(e&&e.bind&&e.bind.readonly)&&!!r(e.bind.readonly,t+e.name)}function ve(e,t,r){return!!(e&&e.bind&&e.bind.constraint)&&!r(e.bind.constraint,t+e.name)}function Ee(e,t,r){var n,a=t.split("/"),o="",i=e;for(n=0;n<a.length-1;)if("repeat"===a[n]){o+a[n+=1]in i?i=i[o+a[n]]:(i[o+a[n]]=[],i=i[o+a[n]]);var l=parseInt(a[n+1],10);i[l]?i=i[l]:(i[l]={},i=i[l]),o=o+a[n]+"/",n+=2}else o=o+a[n+1]+"/",n+=2;return i[o+a[a.length-1]]=r,e}function be(e,t){var r,n=t.split("/"),a="",o=e;for(r=0;r<n.length-1;)if("repeat"===n[r]){a+n[r+=1]in o?o=o[a+n[r]]:o[a+n[r]]=[];var i=parseInt(n[r+1],10);o[i]?o=o[i]:(o[i]={},o=o[i]),a=a+n[r]+"/",r+=2}else a=a+n[r+1]+"/",r+=2;return o[a+n[n.length-1]]}function Ce(e){var t=!1;return e.control&&e.control.appearance&&(t=!!e.control.appearance.toString().includes("minimal")),t}var ye="odk/reducer/form/SET_COLOR",Se="odk/reducer/form/FIELD_VALUE_ASSIGNED",Fe="odk/reducer/form/OPTION_LIST_ASSIGNED",Ie="odk/reducer/form/MEDIA_LIST_ADDED",Ae="odk/reducer/form/REMOVE_FROM_MEDIA_LIST",Te="odk/reducer/form/REMOVE_FROM_OPTION_LIST_REPEAT",Ne="odk/reducer/form/RESET_STORE",Le="odk/reducer/form/ADD_ERROR_INPUT_ID",xe="odk/reducer/form/REMOVE_ERROR_INPUT_ID",Ve="odk/reducer/form/EMPTY_GROUP_FIELDS",Pe="odk/reducer/form/REMOVE_GROUP_FIELDS_FROM_ERRORS",Oe="odk/reducer/form/SET_USER_INPUT_OBJ",we="odk/reducer/form/SET_CSV_OBJ",ke="odk/reducer/form/SET_FORM_SUBMIT_STATUS",Re=function(e,t){return{fieldTreeName:e,fieldValue:t,type:Se}},qe=function(e,t){return{fieldTreeName:e,optionList:t,type:Fe}},Me=function(e,t){return{fieldTreeName:e,repeatIndex:t,type:Te}},De=function(e){return{mediaObject:e,type:Ie}},_e=function(e){return{fieldTreeName:e,type:Le}},He=function(e){return{fieldTreeName:e,type:xe}},je=function(e){return{fieldTreeName:e,type:Ve}},Ge=function(e){return{fieldTreeName:e,type:Pe}},Be=d({errors:[],isFormSubmitted:!1,mediaList:{},optionList:{},userInput:{},language:"English",csvList:{},color:""});function Ue(e,t){var r;switch(void 0===e&&(e=Be),t.type){case ye:var n=e.asMutable({deep:!0});return d(C({},n,{color:t.color}));case Se:var a=Ee(e.getIn(["userInput"]).asMutable({deep:!0}),t.fieldTreeName,t.fieldValue),o=e.asMutable({deep:!0});return d(C({},o,{userInput:a}));case Fe:var i=Ee(e.getIn(["optionList"]).asMutable({deep:!0}),t.fieldTreeName,null!=t.optionList?C({},t.optionList):null),l=e.asMutable({deep:!0});return d(C({},l,{optionList:i}));case Te:var s=[];if(e.getIn(["optionList"]).asMutable({deep:!0}).hasOwnProperty(t.fieldTreeName)){s=[].concat(function(e,t,r){var n=[];return Object.entries(e).forEach(function(e){var a=e[1];if(e[0]===t){var o=String(r);Object.entries(a).map(function(e){e[0]!==o&&n.push(e[1])})}}),n}(e.getIn(["optionList"]).asMutable({deep:!0}),t.fieldTreeName,t.repeatIndex));var u=Ee(e.getIn(["optionList"]).asMutable({deep:!0}),t.fieldTreeName,C({},s)),c=e.asMutable({deep:!0});return d(C({},c,{optionList:u}))}return e;case Ie:var p=C({},e.getIn(["mediaList"]).asMutable({deep:!0}),((r={})[t.mediaObject.name]=t.mediaObject,r)),m=e.asMutable({deep:!0});return d(C({},m,{mediaList:p}));case Ae:return e.getIn(["mediaList"]).asMutable({deep:!0}).hasOwnProperty(t.fieldTreeName),e;case Ne:return Be;case Le:return e.errors.includes(t.fieldTreeName)?e:e.updateIn(["errors"],function(e){return e.concat([t.fieldTreeName])});case xe:return e.errors.includes(t.fieldTreeName)?e.updateIn(["errors"],function(e){return e.filter(function(e){return e!==t.fieldTreeName})}):e;case Ve:var f=function(e,r){var n,a=t.fieldTreeName.split("/"),o="",i=e;for(n=0;n<a.length-1;)if("repeat"===a[n]){o+a[n+=1]in i?i=i[o+a[n]]:i[o+a[n]]=[];var l=parseInt(a[n+1],10);i[l]?i=i[l]:(i[l]={},i=i[l]),o=o+a[n]+"/",n+=2}else o=o+a[n+1]+"/",n+=2;return Object.keys(i).forEach(function(e){e.startsWith(o+a[a.length-1])&&(i[e]=null)}),e}(e.getIn(["userInput"]).asMutable({deep:!0})),h=e.asMutable({deep:!0});return d(C({},h,{userInput:f}));case Pe:return e.updateIn(["errors"],function(e){return e.filter(function(e){return!e.startsWith(t.fieldTreeName)})});case Oe:return d(C({},e,{userInput:t.userInputObj}));case we:return d(C({},e,{csvList:t.csvObj}));case ke:return d(C({},e,{isFormSubmitted:t.isFormSubmitted}));default:return e}}function ze(e){return null!=e&&e.getIn(["color"])}function We(e,t){return be(null!=e&&e.getIn(["userInput"]).asMutable({deep:!0}),t)}function Ye(e,t){return be(null!=e&&e.getIn(["optionList"]).asMutable({deep:!0}),t)}function Je(e,t,r){return se(t,null!=e&&e.userInput,null,r)}function $e(e,t,r,n){return se(t,e.userInput,r,n)}function Xe(e,t){return null!=e&&e.errors.includes(t)}function Ke(e,t){return function(e,r){var n,a=t.split("/"),o="",i=e;for(n=0;n<a.length-1;)if("repeat"===a[n]){o+a[n+=1]in i?i=i[o+a[n]]:i[o+a[n]]=[];var l=parseInt(a[n+1],10);i[l]?i=i[l]:(i[l]={},i=i[l]),o=o+a[n]+"/",n+=2}else o=o+a[n+1]+"/",n+=2;var s=!0;return Object.keys(i).forEach(function(e){e.startsWith(o+a[a.length-1])&&null!=i[e]&&s&&(s=!1)}),s}(null!=e&&e.userInput)}function Ze(e,t){var r=!1;return e.errors.forEach(function(e){e.startsWith(t)&&!r&&(r=!0)}),r}function Qe(e){return null==e||!e.errors||!e.errors.length}function et(e){return null!=e&&e.getIn(["userInput"]).asMutable({deep:!0})}function tt(e){return null!=e&&e.getIn(["csvList"]).asMutable({deep:!0})}function rt(e){return null!=e&&e.isFormSubmitted}function nt(e,t){return e.getIn(["mediaList",t])?e.getIn(["mediaList",t]):null}function at(e){return null!=e&&e.getIn(["mediaList"])}var ot=function(e,r){var n,a;return t.createStyles({root:{"&.MuiAccordionSummary-root":{borderTop:"5px solid "+(r||e.palette.primary.dark),color:(r||e.palette.primary.dark)+" !important","&:hover":{backgroundColor:(r||e.palette.primary.dark)+" !important",color:e.palette.secondary.light+" !important"},"&.Mui-expanded":{backgroundColor:(r||e.palette.primary.dark)+" !important",color:e.palette.secondary.light+" !important"}}},backgroundProp:{backgroundColor:e.palette.secondary.light,display:"block"},insideBackground:{backgroundColor:"white"},borderProp:{boxShadow:"inset 0 0 2px "+e.palette.primary.light,backgroundColor:"white",marginTop:10,marginBottom:5,padding:10},toolbarIcon:C({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar,{"& button":{color:"#FFF"}}),drawerPaperClose:(n={overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},n[e.breakpoints.up("sm")]={width:e.spacing(9)},n.background=r||e.palette.primary.dark,n),paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},listItem:{width:"94%",background:e.palette.primary.main,color:"#FFF",marginTop:"2px",marginLeft:"8px",marginRight:"2px",borderRadius:"3px","&:hover":{background:e.palette.primary.light}},listItemIcon:{color:"#FFF"},listItemActive:{width:"94%",background:e.palette.primary.light,color:"#FFF",marginTop:"2px",marginLeft:"8px",marginRight:"2px",borderRadius:"3px","&:hover":{background:e.palette.primary.light}},nested:{paddingLeft:e.spacing(4),color:"#FFF"},navlogo:{width:"40%",margin:"0 auto",padding:3,backgroundColor:"#FFF",borderRadius:5},listParent:{color:e.palette.common.white,"&.MuiListItem-root":{color:e.palette.common.white,"&.Mui-selected":{color:e.palette.common.white,backgroundColor:e.palette.primary.main},"&:hover":{color:e.palette.common.white,backgroundColor:r||e.palette.primary.dark}}},drawerClose:(a={overflowX:"hidden",transition:e.transitions.create("width",{duration:e.transitions.duration.leavingScreen,easing:e.transitions.easing.sharp}),width:e.spacing(7)+1},a[e.breakpoints.up("sm")]={width:e.spacing(7)+1},a.background=r||e.palette.primary.dark,a),drawerOpen:{"&:hover":{overflowY:"auto"},overflowY:"hidden",transition:e.transitions.create("width",{duration:e.transitions.duration.enteringScreen,easing:e.transitions.easing.sharp})}})};function it(e){var n=e.choices,a=e.csvList,o=e.fieldElement,i=e.fieldParentTreeName,l=e.defaultLanguage,u=e.isComponentRender,d=e.themeColor,f=ce(o,l),h=!1;o.control&&o.control.appearance&&/^w(\d+)\b/i.test(o.control.appearance)&&(h=!0);var g=t.useTheme(),v=m.makeStyles(ot(g,d))();return!u||o.control&&o.control.bodyless&&!1!==o.control.bodyless?(e.isErrorsIncludeGroupFieldsSelector(i+"group/"+o.name+"/")&&e.removeGroupFieldsFromErrorsActionCreator(i+"group/"+o.name+"/"),e.isGroupFieldsEmptySelector(i+o.name)||e.emptyGroupFieldsActionCreator(i+o.name),null):r.createElement(t.Accordion,{defaultExpanded:!0,style:{marginBottom:10}},r.createElement(t.AccordionSummary,{className:v.root,expandIcon:r.createElement(p,null)},r.createElement(c,null,f)),r.createElement(t.AccordionDetails,{className:v.backgroundProp},r.createElement(s.FormGroup,{className:v.borderProp},o.children&&r.createElement(er,{choices:n,fieldElements:o.children,fieldParentTreeName:i+"group/"+o.name+"/",defaultLanguage:l,csvList:a,isAppearanceApplicable:h}))))}var lt=a.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Je(e,t,r)};return{themeColor:ze(e),getEvaluatedExpressionSelector:a,isComponentRender:he(r,n,a),isErrorsIncludeGroupFieldsSelector:function(t){return Ze(e,t)},isGroupFieldsEmptySelector:function(t){return Ke(e,t)}}},{emptyGroupFieldsActionCreator:je,removeGroupFieldsFromErrorsActionCreator:Ge})(it),st=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).handleChange=function(e){var r=t.props,n=r.repeatIndex,a=r.assignmentHandler,o=r.fieldElement,i=r.fieldParentTreeName,l=r.removeHandler,s=r.removeOptionHandler,u=[].concat(r.fieldValue);u=u.filter(function(e,t){return t!==n}),a(i+o.name,u),l(i+"repeat/"+o.name+"/"),s(i+o.name,n)},t}return y(t,e),t.prototype.render=function(){var e=this.props,t=e.choices,r=e.csvList,a=e.defaultLanguage,o=e.fieldElement,i=e.fieldParentTreeName,l=e.repeatIndex,s=e.unControlFlag,u=!1;return o.control&&o.control.appearance&&/^w(\d+)\b/i.test(o.control.appearance)&&(u=!0),n.createElement("div",{className:"groupFormFieldBody"},o.children&&n.createElement(er,{choices:t,fieldElements:o.children,fieldParentTreeName:i+"repeat/"+o.name+"/"+l+"/",defaultLanguage:a,csvList:r,isAppearanceApplicable:u}),!1===s?n.createElement("div",{className:"minusIconWrapper"},n.createElement("span",{onClick:this.handleChange},n.createElement(v.FontAwesomeIcon,{icon:"minus-circle",className:"minusIcon"}))):null)},t}(n.Component),ut=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).addAnotherRepeat=function(e){var r=t.props,n=r.fieldParentTreeName,a=r.fieldElement,o=[].concat(r.fieldValue);o.push({}),t.props.assignFieldValueActionCreator(n+a.name,o)},t}return y(t,e),t.prototype.render=function(){var e=this.props,t=e.choices,n=e.csvList,a=e.fieldValue,o=e.fieldElement,i=e.fieldParentTreeName,l=e.defaultLanguage,u=e.isComponentRender,c=e.assignFieldValueActionCreator,p=e.removeGroupFieldsFromErrorsActionCreator,m=e.removeOptionListFromActionCreator,d=ce(o,l);return u?(a||this.props.assignFieldValueActionCreator(i+o.name,[{}]),r.createElement(s.FormGroup,{className:"groupBody"},r.createElement(s.Label,null,d),a&&a.map(function(e,s){return r.createElement("div",{className:"repeat-fields-body",key:"repeat"+s},r.createElement(st,{choices:t,defaultLanguage:l,fieldElement:o,fieldParentTreeName:i,fieldValue:a,repeatIndex:s,assignmentHandler:c,removeHandler:p,removeOptionHandler:m,csvList:n,unControlFlag:!1}))}),r.createElement("div",null,r.createElement("span",{onClick:this.addAnotherRepeat},r.createElement(v.FontAwesomeIcon,{icon:"plus-circle",className:"plusIcon"}))))):(this.props.isErrorsIncludeGroupFieldsSelector(i+"repeat/"+o.name+"/")&&this.props.removeGroupFieldsFromErrorsActionCreator(i+"repeat/"+o.name+"/"),a&&this.props.assignFieldValueActionCreator(i+o.name,null),null)},t}(r.Component),ct=a.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Je(e,t,r)};return{fieldValue:We(e,n+r.name),getEvaluatedExpressionSelector:a,isComponentRender:he(r,n,a),isErrorsIncludeGroupFieldsSelector:function(t){return Ze(e,t)},isGroupFieldsEmptySelector:function(t){return Ke(e,t)}}},{assignFieldValueActionCreator:Re,emptyGroupFieldsActionCreator:je,removeGroupFieldsFromErrorsActionCreator:Ge,removeOptionListFromActionCreator:Me})(ut),pt=function(e){function t(){return e.apply(this,arguments)||this}y(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.choices,n=e.csvList,a=e.fieldValue,o=e.fieldElement,i=e.fieldParentTreeName,l=e.defaultLanguage,u=e.isComponentRender,c=e.optionList,p=e.assignFieldValueActionCreator,m=e.removeGroupFieldsFromErrorsActionCreator,d=e.removeOptionListFromActionCreator,f=ce(o,l);if(u){a||this.props.assignFieldValueActionCreator(i+o.name,[]);var h=0;if(o.control){var g=o.control["jr:count"];if(/^[0-9]*$/i.test(g))h=parseInt(g,10);else{var v=this.props.getEvaluatedExpressionSelector(g,i+o.name);v&&(h=parseInt(v,10))}}if(a&&0===a.length&&0===h&&this.props.isErrorsIncludeGroupFieldsSelector(i+"repeat/"+o.name+"/")&&this.props.removeGroupFieldsFromErrorsActionCreator(i+"repeat/"+o.name+"/"),a&&a.length>0&&0===h&&(this.removeFromError(),this.props.assignFieldValueActionCreator(i+o.name,[])),c&&E.size(c)>h&&0===h&&this.props.assignOptionListActionCreator(this.props.fieldParentTreeName+this.props.fieldElement.name,[]),h>0){var b=[].concat(a);if(a&&a.length<h)for(var C=h-a.length,y=0;y<C;y++)b.push({});if(a&&a.length>h){for(var S=a.length-h,F=0;F<S;F++)b.pop();this.props.assignFieldValueActionCreator(i+o.name,b),this.removeFromError()}if(c&&E.size(c)>h){var I=E.size(c)-h;this.props.assignOptionListActionCreator(this.props.fieldParentTreeName+this.props.fieldElement.name,Array.prototype.slice.call(c,I)),this.removeFromError()}return r.createElement(s.FormGroup,{className:"groupBodyUnControlled"},r.createElement(s.Label,null,f),b&&b.map(function(e,s){return r.createElement("div",{className:"repeat-fields-body",key:"repeat"+s},r.createElement(st,{choices:t,defaultLanguage:l,fieldElement:o,fieldParentTreeName:i,fieldValue:a,repeatIndex:s,assignmentHandler:p,removeHandler:m,removeOptionHandler:d,csvList:n,unControlFlag:!0}))}))}return null}return this.removeFromError(),a&&this.props.assignFieldValueActionCreator(i+o.name,null),null},n.removeFromError=function(){this.props.isErrorsIncludeGroupFieldsSelector(this.props.fieldParentTreeName+"repeat/"+this.props.fieldElement.name+"/")&&this.props.removeGroupFieldsFromErrorsActionCreator(this.props.fieldParentTreeName+"repeat/"+this.props.fieldElement.name+"/")},t}(r.Component),mt=a.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Je(e,t,r)};return{fieldValue:We(e,n+r.name),getEvaluatedExpressionSelector:a,isComponentRender:he(r,n,a),isErrorsIncludeGroupFieldsSelector:function(t){return Ze(e,t)},isGroupFieldsEmptySelector:function(t){return Ke(e,t)},optionList:Ye(e,n+r.name)}},{assignFieldValueActionCreator:Re,assignOptionListActionCreator:qe,emptyGroupFieldsActionCreator:je,removeGroupFieldsFromErrorsActionCreator:Ge,removeOptionListFromActionCreator:Me})(pt),dt=function(e){function t(){return e.apply(this,arguments)||this}return y(t,e),t.prototype.render=function(){var e=this.props.fieldElement;return r.createElement(e.control&&e.control["jr:count"]?mt:ct,Object.assign({},this.props))},t}(r.Component),ft=function(e){function t(){return e.apply(this,arguments)||this}return y(t,e),t.prototype.render=function(){var e=this.props,t=e.fieldElement,n=e.fieldParentTreeName,a=e.fieldValue,o=e.isComponentRender,i=e.getEvaluatedExpressionSelector,l=e.isPresentInErrorSelector,u=fe(t)&&(!a||""===a),c=a&&""!==a&&ve(t,n,i);if(o){null==a&&"default"in t&&this.props.assignFieldValueActionCreator(n+t.name,t.default);var p=ge(t,n,i);!u&&!c||l(n+t.name)?u||c||!l(n+t.name)||this.props.removeErrorInputIdActionCreator(n+t.name):this.props.addErrorInputIdActionCreator(n+t.name);var m="";return t.bind&&t.bind.calculate&&(m=this.props.getEvaluatedExpressionSelector(t.bind.calculate,n+t.name)),m&&a!==m&&this.props.assignFieldValueActionCreator(n+t.name,m),r.createElement("div",null,r.createElement(s.Input,{type:"hidden",name:t.name,value:m||"",readOnly:p}))}return null!=a&&(this.props.assignFieldValueActionCreator(n+t.name,null),l(n+t.name)&&this.props.removeErrorInputIdActionCreator(n+t.name)),null},t}(r.Component),ht=a.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Je(e,t,r)};return{fieldValue:We(e,n+r.name),getEvaluatedExpressionSelector:a,isComponentRender:he(r,n,a),isPresentInErrorSelector:function(t){return Xe(e,t)}}},{addErrorInputIdActionCreator:_e,assignFieldValueActionCreator:Re,removeErrorInputIdActionCreator:He})(ft),gt=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).onChangeHandler=function(e){t.props.assignFieldValueActionCreator(t.props.fieldParentTreeName+t.props.fieldElement.name,""!==e?new Date(e):null)},t}return y(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.fieldElement,a=t.fieldParentTreeName,o=t.fieldValue,i=t.isComponentRender,l=t.getEvaluatedExpressionSelector,u=t.getFormSubmitStatusSelector,c=t.isPresentInErrorSelector,p=t.defaultLanguage,m=fe(n),d=u,f=m&&(!o||""===o),h=o&&""!==o&&ve(n,a,l),g=me(l,ce(n,p),a+n.name),E=me(l,de(n,p),a+n.name),C=pe(n,p);if(i){null==o&&"default"in n&&this.props.assignFieldValueActionCreator(a+n.name,n.default);var y=ge(n,a,l);!f&&!h||c(a+n.name)?f||h||!c(a+n.name)||this.props.removeErrorInputIdActionCreator(a+n.name):this.props.addErrorInputIdActionCreator(a+n.name);var S=null;o&&""!==o&&(S=new Date(o));var F=null;n.bind&&n.bind.calculate&&(F=this.props.getEvaluatedExpressionSelector(n.bind.calculate,a+n.name)),void 0!==o&&""!=o||!F||this.props.assignFieldValueActionCreator(a+n.name,F);var I=c(a+n.name);return r.createElement(s.FormGroup,null,r.createElement(s.Label,null,g," ",m&&r.createElement("span",{className:"requiredTextSteric"},"*")),r.createElement(b,{className:"react-custom-datepicker",dateFormat:"dd/MM/yyyy",name:n.name,selected:S,onChange:function(t){return e.onChangeHandler(t)},readOnly:y,placeholderText:"dd/mm/yyyy",popperPlacement:"top",popperModifiers:[{name:"offset",options:{offset:[5,10]}},{name:"preventOverflow",options:{rootBoundary:"viewport",tether:!1,altAxis:!0}}]}),d&&I&&r.createElement(v.FontAwesomeIcon,{icon:"exclamation-circle",className:"errorSign"}),n.hint&&r.createElement(s.Label,{className:"hintText"},C),d&&f&&r.createElement(s.Label,{className:"requiredText"},T),h&&r.createElement(s.Label,{className:"constraintText"},E))}return null!=o&&(this.props.assignFieldValueActionCreator(a+n.name,null),c(a+n.name)&&this.props.removeErrorInputIdActionCreator(a+n.name)),null},t}(r.Component),vt=a.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Je(e,t,r)},o=rt(e);return{fieldValue:We(e,n+r.name),getEvaluatedExpressionSelector:a,getFormSubmitStatusSelector:o,isComponentRender:he(r,n,a),isPresentInErrorSelector:function(t){return Xe(e,t)}}},{addErrorInputIdActionCreator:_e,assignFieldValueActionCreator:Re,removeErrorInputIdActionCreator:He})(gt),Et=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).handleChange=function(e){return function(r){var n=new Date(r),a=n.getTimezoneOffset()/60;n.setHours(n.getHours()+a),t.props.assignFieldValueActionCreator(t.props.fieldParentTreeName+e,""!==r?n:null)}},t}return y(t,e),t.prototype.render=function(){var e=this.props,t=e.fieldElement,n=e.fieldParentTreeName,a=e.fieldValue,o=e.isComponentRender,i=e.getEvaluatedExpressionSelector,l=e.getFormSubmitStatusSelector,u=e.isPresentInErrorSelector,c=e.defaultLanguage,p=fe(t),m=l,d=p&&(!a||""===a),f=a&&""!==a&&ve(t,n,i),h=me(i,ce(t,c),n+t.name),g=me(i,de(t,c),n+t.name),E=pe(t,c);if(o){null==a&&"default"in t&&this.props.assignFieldValueActionCreator(n+t.name,t.default);var C=ge(t,n,i);!d&&!f||u(n+t.name)?d||f||!u(n+t.name)||this.props.removeErrorInputIdActionCreator(n+t.name):this.props.addErrorInputIdActionCreator(n+t.name);var y=u(n+t.name),S=null;if(a){var F=(S=new Date(a)).getTimezoneOffset()/60;S.setHours(S.getHours()-F)}return r.createElement(s.FormGroup,null,r.createElement(s.Label,null,h," ",p&&r.createElement("span",{className:"requiredTextSteric"},"*")),r.createElement("br",null),r.createElement(b,{name:t.name,selected:a?S:null,onChange:this.handleChange(t.name),showTimeSelect:!0,timeFormat:"h:m aa",timeIntervals:15,timeCaption:"time",dateFormat:"MM/dd/yyyy h:mm aa",placeholderText:"mm/dd/yyyy h:m aa",className:"form-control",readOnly:C}),r.createElement("br",null),m&&y&&r.createElement(v.FontAwesomeIcon,{icon:"exclamation-circle",className:"errorSign"}),t.hint&&r.createElement(s.Label,{className:"hintText"},E),m&&d&&r.createElement(s.Label,{className:"requiredText"},T),f&&r.createElement(s.Label,{className:"constraintText"},g))}return null!=a&&(this.props.assignFieldValueActionCreator(n+t.name,null),u(n+t.name)&&this.props.removeErrorInputIdActionCreator(n+t.name)),null},t}(r.Component),bt=a.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Je(e,t,r)},o=rt(e);return{fieldValue:We(e,n+r.name),getEvaluatedExpressionSelector:a,getFormSubmitStatusSelector:o,isComponentRender:he(r,n,a),isPresentInErrorSelector:function(t){return Xe(e,t)}}},{addErrorInputIdActionCreator:_e,assignFieldValueActionCreator:Re,removeErrorInputIdActionCreator:He})(Et),Ct=function(e){function t(t){var r;return(r=e.call(this,t)||this).onChangeHandler=function(e){r.setState(C({},r.state,{fieldValue:e.currentTarget.value||"",isFocused:!0}))},r.onBlurHandler=function(e){r.setState(C({},r.state,{fieldValue:e.currentTarget.value||"",isFocused:!1})),r.props.assignFieldValueActionCreator(r.props.fieldParentTreeName+e.currentTarget.name,""!==e.currentTarget.value?parseFloat(e.currentTarget.value):null)},r.state={fieldValue:"",isFocused:!1},r}return y(t,e),t.prototype.render=function(){var e=this.props,t=e.fieldElement,n=e.fieldParentTreeName,a=e.fieldValue,o=e.isComponentRender,i=e.getEvaluatedExpressionSelector,l=e.getFormSubmitStatusSelector,u=e.isPresentInErrorSelector,c=e.defaultLanguage,p=fe(t),m=l,d=p&&(null===a||""===a||void 0===a),f=!1;try{f=""!==a&&null!=a&&ve(t,n,i)}catch(e){console.log("got the constraint violation error"),f=!0}var h=me(i,ce(t,c),n+t.name),g=me(i,de(t,c),n+t.name),E=pe(t,c);if(o){null==a&&"default"in t&&this.props.assignFieldValueActionCreator(n+t.name,t.default);var b,y=ge(t,n,i);!d&&!f||u(n+t.name)?d||f||!u(n+t.name)||this.props.removeErrorInputIdActionCreator(n+t.name):this.props.addErrorInputIdActionCreator(n+t.name),"string"==typeof this.props.fieldValue&&this.props.assignFieldValueActionCreator(n+t.name,parseFloat(this.props.fieldValue)),b=0===a?"0":a;var S,F=u(n+t.name);return t.bind&&t.bind.calculate&&(S=this.props.getEvaluatedExpressionSelector(t.bind.calculate,n+t.name),a&&S!==a&&this.props.assignFieldValueActionCreator(n+t.name,S),b=S),r.createElement(s.FormGroup,null,r.createElement(s.Label,null,h," ",p&&r.createElement("span",{className:"requiredTextSteric"},"*")),r.createElement(s.Input,{type:"number",step:"any",name:t.name,onChange:this.onChangeHandler,onBlur:this.onBlurHandler,value:this.state.isFocused?this.state.fieldValue||"":b||"",readOnly:y}),m&&F&&r.createElement(v.FontAwesomeIcon,{icon:"exclamation-circle",className:"errorSign"}),t.hint&&r.createElement(s.Label,{className:"hintText"},E),m&&d&&r.createElement(s.Label,{className:"requiredText"},T),f&&r.createElement(s.Label,{className:"constraintText"},g))}return this.state.isFocused&&this.setState(C({},this.state,{isFocused:!1})),null!=a&&(this.props.assignFieldValueActionCreator(n+t.name,null),u(n+t.name)&&this.props.removeErrorInputIdActionCreator(n+t.name)),null},t}(r.Component),yt=a.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Je(e,t,r)},o=rt(e);return{fieldValue:We(e,n+r.name),getEvaluatedExpressionSelector:a,getFormSubmitStatusSelector:o,isComponentRender:he(r,n,a),isPresentInErrorSelector:function(t){return Xe(e,t)}}},{addErrorInputIdActionCreator:_e,assignFieldValueActionCreator:Re,removeErrorInputIdActionCreator:He})(Ct),St=function(e){function t(){return e.apply(this,arguments)||this}return y(t,e),t.prototype.render=function(){var e=this.props,t=e.fieldName,r=e.assignFieldValueActionCreator;return n.createElement(n.Fragment,null,n.createElement("p",{className:"text-muted"},"Uploaded File Name: ",n.createElement("strong",{className:"text-primary"}," ",e.fieldValue," ")),n.createElement(s.Button,{size:"sm",color:"danger",onClick:function(){r(t,null)}},"Remove File"))},t}(n.Component),Ft=a.connect(function(e,t){return{fileObject:nt(e,t.fieldValue)}},{assignFieldValueActionCreator:Re})(St),It=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).onChangeHandler=function(e){e.target.files[0]?(t.props.assignFieldValueActionCreator(t.props.fieldParentTreeName+e.target.name,e.target.files[0].name),t.props.addMediaListActionCreator(e.target.files[0])):t.props.assignFieldValueActionCreator(t.props.fieldParentTreeName+e.target.name,null)},t}return y(t,e),t.prototype.render=function(){var e=this.props,t=e.fieldElement,n=e.fieldParentTreeName,a=e.fieldValue,o=e.isComponentRender,i=e.getEvaluatedExpressionSelector,l=e.getFormSubmitStatusSelector,u=e.isPresentInErrorSelector,c=e.defaultLanguage,p=fe(t),m=l,d=p&&(!a||""===a),f=a&&""!==a&&ve(t,n,i),h=me(i,ce(t,c),n+t.name),g=me(i,de(t,c),n+t.name),E=pe(t,c);if(o){null==a&&"default"in t&&this.props.assignFieldValueActionCreator(n+t.name,t.default);var b=ge(t,n,i);!d&&!f||u(n+t.name)?d||f||!u(n+t.name)||this.props.removeErrorInputIdActionCreator(n+t.name):this.props.addErrorInputIdActionCreator(n+t.name);var C=u(n+t.name);return r.createElement(s.FormGroup,null,r.createElement(s.Label,null,h," ",p&&r.createElement("span",{className:"requiredTextSteric"},"*")),a?r.createElement(Ft,{fieldName:n+t.name,fieldValue:a}):r.createElement(s.Input,"photo"===t.type?{type:"file",accept:"image/*",name:t.name,onChange:this.onChangeHandler,readOnly:b}:{type:"file",name:t.name,onChange:this.onChangeHandler,readOnly:b}),m&&C&&r.createElement(v.FontAwesomeIcon,{icon:"exclamation-circle",className:"errorSign"}),t.hint&&r.createElement(s.Label,{className:"hintText"},E),m&&d&&r.createElement(s.Label,{className:"requiredText"},T),f&&r.createElement(s.Label,{className:"constraintText"},g))}return null!=a&&(this.props.assignFieldValueActionCreator(n+t.name,null),u(n+t.name)&&this.props.removeErrorInputIdActionCreator(n+t.name)),null},t}(r.Component),At=a.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Je(e,t,r)},o=rt(e);return{fieldValue:We(e,n+r.name),getEvaluatedExpressionSelector:a,getFormSubmitStatusSelector:o,isComponentRender:he(r,n,a),isPresentInErrorSelector:function(t){return Xe(e,t)}}},{addErrorInputIdActionCreator:_e,addMediaListActionCreator:De,assignFieldValueActionCreator:Re,removeErrorInputIdActionCreator:He})(It),Tt=function(e){function t(t){var r;return(r=e.call(this,t)||this).geoLocation=function(){navigator.geolocation?(navigator.geolocation.getCurrentPosition(r.showPosition,r.showError),console.log("geolocation ache: ",navigator.geolocation)):console.log("Geolocation is not supported by this browser.")},r.showPosition=function(e){console.log("----- lat lan ---------"),r.props.assignFieldValueActionCreator(r.props.fieldParentTreeName+r.props.fieldElement.name,e.coords.latitude+", "+e.coords.longitude),console.log(e.coords)},r.showError=function(e){switch(e.code){case e.PERMISSION_DENIED:console.log("User denied the request for Geolocation.");break;case e.POSITION_UNAVAILABLE:console.log("Location information is unavailable.");break;case e.TIMEOUT:console.log("The request to get user location timed out.");break;case e.UNKNOWN_ERROR:console.log("An unknown error occurred.")}},r.onBlurHandler=function(e){r.setState(C({},r.state,{fieldValue:e.currentTarget.value||"",isFocused:!1})),r.props.assignFieldValueActionCreator(r.props.fieldParentTreeName+e.currentTarget.name,e.currentTarget.value||"")},r.state={fieldValue:"",isFocused:!1},r}y(t,e);var n=t.prototype;return n.componentDidMount=function(){this.geoLocation()},n.render=function(){var e=this.props,t=e.fieldElement,n=e.fieldParentTreeName,a=e.fieldValue,o=e.isComponentRender,i=e.getEvaluatedExpressionSelector,l=e.getFormSubmitStatusSelector,u=e.isPresentInErrorSelector,c=e.defaultLanguage,p=fe(t),m=l,d=p&&(!a||""===a),f=a&&""!==a&&ve(t,n,i),h=me(i,ce(t,c),n+t.name),g=me(i,de(t,c),n+t.name),E=pe(t,c);if(o){null==a&&"default"in t&&this.props.assignFieldValueActionCreator(n+t.name,t.default),!d&&!f||u(n+t.name)?d||f||!u(n+t.name)||this.props.removeErrorInputIdActionCreator(n+t.name):this.props.addErrorInputIdActionCreator(n+t.name);var b=u(n+t.name);return r.createElement(s.FormGroup,null,r.createElement(s.Label,null,h," ",p&&r.createElement("span",{className:"requiredTextSteric"},"*")),r.createElement(s.Input,{type:"text",name:t.name,onBlur:this.onBlurHandler,value:this.state.isFocused?this.state.fieldValue||"":a||"",readOnly:!0}),m&&b&&r.createElement(v.FontAwesomeIcon,{icon:"exclamation-circle",className:"errorSign"}),t.hint&&r.createElement(s.Label,{className:"hintText"},E),m&&d&&r.createElement(s.Label,{className:"requiredText"},T),f&&r.createElement(s.Label,{className:"constraintText"},g))}return this.state.isFocused&&this.setState(C({},this.state,{isFocused:!1})),null!=a&&(this.props.assignFieldValueActionCreator(n+t.name,null),u(n+t.name)&&this.props.removeErrorInputIdActionCreator(n+t.name)),null},t}(r.Component),Nt=a.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Je(e,t,r)},o=rt(e);return{fieldValue:We(e,n+r.name),getEvaluatedExpressionSelector:a,getFormSubmitStatusSelector:o,isComponentRender:he(r,n,a),isPresentInErrorSelector:function(t){return Xe(e,t)}}},{addErrorInputIdActionCreator:_e,assignFieldValueActionCreator:Re,removeErrorInputIdActionCreator:He})(Tt),Lt=function(e){function t(){return e.apply(this,arguments)||this}return y(t,e),t.prototype.render=function(){var e=this.props,t=e.fieldName,r=e.fieldValue,a=e.assignFieldValueActionCreator;return console.log("value of audio file: ",r),n.createElement(n.Fragment,null,n.createElement("p",{className:"text-muted"},"Uploaded File Name: ",n.createElement("strong",{className:"text-primary"}," ",r," ")),n.createElement("br",null),n.createElement(s.Button,{size:"sm",color:"danger",onClick:function(){a(t,null)}},"Remove File"))},t}(n.Component),xt=a.connect(function(e,t){return{fileObject:nt(e,t.fieldValue)}},{assignFieldValueActionCreator:Re})(Lt),Vt=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).onChangeHandler=function(e){e.target.files[0]?(t.props.assignFieldValueActionCreator(t.props.fieldParentTreeName+e.target.name,e.target.files[0].name),t.props.addMediaListActionCreator(e.target.files[0])):t.props.assignFieldValueActionCreator(t.props.fieldParentTreeName+e.target.name,null)},t}return y(t,e),t.prototype.render=function(){var e=this.props,t=e.fieldElement,n=e.fieldParentTreeName,a=e.fieldValue,o=e.isComponentRender,i=e.getEvaluatedExpressionSelector,l=e.getFormSubmitStatusSelector,u=e.isPresentInErrorSelector,c=e.defaultLanguage,p=fe(t),m=l,d=p&&(!a||""===a),f=a&&""!==a&&ve(t,n,i),h=me(i,ce(t,c),n+t.name),g=me(i,de(t,c),n+t.name),E=pe(t,c);if(o){null==a&&"default"in t&&this.props.assignFieldValueActionCreator(n+t.name,t.default);var b=ge(t,n,i);!d&&!f||u(n+t.name)?d||f||!u(n+t.name)||this.props.removeErrorInputIdActionCreator(n+t.name):this.props.addErrorInputIdActionCreator(n+t.name);var C=u(n+t.name);return r.createElement(s.FormGroup,null,r.createElement(s.Label,null,h," ",p&&r.createElement("span",{className:"requiredTextSteric"},"*")),a?r.createElement(xt,{fieldName:n+t.name,fieldValue:a}):r.createElement(s.Input,{type:"file",name:t.name,onChange:this.onChangeHandler,readOnly:b}),m&&C&&r.createElement(v.FontAwesomeIcon,{icon:"exclamation-circle",className:"errorSign"}),t.hint&&r.createElement(s.Label,{className:"hintText"},E),m&&d&&r.createElement(s.Label,{className:"requiredText"},T),f&&r.createElement(s.Label,{className:"constraintText"},g))}return null!=a&&(this.props.assignFieldValueActionCreator(n+t.name,null),u(n+t.name)&&this.props.removeErrorInputIdActionCreator(n+t.name)),null},t}(r.Component),Pt=a.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Je(e,t,r)},o=rt(e);return{fieldValue:We(e,n+r.name),getEvaluatedExpressionSelector:a,getFormSubmitStatusSelector:o,isComponentRender:he(r,n,a),isPresentInErrorSelector:function(t){return Xe(e,t)}}},{addErrorInputIdActionCreator:_e,addMediaListActionCreator:De,assignFieldValueActionCreator:Re,removeErrorInputIdActionCreator:He})(Vt),Ot=function(e){function t(t){var r;return(r=e.call(this,t)||this).onChangeHandler=function(e){r.setState(C({},r.state,{fieldValue:e.currentTarget.value||"",isFocused:!0}))},r.onBlurHandler=function(e){r.setState(C({},r.state,{fieldValue:e.currentTarget.value||"",isFocused:!1})),r.props.assignFieldValueActionCreator(r.props.fieldParentTreeName+e.currentTarget.name,""!==e.currentTarget.value?parseInt(e.currentTarget.value,10):null)},r.state={fieldValue:"",isFocused:!1},r}return y(t,e),t.prototype.render=function(){var e=this.props,t=e.fieldElement,n=e.fieldParentTreeName,a=e.fieldValue,o=e.isComponentRender,i=e.getEvaluatedExpressionSelector,l=e.getFormSubmitStatusSelector,u=e.isPresentInErrorSelector,c=e.defaultLanguage,p=fe(t),m=l,d=p&&(null===a||""===a||void 0===a),f=!1;try{f=""!==a&&null!=a&&ve(t,n,i)}catch(e){console.log("constraint violation in integer component"),f=!0}var h=me(i,ce(t,c),n+t.name),g=me(i,de(t,c),n+t.name)||"",E=pe(t,c);if(o){null==a&&"default"in t&&this.props.assignFieldValueActionCreator(n+t.name,t.default);var b,y=ge(t,n,i);!d&&!f||u(n+t.name)?d||f||!u(n+t.name)||this.props.removeErrorInputIdActionCreator(n+t.name):this.props.addErrorInputIdActionCreator(n+t.name),"string"==typeof this.props.fieldValue&&this.props.assignFieldValueActionCreator(n+t.name,parseInt(this.props.fieldValue,10)),b=0===a?"0":a;var S,F=u(n+t.name);return t.bind&&t.bind.calculate&&(S=this.props.getEvaluatedExpressionSelector(t.bind.calculate,n+t.name),a&&S!==a&&this.props.assignFieldValueActionCreator(n+t.name,S),b=S),r.createElement(s.FormGroup,null,r.createElement(s.Label,null,h," ",p&&r.createElement("span",{className:"requiredTextSteric"},"*")),r.createElement(s.Input,{type:"number",name:t.name,onChange:this.onChangeHandler,onBlur:this.onBlurHandler,value:this.state.isFocused?this.state.fieldValue||"":b||"",readOnly:y}),m&&F&&r.createElement(v.FontAwesomeIcon,{icon:"exclamation-circle",className:"errorSign"}),t.hint&&r.createElement(s.Label,{className:"hintText"},E),m&&d&&r.createElement(s.Label,{className:"requiredText"},T),f&&r.createElement(s.Label,{className:"constraintText"},g))}return this.state.isFocused&&this.setState(C({},this.state,{isFocused:!1})),null!=a&&(this.props.assignFieldValueActionCreator(n+t.name,null),u(n+t.name)&&this.props.removeErrorInputIdActionCreator(n+t.name)),null},t}(r.Component),wt=a.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Je(e,t,r)},o=rt(e);return{fieldValue:We(e,n+r.name),getEvaluatedExpressionSelector:a,getFormSubmitStatusSelector:o,isComponentRender:he(r,n,a),isPresentInErrorSelector:function(t){return Xe(e,t)}}},{addErrorInputIdActionCreator:_e,assignFieldValueActionCreator:Re,removeErrorInputIdActionCreator:He})(Ot),kt=function(e){function t(){return e.apply(this,arguments)||this}return y(t,e),t.prototype.render=function(){var e=this.props,t=e.fieldElement,n=e.fieldParentTreeName,a=e.fieldValue,o=e.isComponentRender,i=e.getEvaluatedExpressionSelector,l=e.isPresentInErrorSelector,u=e.defaultLanguage,c=fe(t),p=c&&(!a||""===a),m=a&&""!==a&&ve(t,n,i),d=ce(t,u),f=me(i,de(t,u),n+t.name);if(o){null==a&&"default"in t&&this.props.assignFieldValueActionCreator(t.name,t.default);var h=pe(t,u);return!p&&!m||l(n+t.name)?p||m||!l(n+t.name)||this.props.removeErrorInputIdActionCreator(n+t.name):this.props.addErrorInputIdActionCreator(n+t.name),r.createElement(s.FormGroup,null,r.createElement(s.Label,null,d),c&&r.createElement(s.Label,{className:"requiredTextSteric"},"*"),t.hint&&r.createElement(s.FormText,{className:"hintText"},h),p&&r.createElement(s.Label,{className:"requiredText"},T),m&&r.createElement(s.Label,{className:"constraintText"},f))}return null!=a&&(this.props.assignFieldValueActionCreator(n+t.name,null),l(n+t.name)&&this.props.removeErrorInputIdActionCreator(n+t.name)),null},t}(r.Component),Rt=a.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Je(e,t,r)};return{fieldValue:We(e,n+r.name),getEvaluatedExpressionSelector:a,isComponentRender:he(r,n,a),isPresentInErrorSelector:function(t){return Xe(e,t)}}},{addErrorInputIdActionCreator:_e,assignFieldValueActionCreator:Re,removeErrorInputIdActionCreator:He})(kt),qt={control:function(e,t){return C({},e,{backgroundColor:"white"})},container:function(e,t){return C({},e,{backgroundColor:"white"})}},Mt=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).setOptionList=function(e){var r=[];e.map(function(e){var t={};t.name=e.name,t.label=e.label,r.push(t)}),E.isEqual(t.props.optionList,C({},r))||t.props.assignOptionListActionCreator(t.props.fieldParentTreeName+t.props.fieldElement.name,r)},t.onChangeHandler=function(e){return function(r){var n=[],a=0;r&&r.length>0?(r.map(function(){n.includes(r[a].value)||n.push(r[a].value),a++}),t.props.assignFieldValueActionCreator(t.props.fieldParentTreeName+e,n)):t.props.assignFieldValueActionCreator(t.props.fieldParentTreeName+e,null)}},t.getProcessedString=function(e){var r=(e.match(/\([^\)]+\)/i)||[""])[0];if(r.length>2){var n=(r=r.substring(1,r.length-1)).split(","),a=[].concat(n);return a=a.splice(2,a.length),t.extractAndFilterOptions(n[0],n[1]||null,a||[])}return[]},t.extractAndFilterOptions=function(e,r,n){r&&(r=(r=r.trim()).substring(1,r.length-1).trim());var a=[],o=[],i=[];if(t.props.csvList[e=e.substring(1,e.length-1)+".csv"]){var l=e.replace(/'/g,"");a=t.props.csvList[l]||[]}if(r&&"matches"===r.trim()){for(var s=0,u=function(){var e=n[s].trim();e=e.substring(1,e.length-1).trim();var r=n[s+1],o=[].concat(a),l=[];o.forEach(function(e){l=t.props.getEvaluatedExpressionSelectorForSelect(r,t.props.fieldParentTreeName+t.props.fieldElement.name,e)});var u=0;null===l&&(l=[]),Array.isArray(l)||(l=[l]),console.log("hello chocolate cookies"),l.map(function(){a.map(function(t){t[e]==l[u]&&i.push(t)}),u+=1}),s+=2};s<n.length;)u();a=[].concat(Array.from(new Set(i)))}if(0!==a.length){var c="",p="";return t.props.fieldElement.children&&t.props.fieldElement.children[0]&&t.props.fieldElement.children[0].name&&t.props.fieldElement.children[0].label&&(c=ce(t.props.fieldElement.children[0],t.props.defaultLanguage),p=t.props.fieldElement.children[0].name),a.forEach(function(e){var t={};t.label=e[c].trim(),t.name=e[p].trim(),o.push(t)}),E.uniqBy(o,"name")}return[]},t}return y(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.choices,a=t.fieldElement,o=t.fieldParentTreeName,i=t.fieldValue,l=t.isComponentRender,c=t.getEvaluatedExpressionSelector,p=t.getFormSubmitStatusSelector,m=t.isPresentInErrorSelector,d=t.defaultLanguage,f=fe(a),h=p,g=f&&(!i||i===[]),b=i&&i!==[]&&ve(a,o,c),C=me(c,ce(a,d),o+a.name),y=me(c,de(a,d),o+a.name),S=pe(a,d);if(l){null==i&&"default"in a&&this.props.assignFieldValueActionCreator(o+a.name,a.default);var F=ge(a,o,c);!g&&!b||m(o+a.name)?g||b||!m(o+a.name)||this.props.removeErrorInputIdActionCreator(o+a.name):this.props.addErrorInputIdActionCreator(o+a.name);var I=[],A=[];if(a.control&&a.control.appearance){var N=a.control.appearance.toString().replace("minimal","");if(/search\([^\)|(]+\)/i.test(N)){var L=N.match(/search\([^\)|(]+\)/i)||[""];I=this.getProcessedString(L[0])}}if(a.control&&a.control.appearance&&/search\([^\)|(]+\)/i.test(a.control.appearance))I.map(function(e){return A.push({label:e.label,value:e.name})}),this.setOptionList(I);else if(a.itemset){if(n&&n[a.itemset.trim()]){E.forEach(n[a.itemset.trim()],function(t){if(a.choice_filter&&e.props.getEvaluatedExpressionSelectorForSelect(a.choice_filter,o+a.name,t)){var r=ce(t,d);A.push({label:r,value:t.name})}});var x=[];A&&A.map(function(e){var t={};t.name=e.value,t.label=e.label,x.push(t)}),this.setOptionList(x)}}else a.children&&(a.children.map(function(e){var t=ce(e,d);A.push({label:t,value:e.name})}),this.setOptionList(a.children));var V=[],P=!1;if(i&&i.length>0){var O=[];A.map(function(e){e.value&&O.push(e.value)});var w=i,k=Array.isArray(w),R=0;for(w=k?w:w[Symbol.iterator]();;){var q;if(k){if(R>=w.length)break;q=w[R++]}else{if((R=w.next()).done)break;q=R.value}var M=q;O.includes(M)?V.push(M):P=!0}}i&&i.length>0&&P&&this.props.assignFieldValueActionCreator(this.props.fieldParentTreeName+a.name,V||[]);var D=[];if(i&&i.length>0&&A.map(function(e){var t=i,r=Array.isArray(t),n=0;for(t=r?t:t[Symbol.iterator]();;){var a;if(r){if(n>=t.length)break;a=t[n++]}else{if((n=t.next()).done)break;a=n.value}e.value===a&&D.push(e)}}),"string"==typeof this.props.fieldValue){var _=i.split(" ");this.props.assignFieldValueActionCreator(o+a.name,_)}var H="";a.bind&&a.bind.calculate&&(H=this.props.getEvaluatedExpressionSelector(a.bind.calculate,o+a.name)),H&&i!==H&&this.props.assignFieldValueActionCreator(o+a.name,H);var j=m(o+a.name);return r.createElement(s.FormGroup,null,r.createElement(s.Label,null,C," ",f&&r.createElement("span",{className:"requiredTextSteric"},"*")),r.createElement("div",{key:a.name,className:"selectAllDropDown"},r.createElement(u,{styles:qt,isDisabled:F,isMulti:!0,name:a.name,options:A,onChange:this.onChangeHandler(a.name),value:D||H||[]})),h&&j&&r.createElement(v.FontAwesomeIcon,{icon:"exclamation-circle",className:"errorSign"}),a.hint&&r.createElement(s.Label,{className:"hintText"},S),h&&g&&r.createElement(s.Label,{className:"requiredText"},T),b&&r.createElement(s.Label,{className:"constraintText"},y))}return null!=i&&(this.props.assignFieldValueActionCreator(o+a.name,null),m(o+a.name)&&this.props.removeErrorInputIdActionCreator(o+a.name)),null!=this.props.optionList&&this.props.assignOptionListActionCreator(this.props.fieldParentTreeName+a.name,null),null},t}(r.Component),Dt=a.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Je(e,t,r)},o=rt(e);return{fieldValue:We(e,n+r.name),getEvaluatedExpressionSelector:a,getEvaluatedExpressionSelectorForSelect:function(t,r,n){return $e(e,t,n,r)},getFormSubmitStatusSelector:o,isComponentRender:he(r,n,a),isPresentInErrorSelector:function(t){return Xe(e,t)},optionList:Ye(e,n+r.name)}},{addErrorInputIdActionCreator:_e,assignFieldValueActionCreator:Re,assignOptionListActionCreator:qe,removeErrorInputIdActionCreator:He})(Mt),_t=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).onChangeHandlerCheckBox=function(e){var r=t.props,n=r.fieldValue,a=r.fieldParentTreeName+r.fieldElement.name;if(e.target.checked)n&&n.length>0&&!n.includes(e.target.value)?t.props.assignFieldValueActionCreator(a,[].concat(n,[e.target.value])):t.props.assignFieldValueActionCreator(a,[e.target.value]);else if(n&&n.length>0&&n.includes(e.target.value)){var o=n.filter(function(t){return t!==e.target.value});t.props.assignFieldValueActionCreator(a,o.length?o:null)}},t.getProcessedString=function(e){var r=(e.match(/\([^\)]+\)/i)||[""])[0];if(r.length>2){var n=(r=r.substring(1,r.length-1)).split(","),a=[].concat(n);return a=a.splice(2,a.length),t.extractAndFilterOptions(n[0],n[1]||null,a||[])}return[]},t.extractAndFilterOptions=function(e,r,n){r&&(r=(r=r.trim()).substring(1,r.length-1).trim());var a=[],o=[],i=[];if(t.props.csvList[e=e.substring(1,e.length-1)+".csv"]){var l=e.replace(/'/g,"");a=t.props.csvList[l]||[]}if(r&&"matches"===r.trim()){for(var s=0,u=function(){var e=n[s].trim();e=e.substring(1,e.length-1).trim();var r=n[s+1],o=[].concat(a),l=[];o.forEach(function(e){l=t.props.getEvaluatedExpressionSelectorForSelect(r,t.props.fieldParentTreeName+t.props.fieldElement.name,e)});var u=0;null===l&&(l=[]),Array.isArray(l)||(l=[l]),l.map(function(){a.map(function(t){t[e]===l[u]&&i.push(t)}),u+=1}),s+=2};s<n.length;)u();a=[].concat(Array.from(new Set(i)))}if(0!==a.length){var c="",p="";return t.props.fieldElement.children&&t.props.fieldElement.children[0]&&t.props.fieldElement.children[0].name&&t.props.fieldElement.children[0].label&&(c=ce(t.props.fieldElement.children[0],t.props.defaultLanguage),p=t.props.fieldElement.children[0].name),a.forEach(function(e){var t={};t.label=e[c].trim(),t.name=e[p].trim(),o.push(t)}),E.uniqBy(o,"name")}return[]},t}return y(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.choices,a=t.fieldElement,o=t.fieldParentTreeName,i=t.fieldValue,l=t.isComponentRender,u=t.getEvaluatedExpressionSelector,c=t.getFormSubmitStatusSelector,p=t.isPresentInErrorSelector,m=t.defaultLanguage,d=fe(a),f=c,h=d&&(!i||i===[]),g=i&&i!==[]&&ve(a,o,u),b=me(u,ce(a,m),o+a.name),y=me(u,de(a,m),o+a.name),S=pe(a,m);if(l){null==i&&"default"in a&&this.props.assignFieldValueActionCreator(o+a.name,a.default);var F=ge(a,o,u);!h&&!g||p(o+a.name)?h||g||!p(o+a.name)||this.props.removeErrorInputIdActionCreator(o+a.name):this.props.addErrorInputIdActionCreator(o+a.name);var I=[],A=[];if(a.control&&a.control.appearance){var N=a.control.appearance.toString().replace("minimal","");if(/search\([^\)|(]+\)/i.test(N)){var L=N.match(/search\([^\)|(]+\)/i)||[""];I=this.getProcessedString(L[0])}}var x=[];a.children&&a.children.map(function(e){var t={};t.name=e.name,t.label=e.label,x.push(t)});var V=[];if(a.control&&a.control.appearance&&/search\([^\)|(]+\)/i.test(a.control.appearance)){V=[],A=[];var P=[],O=!1;if(I.map(function(e){return A.push({label:e.label,value:e.name})}),i&&i.length>0){var w=[];A.map(function(e){e.value&&w.push(e.value)});var k=i,R=Array.isArray(k),q=0;for(k=R?k:k[Symbol.iterator]();;){var M;if(R){if(q>=k.length)break;M=k[q++]}else{if((q=k.next()).done)break;M=q.value}var D=M;w.includes(D)?P.push(D):O=!0}}i&&i.length>0&&O&&this.props.assignFieldValueActionCreator(this.props.fieldParentTreeName+a.name,P||[]),E.isEqual(this.props.optionList,C({},I))||this.props.assignOptionListActionCreator(this.props.fieldParentTreeName+a.name,I),V=[].concat(I)}else if(a.itemset){V=[],A=[];var _=[],H=[],j=!1;if(n&&n[a.itemset.trim()]&&E.forEach(n[a.itemset.trim()],function(t){if(a.choice_filter&&e.props.getEvaluatedExpressionSelectorForSelect(a.choice_filter,o+a.name,t)){var r=ce(t,m);A.push({label:r,value:t.name})}}),i&&i.length>0){var G=[];A.map(function(e){e.value&&G.push(e.value)});var B=i,U=Array.isArray(B),z=0;for(B=U?B:B[Symbol.iterator]();;){var W;if(U){if(z>=B.length)break;W=B[z++]}else{if((z=B.next()).done)break;W=z.value}var Y=W;G.includes(Y)?_.push(Y):j=!0}}i&&i.length>0&&j&&this.props.assignFieldValueActionCreator(this.props.fieldParentTreeName+a.name,_||[]),A&&A.map(function(e){var t={};t.name=e.value,t.label=e.label,H.push(t)}),E.isEqual(this.props.optionList,C({},H))||this.props.assignOptionListActionCreator(this.props.fieldParentTreeName+a.name,H),V=[].concat(H)}else V=[],A=[],a.children&&a.children.map(function(e){return A.push({label:e.label,value:e.name})}),E.isEqual(this.props.optionList,C({},x))||this.props.assignOptionListActionCreator(this.props.fieldParentTreeName+a.name,x),V=[].concat(x);var J=[];i&&i.length>0&&A.map(function(e){var t=i,r=Array.isArray(t),n=0;for(t=r?t:t[Symbol.iterator]();;){var a;if(r){if(n>=t.length)break;a=t[n++]}else{if((n=t.next()).done)break;a=n.value}e.value===a&&J.push(e.value)}});var $=!1;if(a.control&&a.control.appearance&&a.control.appearance.split(" ").forEach(function(e){$||"horizontal-compact"!==e||($=!0)}),"string"==typeof this.props.fieldValue){var X=i.split(" ");this.props.assignFieldValueActionCreator(o+a.name,X)}var K="";a.bind&&a.bind.calculate&&(K=this.props.getEvaluatedExpressionSelector(a.bind.calculate,o+a.name)),K&&i!==K&&this.props.assignFieldValueActionCreator(o+a.name,K);var Z=p(o+a.name);return r.createElement("div",null,r.createElement(s.Label,null,b," ",d&&r.createElement("span",{className:"requiredTextSteric"},"*")),r.createElement(s.Form,{key:"selectAll"},V.map(function(t,n){return r.createElement(s.FormGroup,{key:n,check:!0,inline:$},r.createElement(s.Label,{check:!0},r.createElement(s.Input,{key:a.name+"-"+n,type:"checkbox",name:a.name,value:t.name||[],onChange:e.onChangeHandlerCheckBox,readOnly:F,checked:J.includes(t.name)||K.includes(t.name)})," ",ce(t,m)))})),f&&Z&&r.createElement(v.FontAwesomeIcon,{icon:"exclamation-circle",className:"errorSign"}),a.hint&&r.createElement(s.Label,{className:"hintText"},S),f&&h&&r.createElement(s.Label,{className:"requiredText"},T),g&&r.createElement(s.Label,{className:"constraintText"},y))}return null!=i&&(this.props.assignFieldValueActionCreator(o+a.name,null),p(o+a.name)&&this.props.removeErrorInputIdActionCreator(o+a.name)),null!=this.props.optionList&&this.props.assignOptionListActionCreator(this.props.fieldParentTreeName+a.name,null),null},t}(r.Component),Ht=a.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Je(e,t,r)},o=rt(e);return{fieldValue:We(e,n+r.name),getEvaluatedExpressionSelector:a,getEvaluatedExpressionSelectorForSelect:function(t,r,n){return $e(e,t,n,r)},getFormSubmitStatusSelector:o,isComponentRender:he(r,n,a),isPresentInErrorSelector:function(t){return Xe(e,t)},optionList:Ye(e,n+r.name)}},{addErrorInputIdActionCreator:_e,assignFieldValueActionCreator:Re,assignOptionListActionCreator:qe,removeErrorInputIdActionCreator:He})(_t),jt=function(e){function t(){return e.apply(this,arguments)||this}return y(t,e),t.prototype.render=function(){return Ce(this.props.fieldElement)?r.createElement(Dt,Object.assign({},this.props)):r.createElement(Ht,Object.assign({},this.props))},t}(r.Component),Gt={control:function(e,t){return C({},e,{backgroundColor:"white"})},container:function(e,t){return C({},e,{backgroundColor:"white"})}},Bt=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).setOptionList=function(e){var r=[];e.map(function(e){var t={};t.name=e.name,t.label=e.label,r.push(t)}),E.isEqual(t.props.optionList,C({},r))||t.props.assignOptionListActionCreator(t.props.fieldParentTreeName+t.props.fieldElement.name,r)},t.onChangeHandler=function(e){return function(r){t.props.assignFieldValueActionCreator(t.props.fieldParentTreeName+e,r.value||"")}},t.getProcessedString=function(e){var r=(e.match(/\([^\)]+\)/i)||[""])[0];if(r.length>2){var n=(r=r.substring(1,r.length-1)).split(","),a=[].concat(n);return a=a.splice(2,a.length),t.extractAndFilterOptions(n[0],n[1]||null,a||[])}return[]},t.extractAndFilterOptions=function(e,r,n){r&&(r=(r=r.trim()).substring(1,r.length-1).trim());var a=[],o=[];if(t.props.csvList[e=e.substring(1,e.length-1)+".csv"]){var i=e.replace(/'/g,"");a=t.props.csvList[i]||[]}if(r&&"matches"===r.trim())for(var l=0,s=function(){var e=n[l].trim();e=e.substring(1,e.length-1).trim();var r=n[l+1],o=[].concat(a),i="";o.forEach(function(e){i=t.props.getEvaluatedExpressionSelectorForSelect(r,t.props.fieldParentTreeName+t.props.fieldElement.name,e)}),a=a.filter(function(t){return t[e]===i}),l+=2};l<n.length;)s();if(0!==a.length){var u="",c="";return t.props.fieldElement.children&&t.props.fieldElement.children[0]&&t.props.fieldElement.children[0].name&&t.props.fieldElement.children[0].label&&(u=ce(t.props.fieldElement.children[0],t.props.defaultLanguage),c=t.props.fieldElement.children[0].name),a.forEach(function(e){var t={};t.label=e[u].trim(),t.name=e[c].trim(),o.push(t)}),E.uniqBy(o,"name")}return[]},t}return y(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.choices,a=t.fieldElement,o=t.fieldParentTreeName,i=t.fieldValue,l=t.isComponentRender,c=t.getEvaluatedExpressionSelector,p=t.getFormSubmitStatusSelector,m=t.isPresentInErrorSelector,d=t.defaultLanguage,f=fe(a),h=p,g=f&&(!i||""===i),b=i&&""!==i&&ve(a,o,c),C=me(c,ce(a,d),o+a.name),y=me(c,de(a,d),o+a.name),S=pe(a,d);if(l){null==i&&"default"in a&&this.props.assignFieldValueActionCreator(o+a.name,a.default);var F=ge(a,o,c);!g&&!b||m(o+a.name)?g||b||!m(o+a.name)||this.props.removeErrorInputIdActionCreator(o+a.name):this.props.addErrorInputIdActionCreator(o+a.name);var I,A=[],N=[];if(a.control&&a.control.appearance){var L=a.control.appearance.toString().replace("minimal","");if(/search\([^\)|(]+\)/i.test(L)){var x=L.match(/search\([^\)|(]+\)/i)||[""];A=this.getProcessedString(x[0])}}if(a.control&&a.control.appearance&&/search\([^\)|(]+\)/i.test(a.control.appearance)?(A.map(function(e){return N.push({label:e.label,value:e.name})}),this.setOptionList(A)):a.itemset?n&&n[a.itemset.trim()]&&(E.forEach(n[a.itemset.trim()],function(t){if(a.choice_filter&&e.props.getEvaluatedExpressionSelectorForSelect(a.choice_filter,o+a.name,t)){var r=ce(t,d);N.push({label:r,value:t.name})}}),this.setOptionList(n[a.itemset.trim()])):a.children&&(a.children.map(function(e){var t=ce(e,d);N.push({label:t,value:e.name})}),this.setOptionList(a.children)),i){var V=[];N.map(function(e){e.value&&V.push(e.value)}),V.includes(i)||this.props.assignFieldValueActionCreator(this.props.fieldParentTreeName+a.name,"")}N.map(function(e){e.value===i&&(I=e)});var P="";a.bind&&a.bind.calculate&&(P=this.props.getEvaluatedExpressionSelector(a.bind.calculate,o+a.name)),P&&i!==P&&this.props.assignFieldValueActionCreator(o+a.name,P);var O=m(o+a.name);return r.createElement(s.FormGroup,null,r.createElement(s.Label,null,C," ",f&&r.createElement("span",{className:"requiredTextSteric"},"*")),r.createElement("div",{key:a.name,className:"selectOneDropDown"},r.createElement(u,{styles:Gt,isDisabled:F,multi:!1,name:a.name,options:N,value:I||P||"",onChange:this.onChangeHandler(a.name)})),h&&O&&r.createElement(v.FontAwesomeIcon,{icon:"exclamation-circle",className:"errorSign"}),a.hint&&r.createElement(s.Label,{className:"hintText"},S),h&&g&&r.createElement(s.Label,{className:"requiredText"},T),b&&r.createElement(s.Label,{className:"constraintText"},y))}return null!=i&&(this.props.assignFieldValueActionCreator(o+a.name,null),m(o+a.name)&&this.props.removeErrorInputIdActionCreator(o+a.name)),null},t}(r.Component),Ut=a.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Je(e,t,r)},o=rt(e);return{fieldValue:We(e,n+r.name),getEvaluatedExpressionSelector:a,getEvaluatedExpressionSelectorForSelect:function(t,r,n){return $e(e,t,n,r)},getFormSubmitStatusSelector:o,isComponentRender:he(r,n,a),isPresentInErrorSelector:function(t){return Xe(e,t)},optionList:Ye(e,n+r.name)}},{addErrorInputIdActionCreator:_e,assignFieldValueActionCreator:Re,assignOptionListActionCreator:qe,removeErrorInputIdActionCreator:He})(Bt),zt=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).onChangeHandlerRadio=function(e){return function(r){t.props.assignFieldValueActionCreator(t.props.fieldParentTreeName+e,r.target.value||"")}},t.getProcessedString=function(e){var r=(e.match(/\([^\)]+\)/i)||[""])[0];if(r.length>2){var n=(r=r.substring(1,r.length-1)).split(","),a=[].concat(n);return a=a.splice(2,a.length),t.extractAndFilterOptions(n[0],n[1]||null,a||[])}return[]},t.extractAndFilterOptions=function(e,r,n){r&&(r=(r=r.trim()).substring(1,r.length-1).trim());var a=[],o=[];if(t.props.csvList[e=e.substring(1,e.length-1)+".csv"]){var i=e.replace(/'/g,"");a=t.props.csvList[i]||[]}if(r&&"matches"===r.trim())for(var l=0,s=function(){var e=n[l].trim();e=e.substring(1,e.length-1).trim();var r=n[l+1],o=[].concat(a),i="";o.forEach(function(e){i=t.props.getEvaluatedExpressionSelectorForSelect(r,t.props.fieldParentTreeName+t.props.fieldElement.name,e)}),a=a.filter(function(t){return t[e]===i}),l+=2};l<n.length;)s();if(0!==a.length){var u="",c="";return t.props.fieldElement.children&&t.props.fieldElement.children[0]&&t.props.fieldElement.children[0].name&&t.props.fieldElement.children[0].label&&(u=ce(t.props.fieldElement.children[0],t.props.defaultLanguage),c=t.props.fieldElement.children[0].name),a.forEach(function(e){var t={};t.label=e[u].trim(),t.name=e[c].trim(),o.push(t)}),E.uniqBy(o,"name")}return[]},t}return y(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.choices,a=t.fieldElement,o=t.fieldParentTreeName,i=t.fieldValue,l=t.isComponentRender,u=t.getEvaluatedExpressionSelector,c=t.getFormSubmitStatusSelector,p=t.isPresentInErrorSelector,m=t.defaultLanguage,d=fe(a),f=c,h=d&&(!i||""===i),g=i&&""!==i&&ve(a,o,u),b=me(u,ce(a,m),o+a.name),y=me(u,de(a,m),o+a.name),S=pe(a,m);if(l){null==i&&"default"in a&&this.props.assignFieldValueActionCreator(o+a.name,a.default);var F=ge(a,o,u);!h&&!g||p(o+a.name)?h||g||!p(o+a.name)||this.props.removeErrorInputIdActionCreator(o+a.name):this.props.addErrorInputIdActionCreator(o+a.name);var I=[];if(a.control&&a.control.appearance&&/search\([^\)|(]+\)/i.test(a.control.appearance)){var A=a.control.appearance.match(/search\([^\)|(]+\)/i)||[""];I=this.getProcessedString(A[0])}var N=[];a.children&&a.children.map(function(e){var t={};t.name=e.name,t.label=e.label,N.push(t)});var L=[];if(a.control&&a.control.appearance&&/search\([^\)|(]+\)/i.test(a.control.appearance)){if(L=[],i){var x=[];I.map(function(e){e.name&&x.push(e.name)}),x.includes(i)||this.props.assignFieldValueActionCreator(this.props.fieldParentTreeName+a.name,"")}E.isEqual(this.props.optionList,C({},I))||this.props.assignOptionListActionCreator(this.props.fieldParentTreeName+a.name,I),L=[].concat(I)}else if(a.itemset){var V=[];if(L=[],n&&n[a.itemset.trim()]){if(E.forEach(n[a.itemset.trim()],function(t){if(a.choice_filter&&e.props.getEvaluatedExpressionSelectorForSelect(a.choice_filter,o+a.name,t)){var r=ce(t,m);V.push({label:r,name:t.name})}}),i){var P=[];V.map(function(e){e.name&&P.push(e.name)}),P.includes(i)||this.props.assignFieldValueActionCreator(this.props.fieldParentTreeName+a.name,"")}E.isEqual(this.props.optionList,C({},V))||this.props.assignOptionListActionCreator(this.props.fieldParentTreeName+a.name,V),L=[].concat(V)}}else L=[],E.isEqual(this.props.optionList,C({},N))||this.props.assignOptionListActionCreator(this.props.fieldParentTreeName+a.name,N),L=[].concat(N);var O=!1;a.control&&a.control.appearance&&a.control.appearance.split(" ").forEach(function(e){O||"horizontal-compact"!==e||(O=!0)});var w="";a.bind&&a.bind.calculate&&(w=this.props.getEvaluatedExpressionSelector(a.bind.calculate,o+a.name)),w&&i!==w&&this.props.assignFieldValueActionCreator(o+a.name,w);var k=p(o+a.name);return r.createElement("div",null,r.createElement(s.Label,null,b," ",d&&r.createElement("span",{className:"requiredTextSteric"},"*")),r.createElement(s.Form,{key:"selectOne"},L.map(function(t,n){return r.createElement(s.FormGroup,{key:n,check:!0,inline:O},r.createElement(s.Label,{check:!0},r.createElement(s.Input,{key:a.name+"-"+n,type:"radio",name:a.name,value:t.name,onChange:e.onChangeHandlerRadio(a.name),disabled:F,checked:t.name===i||t.name===w})," ",ce(t,m)))})),f&&k&&r.createElement(v.FontAwesomeIcon,{icon:"exclamation-circle",className:"errorSign"}),a.hint&&r.createElement(s.Label,{className:"hintText"},S),f&&h&&r.createElement(s.Label,{className:"requiredText"},T),g&&r.createElement(s.Label,{className:"constraintText"},y))}return null!=i&&(this.props.assignFieldValueActionCreator(o+a.name,null),p(o+a.name)&&this.props.removeErrorInputIdActionCreator(o+a.name)),null},t}(r.Component),Wt=a.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Je(e,t,r)},o=rt(e);return{fieldValue:We(e,n+r.name),getEvaluatedExpressionSelector:a,getEvaluatedExpressionSelectorForSelect:function(t,r,n){return $e(e,t,n,r)},getFormSubmitStatusSelector:o,isComponentRender:he(r,n,a),isPresentInErrorSelector:function(t){return Xe(e,t)},optionList:Ye(e,n+r.name)}},{addErrorInputIdActionCreator:_e,assignFieldValueActionCreator:Re,assignOptionListActionCreator:qe,removeErrorInputIdActionCreator:He})(zt),Yt=function(e){function t(){return e.apply(this,arguments)||this}return y(t,e),t.prototype.render=function(){return Ce(this.props.fieldElement)?r.createElement(Ut,Object.assign({},this.props)):r.createElement(Wt,Object.assign({},this.props))},t}(r.Component),Jt=function(e){function t(t){var r;return(r=e.call(this,t)||this).onChangeHandler=function(e){r.setState(C({},r.state,{fieldValue:e.currentTarget.value||"",isFocused:!0}))},r.onBlurHandler=function(e){r.setState(C({},r.state,{fieldValue:e.currentTarget.value||"",isFocused:!1})),r.props.assignFieldValueActionCreator(r.props.fieldParentTreeName+e.currentTarget.name,e.currentTarget.value||"")},r.state={fieldValue:"",isFocused:!1},r}return y(t,e),t.prototype.render=function(){var e=this.props,t=e.fieldElement,n=e.fieldParentTreeName,a=e.fieldValue,o=e.isComponentRender,i=e.getEvaluatedExpressionSelector,l=e.getFormSubmitStatusSelector,u=e.isPresentInErrorSelector,c=e.defaultLanguage,p=fe(t),m=l,d=p&&(!a||""===a),f=a&&""!==a&&ve(t,n,i),h=me(i,ce(t,c),n+t.name),g=me(i,de(t,c),n+t.name),E=pe(t,c);if(o){null==a&&"default"in t&&this.props.assignFieldValueActionCreator(n+t.name,t.default);var b=ge(t,n,i);!d&&!f||u(n+t.name)?d||f||!u(n+t.name)||this.props.removeErrorInputIdActionCreator(n+t.name):this.props.addErrorInputIdActionCreator(n+t.name);var y,S=u(n+t.name);return t.bind&&t.bind.calculate?((y=this.props.getEvaluatedExpressionSelector(t.bind.calculate,n+t.name))&&y!==a&&this.props.assignFieldValueActionCreator(n+t.name,y),r.createElement(s.FormGroup,null,r.createElement(s.Label,null,h," ",p&&r.createElement("span",{className:"requiredTextSteric"},"*")),r.createElement(s.Input,{type:"text",name:t.name,onChange:this.onChangeHandler,onBlur:this.onBlurHandler,value:this.state.isFocused?this.state.fieldValue||"":y||"",readOnly:b}),m&&S&&r.createElement(v.FontAwesomeIcon,{icon:"exclamation-circle",className:"errorSign"}),t.hint&&r.createElement(s.Label,{className:"hintText"},E),m&&d&&r.createElement(s.Label,{className:"requiredText"},T),f&&r.createElement(s.Label,{className:"constraintText"},g))):r.createElement(s.FormGroup,null,r.createElement(s.Label,null,h," ",p&&r.createElement("span",{className:"requiredTextSteric"},"*")),r.createElement(s.Input,{type:"text",name:t.name,onChange:this.onChangeHandler,onBlur:this.onBlurHandler,value:this.state.isFocused?this.state.fieldValue||"":a||"",readOnly:b}),m&&S&&r.createElement(v.FontAwesomeIcon,{icon:"exclamation-circle",className:"errorSign"}),t.hint&&r.createElement(s.Label,{className:"hintText"},E),m&&d&&r.createElement(s.Label,{className:"requiredText"},T),f&&r.createElement(s.Label,{className:"constraintText"},g))}return this.state.isFocused&&this.setState(C({},this.state,{isFocused:!1})),null!=a&&(this.props.assignFieldValueActionCreator(n+t.name,null),u(n+t.name)&&this.props.removeErrorInputIdActionCreator(n+t.name)),null},t}(r.Component),$t=a.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Je(e,t,r)},o=rt(e);return{fieldValue:We(e,n+r.name),getEvaluatedExpressionSelector:a,getFormSubmitStatusSelector:o,isComponentRender:he(r,n,a),isPresentInErrorSelector:function(t){return Xe(e,t)}}},{addErrorInputIdActionCreator:_e,assignFieldValueActionCreator:Re,removeErrorInputIdActionCreator:He})(Jt),Xt=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).onChangeHandler=function(e){if(console.log("time event: ",e.currentTarget.value),""!=e.currentTarget.value){var r=e.currentTarget.value.split(":")[0],n=e.currentTarget.value.split(":")[1],a=f(t.props.fieldValue).toDate();a.setHours(parseInt(r)),a.setMinutes(parseInt(n)),t.props.assignFieldValueActionCreator(t.props.fieldParentTreeName+e.currentTarget.name,f(a).format())}},t}return y(t,e),t.prototype.render=function(){var e=this.props,t=e.fieldElement,n=e.fieldParentTreeName,a=e.fieldValue,o=e.isComponentRender,i=e.getEvaluatedExpressionSelector,l=e.getFormSubmitStatusSelector,u=e.isPresentInErrorSelector,c=e.defaultLanguage,p=fe(t),m=l,d=p&&(!a||""===a),h=a&&""!==a&&ve(t,n,i),g=me(i,ce(t,c),n+t.name),E=me(i,de(t,c),n+t.name),b=pe(t,c);if(o){null==a&&"default"in t&&this.props.assignFieldValueActionCreator(n+t.name,t.default);var C=ge(t,n,i);!d&&!h||u(n+t.name)?d||h||!u(n+t.name)||this.props.removeErrorInputIdActionCreator(n+t.name):this.props.addErrorInputIdActionCreator(n+t.name);var y=u(n+t.name),S="";t.bind&&t.bind.calculate&&(S=this.props.getEvaluatedExpressionSelector(t.bind.calculate,n+t.name)),void 0!==a&&""!=a||!S||this.props.assignFieldValueActionCreator(n+t.name,S),console.log("time field value: ",a,S);var F=function(e){return void 0===e?"":f(e).format("HH:mm")};return r.createElement(s.FormGroup,null,r.createElement(s.Label,null,g," ",p&&r.createElement("span",{className:"requiredTextSteric"},"*")),r.createElement(s.Input,{type:"time",name:t.name,onChange:this.onChangeHandler,value:F(a)||F(S)||"",readOnly:C}),m&&y&&r.createElement(v.FontAwesomeIcon,{icon:"exclamation-circle",className:"errorSign"}),t.hint&&r.createElement(s.Label,{className:"hintText"},b),m&&d&&r.createElement(s.Label,{className:"requiredText"},T),h&&r.createElement(s.Label,{className:"constraintText"},E))}return null!=a&&(this.props.assignFieldValueActionCreator(n+t.name,null),u(n+t.name)&&this.props.removeErrorInputIdActionCreator(n+t.name)),null},t}(r.Component),Kt=a.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Je(e,t,r)},o=rt(e);return{fieldValue:We(e,n+r.name),getEvaluatedExpressionSelector:a,getFormSubmitStatusSelector:o,isComponentRender:he(r,n,a),isPresentInErrorSelector:function(t){return Xe(e,t)}}},{addErrorInputIdActionCreator:_e,assignFieldValueActionCreator:Re,removeErrorInputIdActionCreator:He})(Xt),Zt=function(e){function t(){return e.apply(this,arguments)||this}y(t,e);var n=t.prototype;return n.render=function(){var e=this.props;return this.typeEvaluator(e.choices,e.csvList,e.fieldElement,e.fieldParentTreeName,e.defaultLanguage)},n.typeEvaluator=function(e,t,n,a,o){switch(n.type){case"text":return r.createElement($t,{fieldElement:n,fieldParentTreeName:a,defaultLanguage:o});case"date":return r.createElement(vt,{fieldElement:n,fieldParentTreeName:a,defaultLanguage:o});case"time":return r.createElement(Kt,{fieldElement:n,fieldParentTreeName:a,defaultLanguage:o});case"dateTime":return r.createElement(bt,{fieldElement:n,fieldParentTreeName:a,defaultLanguage:o});case"integer":return r.createElement(wt,{fieldElement:n,fieldParentTreeName:a,defaultLanguage:o});case"decimal":return r.createElement(yt,{fieldElement:n,fieldParentTreeName:a,defaultLanguage:o});case"note":return r.createElement(Rt,{fieldElement:n,fieldParentTreeName:a,defaultLanguage:o});case"calculate":return r.createElement(ht,{fieldElement:n,fieldParentTreeName:a,defaultLanguage:o});case"select one":return r.createElement(Yt,{choices:e,fieldElement:n,fieldParentTreeName:a,defaultLanguage:o,csvList:t});case"select all that apply":return r.createElement(jt,{choices:e,fieldElement:n,fieldParentTreeName:a,defaultLanguage:o,csvList:t});case"photo":case"file":return r.createElement(At,{fieldElement:n,fieldParentTreeName:a,defaultLanguage:o});case"gps":return r.createElement(Nt,{fieldElement:n,fieldParentTreeName:a,defaultLanguage:o});case"audio":return r.createElement(Pt,{fieldElement:n,fieldParentTreeName:a,defaultLanguage:o});default:return r.createElement("div",{style:{display:"none"}},"Other ",n.type," ",n.name)}},t}(r.Component),Qt=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).getAppearanceValue=function(e,r,n){var a=he(e,r,t.props.getEvaluatedExpressionSelector);if(!a)return 0;if(a&&n&&e.control&&e.control.appearance&&/^w(\d+)\b/i.test(e.control.appearance)){var o=e.control.appearance.match(/^w(\d+)\b/i)[0].replace("w","");return isNaN(o)?12:parseInt(o,10)}return 12},t}y(t,e);var n=t.prototype;return n.render=function(){var e=this,t=this.props,n=t.choices,a=t.csvList,o=t.fieldParentTreeName,i=t.defaultLanguage,l=t.isAppearanceApplicable;return r.createElement(s.Row,{className:"groupTypeEvaluatorRow"},t.fieldElements.map(function(t){var u=e.getAppearanceValue(t,o,l);return r.createElement(s.Col,{key:"group_"+t.name,className:0===u||"calculate"===t.type?"groupTypeEvaluator hideDiv":"groupTypeEvaluator",md:u},e.typeEvaluator(n,a,t,o,i))}))},n.typeEvaluator=function(e,t,n,a,o){switch(n.type){case"group":return r.createElement("div",null,r.createElement(lt,{choices:e,fieldElement:n,fieldParentTreeName:a,defaultLanguage:o,csvList:t}));case"repeat":return r.createElement("div",null,r.createElement(dt,{choices:e,fieldElement:n,fieldParentTreeName:a,defaultLanguage:o,csvList:t}));default:return r.createElement(Zt,{choices:e,fieldElement:n,fieldParentTreeName:a,defaultLanguage:o,csvList:t})}},t}(r.Component),er=a.connect(function(e){return{getEvaluatedExpressionSelector:function(t,r){return Je(e,t,r)}}})(Qt);i.library.add(l.faPlusCircle,l.faMinusCircle,l.faExclamationCircle);var tr=function(e){function t(t){var r;return(r=e.call(this,t)||this).handleSelect=function(e){r.setState({defaultLanguage:e}),r.props.setUserLanguageAction(r.props.defaultLanguage)},r.handleClick=function(e){var t=r.props,n=t.handleSubmit,a=t.userInputObj,o=t.mediaList;t.isNoErrors?(r.setState({isSubmissionError:!1}),n(a,o)):(n("Field Violated",o),r.setState({isSubmissionError:!0}),r.props.setFormSubmitStatusAction(!0),window.scrollTo(0,0))},r.toggleStateValue=function(){r.setState({isSubmissionError:!1})},r}y(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.userInputJson,r=e.userInputObj,n=e.csvList,a=e.csvObj;this.props.assignFieldValueActionCreator("start",t.start||new Date),this.props.resetStoreActionCreator(),this.props.setThemeColor(this.props.themeColor),t&&t!==r&&this.props.setUserInputAction(t),n&&n!==a&&this.props.setCSVAction(n),this.props.setUserLanguageAction(this.props.defaultLanguage),this.setState({defaultLanguage:this.props.defaultLanguage,isSubmissionError:!1})},n.componentWillUnmount=function(){this.props.assignFieldValueActionCreator("end",this.props.userInputJson.end||new Date)},n.render=function(){var e=this.props,t=e.languageOptions,n=e.themeColor,a=(this.state||this.props).defaultLanguage,o={choices:e.choices,csvList:e.csvList,defaultLanguage:a,fieldElements:e.fieldElements,fieldParentTreeName:"",isAppearanceApplicable:!1,languageOptions:t};return r.createElement(s.Container,{className:"form-container"},r.createElement(s.Row,{className:"formTitle",style:{borderBottom:"3px solid "+n,borderTop:"3px solid "+n}},r.createElement(s.Col,null,r.createElement("h3",{className:"headerText",style:{color:(n||"#649a6a")+" "}},e.formTitle)),r.createElement(A,{languages:t,onChangeSelect:this.handleSelect,defaultLanguage:a})),this.state&&this.state.isSubmissionError&&r.createElement(I,{color:"danger",isOpen:this.state.isSubmissionError,handleToggle:this.toggleStateValue,headerText:"Oh snap! You got an error!",bodyText:"Please make sure the required fields are not missing and there are no errors"}),r.createElement(s.Row,null,r.createElement(s.Col,{style:{padding:0}},r.createElement(er,Object.assign({},o)),r.createElement(s.Row,{className:"welcome-box",style:{padding:10}},r.createElement(s.Col,null,r.createElement(s.Button,{className:"btn btn-success",onClick:this.handleClick},"Submit"))))))},t}(r.Component),rr=a.connect(function(e){return{isNoErrors:Qe(e),mediaList:at(e),userInputObj:et(e),csvObj:tt(e)}},{resetStoreActionCreator:function(){return{type:Ne}},setFormSubmitStatusAction:function(e){return{isFormSubmitted:e,type:ke}},setUserInputAction:function(e){return{type:Oe,userInputObj:e}},setUserLanguageAction:function(e){return{type:"odk/reducer/form/SET_LANGUAGE",language:e}},setCSVAction:function(e){return{type:we,csvObj:e}},setThemeColor:function(e){return{color:e,type:ye}},assignFieldValueActionCreator:Re})(tr);exports.default=function(e){function n(){return e.apply(this,arguments)||this}return y(n,e),n.prototype.render=function(){var e=this.props,n=e.formDefinitionJson;return r.createElement(a.Provider,{store:N},r.createElement(t.MuiThemeProvider,{theme:F},r.createElement(rr,Object.assign({},{choices:n.choices||{},csvList:e.csvList,defaultLanguage:e.defaultLanguage,fieldElements:n.children,formTitle:n.title,handleSubmit:e.handleSubmit,languageOptions:e.languageOptions,userInputJson:e.userInputJson,themeColor:n.theme_color}))))},n}(r.Component);
//# sourceMappingURL=odkformrenderer.cjs.production.min.js.map
