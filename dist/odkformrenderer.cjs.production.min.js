"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}require("bootstrap/dist/css/bootstrap.min.css");var t=require("react"),r=e(t),n=require("react-redux"),a=require("@fortawesome/fontawesome-svg-core"),i=require("@fortawesome/free-solid-svg-icons"),o=require("reactstrap"),l=e(require("react-select")),s=e(require("@material-ui/core/ExpansionPanel")),u=e(require("@material-ui/core/ExpansionPanelDetails")),c=e(require("@material-ui/core/ExpansionPanelSummary")),p=e(require("@material-ui/core/Typography")),m=e(require("@material-ui/icons/ExpandMore")),d=e(require("seamless-immutable")),f=require("@fortawesome/react-fontawesome"),h=e(require("lodash")),v=e(require("react-datepicker"));require("react-datepicker/dist/react-datepicker.css");var g=require("redux"),E=require("redux-devtools-extension");function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function b(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var y,S=function(e){function r(){return e.apply(this,arguments)||this}return b(r,e),r.prototype.render=function(){var e=this.props,r=e.bodyText;return t.createElement(o.Alert,{color:e.color,isOpen:e.isOpen,toggle:e.handleToggle},t.createElement("h4",{className:"alert-heading"},e.headerText),t.createElement("p",null,r))},r}(t.Component),I=function(e){function r(){var t;return(t=e.apply(this,arguments)||this).onChangeHandler=function(e){t.props.onChangeSelect(e.value)},t}return b(r,e),r.prototype.render=function(){var e,r=this,n=[];return[].concat(this.props.languages).map(function(e){n.push({label:e.label,value:e.value})}),n.map(function(t){t.value===r.props.defaultLanguage&&(e=t)}),t.createElement(l,{multi:!1,options:n,className:"col-md-2 dropDown",placeholder:"Language",onChange:this.onChangeHandler,value:e||""})},r}(t.Component),A="This field is required",F="",T={},N={};function L(e,t,r,n){return t===r[n]?[1,{type:e,value:t}]:[0,null]}var x=[function(e,t){return/\s/.test(e[t])?[1,null]:[0,null]},function(e,t){return L("paren","(",e,t)},function(e,t){return L("paren",")",e,t)},function(e,t){return"i"!==e[t]||!e[t+1]||"f"!==e[t+1]||void 0!==e[t+2]&&/[a-z]i/.test(e[t+2])?[0,null]:[2,{type:"if",value:"if"}]},function(e,t){return"o"===e[t]&&e[t+1]&&"r"===e[t+1]&&(void 0===e[t+2]||/[0-9\s]/.test(e[t+2]))?[2,{type:"or",value:"or"}]:[0,null]},function(e,t){return"a"===e[t]&&e[t+1]&&"n"===e[t+1]&&e[t+2]&&"d"===e[t+2]&&(void 0===e[t+3]||/[0-9\s]/.test(e[t+3]))?[3,{type:"and",value:"and"}]:[0,null]},function(e,t){if(("#"===e[t]||"$"===e[t])&&e[t+1]&&"{"===e[t+1]){for(var r="",n=1,a=e[t+(n+=1)];"}"!==a;){if(void 0===a)throw new TypeError("unterminated string ");r+=a,a=e[t+(n+=1)]}return[n+1,{type:"variable",value:r}]}return[0,null]},function(e,t){if('"'===e[t]||"'"===e[t]){for(var r=e[t],n="",a=0,i=e[t+(a+=1)];i!==r;){if(void 0===i)throw new TypeError("unterminated string ");n+=i,i=e[t+(a+=1)]}return[a+1,{type:"string",value:n}]}return[0,null]},function(e,t){if(/[a-z_]/i.test(e[t])){for(var r="",n=0,a=e[t+n];a&&/[:a-z0-9_-]/i.test(a);){if(void 0===a)throw new TypeError("unterminated string ");r+=a,a=e[t+(n+=1)]}for(;a&&/\s/.test(a);)a=e[t+(n+=1)];if("not"==r)return[0,null];if(a&&"("===a)return[n,{type:"function",value:r}]}return[0,null]},function(e,t){return L("equal","=",e,t)},function(e,t){return L("plus","+",e,t)},function(e,t){return L("minus","-",e,t)},function(e,t){return L("multiply","*",e,t)},function(e,t){return L("divide","/",e,t)},function(e,t){return"d"===e[t]&&e[t+1]&&"i"===e[t+1]&&e[t+2]&&"v"===e[t+2]&&(void 0===e[t+3]||/[0-9\s]/.test(e[t+3]))?[3,{type:"divide",value:"/"}]:[0,null]},function(e,t){return L("lessThan","<",e,t)},function(e,t){return L("greaterThan",">",e,t)},function(e,t){return"!"==e[t]?L("not","!",e,t):"n"==e[t]&&e[t+1]&&"o"==e[t+1]&&e[t+2]&&"t"==e[t+2]?[3,{type:"not",value:"!"}]:[0,null]},function(e,t){return L("brac","[",e,t)},function(e,t){return L("brac","]",e,t)},function(e,t){return L("dot",".",e,t)},function(e,t){return L("comma",",",e,t)},function(e,t){if(/[0-9]/i.test(e[t])){for(var r="",n=0,a=e[t+n];/[0-9]/i.test(a);){if(void 0===a)throw new TypeError("unterminated string ");r+=a,a=e[t+(n+=1)]}if("."!==a)return[n,{type:"number",value:r}]}return[0,null]},function(e,t){if(/[0-9.]/i.test(e[t])){for(var r="",n=0,a=e[t+n];/[0-9]/i.test(a);){if(void 0===a)throw new TypeError("unterminated string ");r+=a,a=e[t+(n+=1)]}if("."===a&&(r+=a,/[0-9]/i.test(a=e[t+(n+=1)]))){for(;/[0-9]/i.test(a);){if(void 0===a)throw new TypeError("unterminated string ");r+=a,a=e[t+(n+=1)]}return[n,{type:"decimal",value:r}]}}return[0,null]},function(e,t){return function(e,t,r,n){var a=r[n],i=0;if(t.test(a)){for(var o="";a&&t.test(a);)o+=a,a=r[n+(i+=1)];return[i,{type:"name",value:o}]}return[0,null]}(0,/[a-z_]/i,e,t)}];function V(e,t,r){if("selected"===e){var n=!1;return Array.isArray(t[0])?(t[0].forEach(function(e){n=n||e==t[1]}),[!0,n]):[!0,t[0]==t[1]]}return[!1,null]}function P(e,t,r){if("today"==e){var n=new Date;return n.setHours(0,0,0,0),[!0,n]}return[!1,null]}function O(e,t,r){if("round"==e&&t[0]&&t[1]){if("number"==typeof t[0]&&"number"==typeof t[1])return[!0,t[0].toFixed(t[1])];if("string"==typeof t[0]&&"number"==typeof t[1])return[!0,parseFloat(t[0]).toFixed(t[1])]}return[!1,null]}function w(e,t,r){return"regex"==e?[!0,RegExp(t[1]).test(t[0])]:[!1,null]}function q(e,t,r){return"count-selected"==e?t[0]&&Array.isArray(t[0])?[!0,t[0].length]:t[0]&&"object"!=typeof t[0]?[!0,1]:[!0,0]:[!1,null]}function R(e,t,r){return"int"==e&&"string"==typeof t[0]?[!0,parseInt(t[0],10)]:[!1,null]}function k(e,t,r){return"coalesce"==e?t[0]||0===t[0]?[!0,t[0]]:[!0,t[1]]:[!1,null]}function _(e,t,r){if("position"==e&&F){var n=F.split("/");if(n.length>2)return[!0,parseInt(n[n.length-2],10)+1]}return[!1,null]}function H(e,t,r){if("sum"==e){var n=null;return r&&r.length>0&&r[0]&&r[0].length>0&&"variable"===r[0][0].type&&(n=function e(t,r,n){var a;if(Array.isArray(r))for(a=0;a<r.length;a+=1)t=e(t,r[a],n);else if("object"==typeof r)for(var i in r)"object"==typeof r[i]?t=e(t,r[i],n):i===n&&("string"==typeof r[i]&&(t+=parseFloat(r[i])),"number"==typeof r[i]&&(t+=r[i]));return t}(0,N,r[0][0].value)),[!0,n]}return[!1,null]}function G(e,t,r){if("concat"==e&&t&&t.length>0){for(var n="",a=0;a<t.length;a+=1){if(null==t[a])return[!1,null];n+=t[a]}return[!0,n]}return[!1,null]}function j(e,t,r){return"substr"==e&&t&&t.length>0&&t[0]&&null!==t[1]?null!==t[2]&&t[2]<t[0].length?[!0,t[0].substring(t[1],t[2])]:[!0,t[0].substring(t[1])]:[!1,null]}function M(e,t,r){for(var n in r){var a=n.split("/");if(a[a.length-1]===e)return r[n];"object"==typeof r[n]&&null==t&&(t=M(e,t,r[n]))}return t}function D(e){var t,r=F.split("/"),n=N,a=null;a=M(e,a,n);var i="";for(t=0;t<r.length-1;)if("repeat"==r[t]){t+=1;var o=parseInt(r[t+1],10);a=M(e,a,n[i+r[t]][o]),t+=2}else i=i+r[t+1]+"/",t+=2;return a}function B(){var e,t=F.split("/"),r="",n=[];for(e=0;e<t.length-1;)"repeat"==t[e]?(n.push(r+t[e+=1]),n.push(parseInt(t[e+1],10)),r=r+t[e]+"/",e+=2):(r=r+t[e+1]+"/",e+=2);return n.push(r+t[t.length-1]),N.getIn(n)}function U(e,t,r){return"number"===t[r].type?[1,parseInt(t[r].value,10)]:"string"===t[r].type?[1,t[r].value]:"decimal"===t[r].type?[1,parseFloat(t[r].value)]:"variable"===t[r].type?[1,D(t[r].value)]:"name"===t[r].type?"true"===t[r].value.toLowerCase()?[1,!0]:"false"===t[r].value.toLowerCase()?[1,!1]:T&&t[r].value in T?[1,T[t[r].value]]:[1,null]:"dot"===t[r].type?[1,B()]:[0,null]}function z(e,t,r){var n=[V,q,P,w,R,k,_,H,G,j,O];if("function"===t[r].type){var a=t[r].value,i=[],o=[],l=1;if("paren"===t[r+l].type&&"("===t[r+l].value){var s=[];s.push(1),l+=1;for(var u=[];t[r+l]&&s.length;){if(u.push(t[r+l]),"paren"===t[r+l].type&&")"===t[r+l].value&&s.pop(),"paren"===t[r+l].type&&"("===t[r+l].value&&s.push(1),"comma"===t[r+l].type&&1===s.length){u.pop();var c=X(null,u,0);i.push(c),o.push(u),u=[]}l+=1}if("paren"===t[r+(l-=1)].type&&")"===t[r+l].value){u.pop();var p=X(null,u,0);i.push(p),o.push(u);var m=!1,d=null;if(n.forEach(function(e){if(!m){var t=e(a,i,o);m=t[0],d=t[1]}}),m)return[l+1,d]}}}return[0,null]}function W(e,t,r){if("and"===t[r].type&&null!=e){var n=[],a=1,i=null;if("paren"===t[r+a].type&&"("===t[r+a].value){var o=J(null,t,r+a);i=o[1],a+=o[0]}else{for(var l=["and","or"];t[r+a]&&-1===l.indexOf(t[r+a].type);)n.push(t[r+a]),a+=1;n.length&&(i=X(null,n,0))}if(null!=i){if(i=e&&i,t[r+a]&&"and"===t[r+a].type){var s=W(i,t,r+a);i=s[1],a+=s[0]}return[a,i]}}return[0,null]}function J(e,t,r){if("paren"===t[r].type&&"("===t[r].value){var n=[];n.push(1);for(var a=1,i=[];t[r+a]&&n.length;)i.push(t[r+a]),"paren"===t[r+a].type&&")"===t[r+a].value&&n.pop(),"paren"===t[r+a].type&&"("===t[r+a].value&&n.push(1),a+=1;if("paren"===t[r+(a-=1)].type&&")"===t[r+a].value)return i.pop(),[a+1,X(null,i,0)]}return[0,null]}function $(e,t,r){if(null!=e&&"divide"===t[r].type&&r<t.length&&-1!==["number","decimal","minus","paren","variable","function"].indexOf(t[r+1].type)){var n=!1,a=null;if([U,K,J,z].forEach(function(i){if(!n){var o,l;if(i===K){var s=i(null,t,r+1);o=s[0],l=s[1]}else{var u=i(e,t,r+1);o=u[0],l=u[1]}0!==o&&(n=!0,r+=o+=1,a=o);var c,p=!1;[$,Y].forEach(function(e){if(!p&&t[r]){var n=e(l,t,r);c=n[1],a+=o=n[0],0!==o&&(p=!0,l=c)}}),null!=l&&(e/=l)}}),n)return[a,e]}return[0,null]}function Y(e,t,r){if(null!=e&&"multiply"===t[r].type&&r<t.length&&-1!==["number","decimal","minus","paren","variable","function"].indexOf(t[r+1].type)){var n=!1,a=null;if([U,K,J,z].forEach(function(i){if(!n){var o,l;if(i===K){var s=i(null,t,r+1);o=s[0],l=s[1]}else{var u=i(e,t,r+1);o=u[0],l=u[1]}0!==o&&(n=!0,r+=o+=1,a=o);var c,p=!1;[$,Y].forEach(function(e){if(!p&&t[r]){var n=e(l,t,r);c=n[1],a+=o=n[0],0!==o&&(p=!0,l=c)}}),null!=l&&(e*=l)}}),n)return[a,e]}return[0,null]}function K(e,t,r){if("minus"===t[r].type&&r<t.length&&-1!==["number","decimal","paren","variable","function"].indexOf(t[r+1].type)){var n=!1,a=null;if([U,J,z].forEach(function(i){if(!n){var o=i(e,t,r+1),l=o[0],s=o[1];if(0!==l){n=!0,r+=l+=1,a=l;var u,c=!1;[$,Y].forEach(function(e){if(!c&&t[r]){var n=e(s,t,r);u=n[1],a+=l=n[0],0!==l&&(c=!0,s=u)}})}s?e?"[object Date]"===Object.prototype.toString.call(s)&&"[object Date]"===Object.prototype.toString.call(e)?isNaN(e.getTime())||isNaN(s.getTime())?e=NaN:(e-=s,e=Math.ceil(e/864e5)):"[object Date]"===Object.prototype.toString.call(s)||"[object Date]"===Object.prototype.toString.call(e)?e=NaN:""===s||""===e?e=NaN:e-=s:e="[object Date]"===Object.prototype.toString.call(s)?NaN:-s:e=NaN}}),n)return""===e&&(e=NaN),[a,e]}return[0,null]}var Q=[function(e,t,r){if("if"===t[r].type){var n=[],a=1;if("paren"===t[r+a].type&&"("===t[r+a].value){var i=[];i.push(1),a+=1;for(var o=[];t[r+a]&&i.length;){if(o.push(t[r+a]),"paren"===t[r+a].type&&")"===t[r+a].value&&i.pop(),"paren"===t[r+a].type&&"("===t[r+a].value&&i.push(1),"comma"===t[r+a].type&&1===i.length){o.pop();var l=X(null,o,0);n.push(l),o=[]}a+=1}if("paren"===t[r+(a-=1)].type&&")"===t[r+a].value){o.pop();var s,u=X(null,o,0);if(n.push(u),n.length%2!=0){var c;for(c=0;c<n.length-1;c+=2)if(n[c])return[a+1,n[c+1]];return[a+1,n[n.length-1]]}for(s=0;s<n.length;s+=2)if(n[s])return[a+1,n[s+1]]}}}return[0,null]},J,U,$,Y,function(e,t,r){if(null!=e&&"plus"===t[r].type&&r<t.length&&-1!==["number","decimal","string","minus","paren","variable","function"].indexOf(t[r+1].type)){var n=!1,a=null;if([U,K,J,z].forEach(function(i){if(!n){var o,l;if(i===K){var s=i(null,t,r+1);o=s[0],l=s[1]}else{var u=i(e,t,r+1);o=u[0],l=u[1]}if(0!==o){n=!0,r+=o+=1,a=o;var c,p=!1;[$,Y].forEach(function(e){if(!p&&t[r]){var n=e(l,t,r);c=n[1],a+=o=n[0],0!==o&&(p=!0,l=c)}})}null!=l&&(e+=l)}}),n)return[a,e]}return[0,null]},K,function(e,t,r){if("lessThan"===t[r].type&&null!=e){var n=!1,a=[],i=1;"equal"===t[r+i].type&&(i+=1,n=!0);for(var o,l=["and","or"];t[r+i]&&-1===l.indexOf(t[r+i].type);)a.push(t[r+i]),i+=1;if(a.length)return o=X(null,a,0),n?[i,e<=o]:[i,e<o]}return[0,null]},function(e,t,r){if("greaterThan"===t[r].type&&null!=e){var n=!1,a=[],i=1;"equal"===t[r+i].type&&(i+=1,n=!0);for(var o,l=["and","or"];t[r+i]&&-1===l.indexOf(t[r+i].type);)a.push(t[r+i]),i+=1;if(a.length)return o=X(null,a,0),n?[i,e>=o]:[i,e>o]}return[0,null]},function(e,t,r){if("equal"===t[r].type&&null!=e){for(var n=[],a=1,i=["and","or"];t[r+a]&&-1===i.indexOf(t[r+a].type);)n.push(t[r+a]),a+=1;if(n.length)return[a,e==X(null,n,0)]}return[0,null]},W,function(e,t,r){if("or"===t[r].type&&null!=e){var n=[],a=1,i=null;if("paren"===t[r+a].type&&"("===t[r+a].value){var o=J(0,t,r+a);i=o[1],a+=o[0]}else{for(var l=["and","or"];t[r+a]&&-1===l.indexOf(t[r+a].type);)n.push(t[r+a]),a+=1;n.length&&(i=X(null,n,0))}if(null!=i){if(t[r+a]&&"and"===t[r+a].type){var s=W(i,t,r+a);i=s[1],a+=s[0]}return[a,e||i]}}return[0,null]},function(e,t,r){if("not"===t[r].type){var n,a=1;if("equal"===t[r+a].type&&null!=e){n=[],a+=1;for(var i,o=["and","or"];t[r+a]&&-1===o.indexOf(t[r+a].type);)n.push(t[r+a]),a+=1;if(n.length)return i=X(null,n,0),[a,e!=i]}else{var l,s,u=!1;if([U,K,J,z].forEach(function(n){if(!u){if(n===K){var i=n(null,t,r+1);l=i[0],s=i[1]}else{var o=n(e,t,r+1);l=o[0],s=o[1]}0!==l&&(u=!0,a+=l)}}),u)return[a,!s]}}return[0,null]},z];function X(e,t,r){for(var n=r,a=e,i=function(){var e=!1;if(Q.forEach(function(r){if(!e){var i=r(a,t,n),o=i[0],l=i[1];0!==o&&(e=!0,n+=o),null!=l&&(a=l)}}),!e)return console.log("syntax error"),console.log(y),{v:null}};n<t.length;){var o=i();if("object"==typeof o)return o.v}return a}function Z(e,t,r,n){return t||(t={}),F=n,y=e,N=t,T=r,X(null,function(e){for(var t=0,r=[],n=function(){var n=!1;if(x.forEach(function(a){if(!n){var i=a(e,t),o=i[0],l=i[1];0!==o&&(n=!0,t+=o),l&&r.push(l)}}),!n)throw new TypeError("I dont know what this character is: "+e[t])};t<e.length;)n();return console.log(r),r}(e),0)}function ee(e,t){return"string"==typeof e?e||"":e[t]||""}function te(e,t){return e.label?ee(e.label,t):""}function re(e,t){return e.hint?ee(e.hint,t):""}function ne(e,t,r){if(null==t)return null;var n=t.match(/\[(.*?)\]/g);if(n)n.forEach(function(n){n=n.substring(1,n.length-1);var a=e(n,r);t=t.replace("["+n+"]",null!=a&&void 0!==a?a:"")});else{var a=t.match(/\${(.*[^}])[\}?]$/g);a&&a.forEach(function(n){var a=e(n,r);t=t.replace(n,null!=a&&void 0!==a?a:"")})}return t}function ae(e,t){return e.bind&&e.bind["jr:constraintMsg"]?ee(e.bind["jr:constraintMsg"],t):""}function ie(e){var t,r=!1;return e.bind&&e.bind.required&&"string"==typeof e.bind.required&&("yes"===(t=e.bind.required).toLowerCase()||"1"===t||"true"===t.toLowerCase())&&(r=!0),r}function oe(e,t,r){return!(e&&e.bind&&e.bind.relevant&&!r(e.bind.relevant,t+e.name))}function le(e,t,r){return!!(e&&e.bind&&e.bind.readonly)&&!!r(e.bind.readonly,t+e.name)}function se(e,t,r){return!!(e&&e.bind&&e.bind.constraint)&&!r(e.bind.constraint,t+e.name)}function ue(e,t,r){var n,a=t.split("/"),i="",o=e;for(n=0;n<a.length-1;)if("repeat"===a[n]){i+a[n+=1]in o?o=o[i+a[n]]:(o[i+a[n]]=[],o=o[i+a[n]]);var l=parseInt(a[n+1],10);o[l]?o=o[l]:(o[l]={},o=o[l]),i=i+a[n]+"/",n+=2}else i=i+a[n+1]+"/",n+=2;return o[i+a[a.length-1]]=r,e}function ce(e,t){var r,n=t.split("/"),a="",i=e;for(r=0;r<n.length-1;)if("repeat"===n[r]){a+n[r+=1]in i?i=i[a+n[r]]:i[a+n[r]]=[];var o=parseInt(n[r+1],10);i[o]?i=i[o]:(i[o]={},i=i[o]),a=a+n[r]+"/",r+=2}else a=a+n[r+1]+"/",r+=2;return i[a+n[n.length-1]]}function pe(e){var t=!1;return e.control&&e.control.appearance&&(t=!!e.control.appearance.toString().includes("minimal")),t}var me="odk/reducer/form/FIELD_VALUE_ASSIGNED",de="odk/reducer/form/OPTION_LIST_ASSIGNED",fe="odk/reducer/form/MEDIA_LIST_ADDED",he="odk/reducer/form/REMOVE_FROM_MEDIA_LIST",ve="odk/reducer/form/REMOVE_FROM_OPTION_LIST_REPEAT",ge="odk/reducer/form/RESET_STORE",Ee="odk/reducer/form/ADD_ERROR_INPUT_ID",Ce="odk/reducer/form/REMOVE_ERROR_INPUT_ID",be="odk/reducer/form/EMPTY_GROUP_FIELDS",ye="odk/reducer/form/REMOVE_GROUP_FIELDS_FROM_ERRORS",Se="odk/reducer/form/SET_USER_INPUT_OBJ",Ie="odk/reducer/form/SET_FORM_SUBMIT_STATUS",Ae=function(e,t){return{fieldTreeName:e,fieldValue:t,type:me}},Fe=function(e,t){return{fieldTreeName:e,optionList:t,type:de}},Te=function(e,t){return{fieldTreeName:e,repeatIndex:t,type:ve}},Ne=function(e){return{fieldTreeName:e,type:Ee}},Le=function(e){return{fieldTreeName:e,type:Ce}},xe=function(e){return{fieldTreeName:e,type:be}},Ve=function(e){return{fieldTreeName:e,type:ye}},Pe=d({errors:[],isFormSubmitted:!1,mediaList:{},optionList:{},userInput:{}});function Oe(e,t){var r;switch(void 0===e&&(e=Pe),t.type){case me:var n=ue(e.getIn(["userInput"]).asMutable({deep:!0}),t.fieldTreeName,t.fieldValue),a=e.asMutable({deep:!0});return d(C({},a,{userInput:n}));case de:var i=ue(e.getIn(["optionList"]).asMutable({deep:!0}),t.fieldTreeName,null!=t.optionList?C({},t.optionList):null),o=e.asMutable({deep:!0});return d(C({},o,{optionList:i}));case ve:var l=[];if(e.getIn(["optionList"]).asMutable({deep:!0}).hasOwnProperty(t.fieldTreeName)){l=[].concat(function(e,t,r){var n=[];return Object.entries(e).forEach(function(e){var a=e[1];if(e[0]===t){var i=String(r);Object.entries(a).map(function(e){e[0]!==i&&n.push(e[1])})}}),n}(e.getIn(["optionList"]).asMutable({deep:!0}),t.fieldTreeName,t.repeatIndex));var s=ue(e.getIn(["optionList"]).asMutable({deep:!0}),t.fieldTreeName,C({},l)),u=e.asMutable({deep:!0});return d(C({},u,{optionList:s}))}return e;case fe:var c=C({},e.getIn(["mediaList"]).asMutable({deep:!0}),((r={})[t.mediaObject.name]=t.mediaObject,r)),p=e.asMutable({deep:!0});return d(C({},p,{mediaList:c}));case he:return e.getIn(["mediaList"]).asMutable({deep:!0}).hasOwnProperty(t.fieldTreeName),e;case ge:return Pe;case Ee:return e.errors.includes(t.fieldTreeName)?e:e.updateIn(["errors"],function(e){return e.concat([t.fieldTreeName])});case Ce:return e.errors.includes(t.fieldTreeName)?e.updateIn(["errors"],function(e){return e.filter(function(e){return e!==t.fieldTreeName})}):e;case be:var m=function(e,r){var n,a=t.fieldTreeName.split("/"),i="",o=e;for(n=0;n<a.length-1;)if("repeat"===a[n]){i+a[n+=1]in o?o=o[i+a[n]]:o[i+a[n]]=[];var l=parseInt(a[n+1],10);o[l]?o=o[l]:(o[l]={},o=o[l]),i=i+a[n]+"/",n+=2}else i=i+a[n+1]+"/",n+=2;return Object.keys(o).forEach(function(e){e.startsWith(i+a[a.length-1])&&(o[e]=null)}),e}(e.getIn(["userInput"]).asMutable({deep:!0})),f=e.asMutable({deep:!0});return d(C({},f,{userInput:m}));case ye:return e.updateIn(["errors"],function(e){return e.filter(function(e){return!e.startsWith(t.fieldTreeName)})});case Se:return d(C({},e,{userInput:t.userInputObj}));case Ie:return d(C({},e,{isFormSubmitted:t.isFormSubmitted}));default:return e}}function we(e,t){return ce(e.getIn(["userInput"]).asMutable({deep:!0}),t)}function qe(e,t){return ce(e.getIn(["optionList"]).asMutable({deep:!0}),t)}function Re(e,t,r){return Z(t,e.userInput,null,r)}function ke(e,t,r,n){return Z(t,e.userInput,r,n)}function _e(e,t){return e.errors.includes(t)}function He(e,t){return function(e,r){var n,a=t.split("/"),i="",o=e;for(n=0;n<a.length-1;)if("repeat"===a[n]){i+a[n+=1]in o?o=o[i+a[n]]:o[i+a[n]]=[];var l=parseInt(a[n+1],10);o[l]?o=o[l]:(o[l]={},o=o[l]),i=i+a[n]+"/",n+=2}else i=i+a[n+1]+"/",n+=2;var s=!0;return Object.keys(o).forEach(function(e){e.startsWith(i+a[a.length-1])&&null!=o[e]&&s&&(s=!1)}),s}(e.userInput)}function Ge(e,t){var r=!1;return e.errors.forEach(function(e){e.startsWith(t)&&!r&&(r=!0)}),r}function je(e){return!e.errors||!e.errors.length}function Me(e){return e.getIn(["userInput"]).asMutable({deep:!0})}function De(e){return e.isFormSubmitted}function Be(e,t){return e.getIn(["mediaList",t])?e.getIn(["mediaList",t]):null}function Ue(e){return e.getIn(["mediaList"])}var ze=function(e){function r(){return e.apply(this,arguments)||this}return b(r,e),r.prototype.render=function(){var e=this.props,r=e.choices,n=e.csvList,a=e.fieldElement,i=e.fieldParentTreeName,l=e.defaultLanguage,d=e.isComponentRender,f=te(a,l),h=!1;return a.control&&a.control.appearance&&/^w(\d+)\b/i.test(a.control.appearance)&&(h=!0),d?t.createElement(s,null,t.createElement(c,{style:{border:"0000ff6b 5px solid"},expandIcon:t.createElement(m,null)},t.createElement(p,null,f)),t.createElement(u,null,t.createElement(o.FormGroup,null,t.createElement(o.Label,{className:"groupLabel"},f),a.children&&t.createElement(Pt,{choices:r,fieldElements:a.children,fieldParentTreeName:i+"group/"+a.name+"/",defaultLanguage:l,csvList:n,isAppearanceApplicable:h})))):(this.props.isErrorsIncludeGroupFieldsSelector(i+"group/"+a.name+"/")&&this.props.removeGroupFieldsFromErrorsActionCreator(i+"group/"+a.name+"/"),this.props.isGroupFieldsEmptySelector(i+a.name)||this.props.emptyGroupFieldsActionCreator(i+a.name),null)},r}(t.Component),We=n.connect(function(e,t){var r=function(t,r){return Re(e,t,r)};return{getEvaluatedExpressionSelector:r,isComponentRender:oe(t.fieldElement,t.fieldParentTreeName,r),isErrorsIncludeGroupFieldsSelector:function(t){return Ge(e,t)},isGroupFieldsEmptySelector:function(t){return He(e,t)}}},{emptyGroupFieldsActionCreator:xe,removeGroupFieldsFromErrorsActionCreator:Ve})(ze),Je=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).handleChange=function(e){var r=t.props,n=r.repeatIndex,a=r.assignmentHandler,i=r.fieldElement,o=r.fieldParentTreeName,l=r.removeHandler,s=r.removeOptionHandler,u=[].concat(r.fieldValue);u=u.filter(function(e,t){return t!==n}),a(o+i.name,u),l(o+"repeat/"+i.name+"/"),s(o+i.name,n)},t}return b(t,e),t.prototype.render=function(){var e=this.props,t=e.choices,n=e.csvList,a=e.defaultLanguage,i=e.fieldElement,o=e.fieldParentTreeName,l=e.repeatIndex,s=e.unControlFlag,u=!1;return i.control&&i.control.appearance&&/^w(\d+)\b/i.test(i.control.appearance)&&(u=!0),r.createElement("div",{className:"groupFormFieldBody"},i.children&&r.createElement(Pt,{choices:t,fieldElements:i.children,fieldParentTreeName:o+"repeat/"+i.name+"/"+l+"/",defaultLanguage:a,csvList:n,isAppearanceApplicable:u}),!1===s?r.createElement("div",{className:"minusIconWrapper"},r.createElement("span",{onClick:this.handleChange},r.createElement(f.FontAwesomeIcon,{icon:"minus-circle",className:"minusIcon"}))):null)},t}(r.Component),$e=function(e){function r(){var t;return(t=e.apply(this,arguments)||this).addAnotherRepeat=function(e){var r=t.props,n=r.fieldParentTreeName,a=r.fieldElement,i=[].concat(r.fieldValue);i.push({}),t.props.assignFieldValueActionCreator(n+a.name,i)},t}return b(r,e),r.prototype.render=function(){var e=this.props,r=e.choices,n=e.csvList,a=e.fieldValue,i=e.fieldElement,l=e.fieldParentTreeName,s=e.defaultLanguage,u=e.isComponentRender,c=e.assignFieldValueActionCreator,p=e.removeGroupFieldsFromErrorsActionCreator,m=e.removeOptionListFromActionCreator,d=te(i,s);return u?(a||this.props.assignFieldValueActionCreator(l+i.name,[{}]),t.createElement(o.FormGroup,{className:"groupBody"},t.createElement(o.Label,null,d),a&&a.map(function(e,o){return t.createElement("div",{className:"repeat-fields-body",key:"repeat"+o},t.createElement(Je,{choices:r,defaultLanguage:s,fieldElement:i,fieldParentTreeName:l,fieldValue:a,repeatIndex:o,assignmentHandler:c,removeHandler:p,removeOptionHandler:m,csvList:n,unControlFlag:!1}))}),t.createElement("div",null,t.createElement("span",{onClick:this.addAnotherRepeat},t.createElement(f.FontAwesomeIcon,{icon:"plus-circle",className:"plusIcon"}))))):(this.props.isErrorsIncludeGroupFieldsSelector(l+"repeat/"+i.name+"/")&&this.props.removeGroupFieldsFromErrorsActionCreator(l+"repeat/"+i.name+"/"),a&&this.props.assignFieldValueActionCreator(l+i.name,null),null)},r}(t.Component),Ye=n.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Re(e,t,r)};return{fieldValue:we(e,n+r.name),getEvaluatedExpressionSelector:a,isComponentRender:oe(r,n,a),isErrorsIncludeGroupFieldsSelector:function(t){return Ge(e,t)},isGroupFieldsEmptySelector:function(t){return He(e,t)}}},{assignFieldValueActionCreator:Ae,emptyGroupFieldsActionCreator:xe,removeGroupFieldsFromErrorsActionCreator:Ve,removeOptionListFromActionCreator:Te})($e),Ke=function(e){function r(){return e.apply(this,arguments)||this}b(r,e);var n=r.prototype;return n.render=function(){var e=this.props,r=e.choices,n=e.csvList,a=e.fieldValue,i=e.fieldElement,l=e.fieldParentTreeName,s=e.defaultLanguage,u=e.isComponentRender,c=e.optionList,p=e.assignFieldValueActionCreator,m=e.removeGroupFieldsFromErrorsActionCreator,d=e.removeOptionListFromActionCreator,f=te(i,s);if(u){a||this.props.assignFieldValueActionCreator(l+i.name,[]);var v=0;if(i.control){var g=i.control["jr:count"];if(/^[0-9]*$/i.test(g))v=parseInt(g,10);else{var E=this.props.getEvaluatedExpressionSelector(g,l+i.name);E&&(v=parseInt(E,10))}}if(a&&0===a.length&&0===v&&this.props.isErrorsIncludeGroupFieldsSelector(l+"repeat/"+i.name+"/")&&this.props.removeGroupFieldsFromErrorsActionCreator(l+"repeat/"+i.name+"/"),a&&a.length>0&&0===v&&(this.removeFromError(),this.props.assignFieldValueActionCreator(l+i.name,[])),c&&h.size(c)>v&&0===v&&this.props.assignOptionListActionCreator(this.props.fieldParentTreeName+this.props.fieldElement.name,[]),v>0){var C=[].concat(a);if(a&&a.length<v)for(var b=v-a.length,y=0;y<b;y++)C.push({});if(a&&a.length>v){for(var S=a.length-v,I=0;I<S;I++)C.pop();this.props.assignFieldValueActionCreator(l+i.name,C),this.removeFromError()}if(c&&h.size(c)>v){var A=h.size(c)-v;this.props.assignOptionListActionCreator(this.props.fieldParentTreeName+this.props.fieldElement.name,Array.prototype.slice.call(c,A)),this.removeFromError()}return t.createElement(o.FormGroup,{className:"groupBodyUnControlled"},t.createElement(o.Label,null,f),C&&C.map(function(e,o){return t.createElement("div",{className:"repeat-fields-body",key:"repeat"+o},t.createElement(Je,{choices:r,defaultLanguage:s,fieldElement:i,fieldParentTreeName:l,fieldValue:a,repeatIndex:o,assignmentHandler:p,removeHandler:m,removeOptionHandler:d,csvList:n,unControlFlag:!0}))}))}return null}return this.removeFromError(),a&&this.props.assignFieldValueActionCreator(l+i.name,null),null},n.removeFromError=function(){this.props.isErrorsIncludeGroupFieldsSelector(this.props.fieldParentTreeName+"repeat/"+this.props.fieldElement.name+"/")&&this.props.removeGroupFieldsFromErrorsActionCreator(this.props.fieldParentTreeName+"repeat/"+this.props.fieldElement.name+"/")},r}(t.Component),Qe=n.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Re(e,t,r)};return{fieldValue:we(e,n+r.name),getEvaluatedExpressionSelector:a,isComponentRender:oe(r,n,a),isErrorsIncludeGroupFieldsSelector:function(t){return Ge(e,t)},isGroupFieldsEmptySelector:function(t){return He(e,t)},optionList:qe(e,n+r.name)}},{assignFieldValueActionCreator:Ae,assignOptionListActionCreator:Fe,emptyGroupFieldsActionCreator:xe,removeGroupFieldsFromErrorsActionCreator:Ve,removeOptionListFromActionCreator:Te})(Ke),Xe=function(e){function r(){return e.apply(this,arguments)||this}return b(r,e),r.prototype.render=function(){var e=this.props.fieldElement;return t.createElement(e.control&&e.control["jr:count"]?Qe:Ye,Object.assign({},this.props))},r}(t.Component),Ze=function(e){function r(){return e.apply(this,arguments)||this}return b(r,e),r.prototype.render=function(){var e=this.props,r=e.fieldElement,n=e.fieldParentTreeName,a=e.fieldValue,i=e.isComponentRender,l=e.getEvaluatedExpressionSelector,s=e.isPresentInErrorSelector,u=ie(r)&&(!a||""===a),c=a&&""!==a&&se(r,n,l);if(i){null==a&&"default"in r&&this.props.assignFieldValueActionCreator(n+r.name,r.default);var p=le(r,n,l);!u&&!c||s(n+r.name)?u||c||!s(n+r.name)||this.props.removeErrorInputIdActionCreator(n+r.name):this.props.addErrorInputIdActionCreator(n+r.name);var m="";return r.bind&&r.bind.calculate&&(m=this.props.getEvaluatedExpressionSelector(r.bind.calculate,n+r.name)),m&&a!==m&&this.props.assignFieldValueActionCreator(n+r.name,m),t.createElement("div",null,t.createElement(o.Input,{type:"hidden",name:r.name,value:m||"",readOnly:p}))}return null!=a&&(this.props.assignFieldValueActionCreator(n+r.name,null),s(n+r.name)&&this.props.removeErrorInputIdActionCreator(n+r.name)),null},r}(t.Component),et=n.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Re(e,t,r)};return{fieldValue:we(e,n+r.name),getEvaluatedExpressionSelector:a,isComponentRender:oe(r,n,a),isPresentInErrorSelector:function(t){return _e(e,t)}}},{addErrorInputIdActionCreator:Ne,assignFieldValueActionCreator:Ae,removeErrorInputIdActionCreator:Le})(Ze),tt=function(e){function r(){var t;return(t=e.apply(this,arguments)||this).onChangeHandler=function(e){t.props.assignFieldValueActionCreator(t.props.fieldParentTreeName+e.currentTarget.name,""!==e.currentTarget.value?new Date(e.currentTarget.value):null)},t}return b(r,e),r.prototype.render=function(){var e=this.props,r=e.fieldElement,n=e.fieldParentTreeName,a=e.fieldValue,i=e.isComponentRender,l=e.getEvaluatedExpressionSelector,s=e.getFormSubmitStatusSelector,u=e.isPresentInErrorSelector,c=e.defaultLanguage,p=ie(r),m=s,d=p&&(!a||""===a),h=a&&""!==a&&se(r,n,l),v=ne(l,te(r,c),n+r.name),g=ne(l,ae(r,c),n+r.name),E=re(r,c);if(i){null==a&&"default"in r&&this.props.assignFieldValueActionCreator(n+r.name,r.default);var C=le(r,n,l);!d&&!h||u(n+r.name)?d||h||!u(n+r.name)||this.props.removeErrorInputIdActionCreator(n+r.name):this.props.addErrorInputIdActionCreator(n+r.name);var b="";a&&""!==a&&(b=new Date(a).toISOString().slice(0,10));var y=u(n+r.name);return t.createElement(o.FormGroup,null,t.createElement(o.Label,null,v," ",p&&t.createElement("span",{className:"requiredTextSteric"},"*")),t.createElement(o.Input,{type:"date",name:r.name,onChange:this.onChangeHandler,value:b,readOnly:C}),m&&y&&t.createElement(f.FontAwesomeIcon,{icon:"exclamation-circle",className:"errorSign"}),r.hint&&t.createElement(o.Label,{className:"hintText"},E),m&&d&&t.createElement(o.Label,{className:"requiredText"},A),h&&t.createElement(o.Label,{className:"constraintText"},g))}return null!=a&&(this.props.assignFieldValueActionCreator(n+r.name,null),u(n+r.name)&&this.props.removeErrorInputIdActionCreator(n+r.name)),null},r}(t.Component),rt=n.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Re(e,t,r)},i=De(e);return{fieldValue:we(e,n+r.name),getEvaluatedExpressionSelector:a,getFormSubmitStatusSelector:i,isComponentRender:oe(r,n,a),isPresentInErrorSelector:function(t){return _e(e,t)}}},{addErrorInputIdActionCreator:Ne,assignFieldValueActionCreator:Ae,removeErrorInputIdActionCreator:Le})(tt),nt=function(e){function r(){var t;return(t=e.apply(this,arguments)||this).handleChange=function(e){return function(r){var n=new Date(r),a=n.getTimezoneOffset()/60;n.setHours(n.getHours()+a),t.props.assignFieldValueActionCreator(t.props.fieldParentTreeName+e,""!==r?n:null)}},t}return b(r,e),r.prototype.render=function(){var e=this.props,r=e.fieldElement,n=e.fieldParentTreeName,a=e.fieldValue,i=e.isComponentRender,l=e.getEvaluatedExpressionSelector,s=e.getFormSubmitStatusSelector,u=e.isPresentInErrorSelector,c=e.defaultLanguage,p=ie(r),m=s,d=p&&(!a||""===a),h=a&&""!==a&&se(r,n,l),g=ne(l,te(r,c),n+r.name),E=ne(l,ae(r,c),n+r.name),C=re(r,c);if(i){null==a&&"default"in r&&this.props.assignFieldValueActionCreator(n+r.name,r.default);var b=le(r,n,l);!d&&!h||u(n+r.name)?d||h||!u(n+r.name)||this.props.removeErrorInputIdActionCreator(n+r.name):this.props.addErrorInputIdActionCreator(n+r.name);var y=u(n+r.name),S=null;if(a){var I=(S=new Date(a)).getTimezoneOffset()/60;S.setHours(S.getHours()-I)}return t.createElement(o.FormGroup,null,t.createElement(o.Label,null,g," ",p&&t.createElement("span",{className:"requiredTextSteric"},"*")),t.createElement("br",null),t.createElement(v,{name:r.name,selected:a?S:null,onChange:this.handleChange(r.name),showTimeSelect:!0,timeFormat:"h:m aa",timeIntervals:15,timeCaption:"time",dateFormat:"MM/dd/yyyy h:mm aa",placeholderText:"mm/dd/yyyy h:m aa",className:"form-control",readOnly:b}),t.createElement("br",null),m&&y&&t.createElement(f.FontAwesomeIcon,{icon:"exclamation-circle",className:"errorSign"}),r.hint&&t.createElement(o.Label,{className:"hintText"},C),m&&d&&t.createElement(o.Label,{className:"requiredText"},A),h&&t.createElement(o.Label,{className:"constraintText"},E))}return null!=a&&(this.props.assignFieldValueActionCreator(n+r.name,null),u(n+r.name)&&this.props.removeErrorInputIdActionCreator(n+r.name)),null},r}(t.Component),at=n.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Re(e,t,r)},i=De(e);return{fieldValue:we(e,n+r.name),getEvaluatedExpressionSelector:a,getFormSubmitStatusSelector:i,isComponentRender:oe(r,n,a),isPresentInErrorSelector:function(t){return _e(e,t)}}},{addErrorInputIdActionCreator:Ne,assignFieldValueActionCreator:Ae,removeErrorInputIdActionCreator:Le})(nt),it=function(e){function r(t){var r;return(r=e.call(this,t)||this).onChangeHandler=function(e){r.setState(C({},r.state,{fieldValue:e.currentTarget.value||"",isFocused:!0}))},r.onBlurHandler=function(e){r.setState(C({},r.state,{fieldValue:e.currentTarget.value||"",isFocused:!1})),r.props.assignFieldValueActionCreator(r.props.fieldParentTreeName+e.currentTarget.name,""!==e.currentTarget.value?parseFloat(e.currentTarget.value):null)},r.state={fieldValue:"",isFocused:!1},r}return b(r,e),r.prototype.render=function(){var e=this.props,r=e.fieldElement,n=e.fieldParentTreeName,a=e.fieldValue,i=e.isComponentRender,l=e.getEvaluatedExpressionSelector,s=e.getFormSubmitStatusSelector,u=e.isPresentInErrorSelector,c=e.defaultLanguage,p=ie(r),m=s,d=p&&(null===a||""===a||void 0===a),h=""!==a&&null!=a&&se(r,n,l),v=ne(l,te(r,c),n+r.name),g=ne(l,ae(r,c),n+r.name),E=re(r,c);if(i){null==a&&"default"in r&&this.props.assignFieldValueActionCreator(n+r.name,r.default);var b,y=le(r,n,l);!d&&!h||u(n+r.name)?d||h||!u(n+r.name)||this.props.removeErrorInputIdActionCreator(n+r.name):this.props.addErrorInputIdActionCreator(n+r.name),"string"==typeof this.props.fieldValue&&this.props.assignFieldValueActionCreator(n+r.name,parseFloat(this.props.fieldValue)),b=0===a?"0":a;var S,I=u(n+r.name);return r.bind&&r.bind.calculate&&(S=this.props.getEvaluatedExpressionSelector(r.bind.calculate,n+r.name),a&&S!==a&&this.props.assignFieldValueActionCreator(n+r.name,S),b=S),t.createElement(o.FormGroup,null,t.createElement(o.Label,null,v," ",p&&t.createElement("span",{className:"requiredTextSteric"},"*")),t.createElement(o.Input,{type:"number",step:"any",name:r.name,onChange:this.onChangeHandler,onBlur:this.onBlurHandler,value:this.state.isFocused?this.state.fieldValue||"":b||"",readOnly:y}),m&&I&&t.createElement(f.FontAwesomeIcon,{icon:"exclamation-circle",className:"errorSign"}),r.hint&&t.createElement(o.Label,{className:"hintText"},E),m&&d&&t.createElement(o.Label,{className:"requiredText"},A),h&&t.createElement(o.Label,{className:"constraintText"},g))}return this.state.isFocused&&this.setState(C({},this.state,{isFocused:!1})),null!=a&&(this.props.assignFieldValueActionCreator(n+r.name,null),u(n+r.name)&&this.props.removeErrorInputIdActionCreator(n+r.name)),null},r}(t.Component),ot=n.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Re(e,t,r)},i=De(e);return{fieldValue:we(e,n+r.name),getEvaluatedExpressionSelector:a,getFormSubmitStatusSelector:i,isComponentRender:oe(r,n,a),isPresentInErrorSelector:function(t){return _e(e,t)}}},{addErrorInputIdActionCreator:Ne,assignFieldValueActionCreator:Ae,removeErrorInputIdActionCreator:Le})(it),lt=function(e){function t(){return e.apply(this,arguments)||this}return b(t,e),t.prototype.render=function(){var e=this.props,t=e.fieldName,n=e.assignFieldValueActionCreator;return r.createElement(r.Fragment,null,r.createElement("p",{className:"text-muted"},"Uploaded File Name: ",r.createElement("strong",{className:"text-primary"}," ",e.fieldValue," ")),r.createElement(o.Button,{size:"sm",color:"danger",onClick:function(){n(t,null)}},"Remove File"))},t}(r.Component),st=n.connect(function(e,t){return{fileObject:Be(e,t.fieldValue)}},{assignFieldValueActionCreator:Ae})(lt),ut=function(e){function r(){var t;return(t=e.apply(this,arguments)||this).onChangeHandler=function(e){e.target.files[0]?(t.props.assignFieldValueActionCreator(t.props.fieldParentTreeName+e.target.name,e.target.files[0].name),t.props.addMediaListActionCreator(e.target.files[0])):t.props.assignFieldValueActionCreator(t.props.fieldParentTreeName+e.target.name,null)},t}return b(r,e),r.prototype.render=function(){var e=this.props,r=e.fieldElement,n=e.fieldParentTreeName,a=e.fieldValue,i=e.isComponentRender,l=e.getEvaluatedExpressionSelector,s=e.getFormSubmitStatusSelector,u=e.isPresentInErrorSelector,c=e.defaultLanguage,p=ie(r),m=s,d=p&&(!a||""===a),h=a&&""!==a&&se(r,n,l),v=ne(l,te(r,c),n+r.name),g=ne(l,ae(r,c),n+r.name),E=re(r,c);if(i){null==a&&"default"in r&&this.props.assignFieldValueActionCreator(n+r.name,r.default);var C=le(r,n,l);!d&&!h||u(n+r.name)?d||h||!u(n+r.name)||this.props.removeErrorInputIdActionCreator(n+r.name):this.props.addErrorInputIdActionCreator(n+r.name);var b=u(n+r.name);return t.createElement(o.FormGroup,null,t.createElement(o.Label,null,v," ",p&&t.createElement("span",{className:"requiredTextSteric"},"*")),a?t.createElement(st,{fieldName:n+r.name,fieldValue:a}):t.createElement(o.Input,"photo"===r.type?{type:"file",accept:"image/*",name:r.name,onChange:this.onChangeHandler,readOnly:C}:{type:"file",name:r.name,onChange:this.onChangeHandler,readOnly:C}),m&&b&&t.createElement(f.FontAwesomeIcon,{icon:"exclamation-circle",className:"errorSign"}),r.hint&&t.createElement(o.Label,{className:"hintText"},E),m&&d&&t.createElement(o.Label,{className:"requiredText"},A),h&&t.createElement(o.Label,{className:"constraintText"},g))}return null!=a&&(this.props.assignFieldValueActionCreator(n+r.name,null),u(n+r.name)&&this.props.removeErrorInputIdActionCreator(n+r.name)),null},r}(t.Component),ct=n.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Re(e,t,r)},i=De(e);return{fieldValue:we(e,n+r.name),getEvaluatedExpressionSelector:a,getFormSubmitStatusSelector:i,isComponentRender:oe(r,n,a),isPresentInErrorSelector:function(t){return _e(e,t)}}},{addErrorInputIdActionCreator:Ne,addMediaListActionCreator:function(e){return{mediaObject:e,type:fe}},assignFieldValueActionCreator:Ae,removeErrorInputIdActionCreator:Le})(ut),pt=function(e){function r(t){var r;return(r=e.call(this,t)||this).onChangeHandler=function(e){r.setState(C({},r.state,{fieldValue:e.currentTarget.value||"",isFocused:!0}))},r.onBlurHandler=function(e){r.setState(C({},r.state,{fieldValue:e.currentTarget.value||"",isFocused:!1})),r.props.assignFieldValueActionCreator(r.props.fieldParentTreeName+e.currentTarget.name,""!==e.currentTarget.value?parseInt(e.currentTarget.value,10):null)},r.state={fieldValue:"",isFocused:!1},r}return b(r,e),r.prototype.render=function(){var e=this.props,r=e.fieldElement,n=e.fieldParentTreeName,a=e.fieldValue,i=e.isComponentRender,l=e.getEvaluatedExpressionSelector,s=e.getFormSubmitStatusSelector,u=e.isPresentInErrorSelector,c=e.defaultLanguage,p=ie(r),m=s,d=p&&(null===a||""===a||void 0===a),h=""!==a&&null!=a&&se(r,n,l),v=ne(l,te(r,c),n+r.name),g=ne(l,ae(r,c),n+r.name)||"",E=re(r,c);if(i){null==a&&"default"in r&&this.props.assignFieldValueActionCreator(n+r.name,r.default);var b,y=le(r,n,l);!d&&!h||u(n+r.name)?d||h||!u(n+r.name)||this.props.removeErrorInputIdActionCreator(n+r.name):this.props.addErrorInputIdActionCreator(n+r.name),"string"==typeof this.props.fieldValue&&this.props.assignFieldValueActionCreator(n+r.name,parseInt(this.props.fieldValue,10)),b=0===a?"0":a;var S,I=u(n+r.name);return r.bind&&r.bind.calculate&&(S=this.props.getEvaluatedExpressionSelector(r.bind.calculate,n+r.name),a&&S!==a&&this.props.assignFieldValueActionCreator(n+r.name,S),b=S),t.createElement(o.FormGroup,null,t.createElement(o.Label,null,v," ",p&&t.createElement("span",{className:"requiredTextSteric"},"*")),t.createElement(o.Input,{type:"number",name:r.name,onChange:this.onChangeHandler,onBlur:this.onBlurHandler,value:this.state.isFocused?this.state.fieldValue||"":b||"",readOnly:y}),m&&I&&t.createElement(f.FontAwesomeIcon,{icon:"exclamation-circle",className:"errorSign"}),r.hint&&t.createElement(o.Label,{className:"hintText"},E),m&&d&&t.createElement(o.Label,{className:"requiredText"},A),h&&t.createElement(o.Label,{className:"constraintText"},g))}return this.state.isFocused&&this.setState(C({},this.state,{isFocused:!1})),null!=a&&(this.props.assignFieldValueActionCreator(n+r.name,null),u(n+r.name)&&this.props.removeErrorInputIdActionCreator(n+r.name)),null},r}(t.Component),mt=n.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Re(e,t,r)},i=De(e);return{fieldValue:we(e,n+r.name),getEvaluatedExpressionSelector:a,getFormSubmitStatusSelector:i,isComponentRender:oe(r,n,a),isPresentInErrorSelector:function(t){return _e(e,t)}}},{addErrorInputIdActionCreator:Ne,assignFieldValueActionCreator:Ae,removeErrorInputIdActionCreator:Le})(pt),dt=function(e){function r(){return e.apply(this,arguments)||this}return b(r,e),r.prototype.render=function(){var e=this.props,r=e.fieldElement,n=e.fieldParentTreeName,a=e.fieldValue,i=e.isComponentRender,l=e.getEvaluatedExpressionSelector,s=e.isPresentInErrorSelector,u=e.defaultLanguage,c=ie(r),p=c&&(!a||""===a),m=a&&""!==a&&se(r,n,l),d=te(r,u),f=ne(l,ae(r,u),n+r.name);if(i){null==a&&"default"in r&&this.props.assignFieldValueActionCreator(r.name,r.default);var h=re(r,u);return!p&&!m||s(n+r.name)?p||m||!s(n+r.name)||this.props.removeErrorInputIdActionCreator(n+r.name):this.props.addErrorInputIdActionCreator(n+r.name),t.createElement(o.FormGroup,null,t.createElement(o.Label,null,d),c&&t.createElement(o.Label,{className:"requiredTextSteric"},"*"),r.hint&&t.createElement(o.FormText,{className:"hintText"},h),p&&t.createElement(o.Label,{className:"requiredText"},A),m&&t.createElement(o.Label,{className:"constraintText"},f))}return null!=a&&(this.props.assignFieldValueActionCreator(n+r.name,null),s(n+r.name)&&this.props.removeErrorInputIdActionCreator(n+r.name)),null},r}(t.Component),ft=n.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Re(e,t,r)};return{fieldValue:we(e,n+r.name),getEvaluatedExpressionSelector:a,isComponentRender:oe(r,n,a),isPresentInErrorSelector:function(t){return _e(e,t)}}},{addErrorInputIdActionCreator:Ne,assignFieldValueActionCreator:Ae,removeErrorInputIdActionCreator:Le})(dt),ht=function(e){function r(){var t;return(t=e.apply(this,arguments)||this).setOptionList=function(e){var r=[];e.map(function(e){var t={};t.name=e.name,t.label=e.label,r.push(t)}),h.isEqual(t.props.optionList,C({},r))||t.props.assignOptionListActionCreator(t.props.fieldParentTreeName+t.props.fieldElement.name,r)},t.onChangeHandler=function(e){return function(r){var n=[],a=0;r&&r.length>0?(r.map(function(){n.includes(r[a].value)||n.push(r[a].value),a++}),t.props.assignFieldValueActionCreator(t.props.fieldParentTreeName+e,n)):t.props.assignFieldValueActionCreator(t.props.fieldParentTreeName+e,null)}},t.getProcessedString=function(e){var r=(e.match(/\([^\)]+\)/i)||[""])[0];if(r.length>2){var n=(r=r.substring(1,r.length-1)).split(","),a=[].concat(n);return a=a.splice(2,a.length),t.extractAndFilterOptions(n[0],n[1]||null,a||[])}return[]},t.extractAndFilterOptions=function(e,r,n){r&&(r=(r=r.trim()).substring(1,r.length-1).trim());var a=[],i=[],o=[];if(t.props.csvList[e=e.substring(1,e.length-1)+".csv"]){var l=e.replace(/'/g,"");a=t.props.csvList[l]||[]}if(r&&"matches"===r.trim()){for(var s=0,u=function(){var e=n[s].trim();e=e.substring(1,e.length-1).trim();var r=n[s+1],i=[].concat(a),l=[];i.forEach(function(e){l=t.props.getEvaluatedExpressionSelectorForSelect(r,t.props.fieldParentTreeName+t.props.fieldElement.name,e)});var u=0;l.map(function(){a.map(function(t){t[e]===l[u]&&o.push(t)}),u+=1}),s+=2};s<n.length;)u();a=[].concat(Array.from(new Set(o)))}if(0!==a.length){var c="",p="";return t.props.fieldElement.children&&t.props.fieldElement.children[0]&&t.props.fieldElement.children[0].name&&t.props.fieldElement.children[0].label&&(c=te(t.props.fieldElement.children[0],t.props.defaultLanguage),p=t.props.fieldElement.children[0].name),a.forEach(function(e){var t={};t.label=e[c].trim(),t.name=e[p].trim(),i.push(t)}),h.uniqBy(i,"name")}return[]},t}return b(r,e),r.prototype.render=function(){var e=this,r=this.props,n=r.choices,a=r.fieldElement,i=r.fieldParentTreeName,s=r.fieldValue,u=r.isComponentRender,c=r.getEvaluatedExpressionSelector,p=r.getFormSubmitStatusSelector,m=r.isPresentInErrorSelector,d=r.defaultLanguage,v=ie(a),g=p,E=v&&(!s||s===[]),C=s&&s!==[]&&se(a,i,c),b=ne(c,te(a,d),i+a.name),y=ne(c,ae(a,d),i+a.name),S=re(a,d);if(u){null==s&&"default"in a&&this.props.assignFieldValueActionCreator(i+a.name,a.default),!E&&!C||m(i+a.name)?E||C||!m(i+a.name)||this.props.removeErrorInputIdActionCreator(i+a.name):this.props.addErrorInputIdActionCreator(i+a.name);var I=[],F=[];if(a.control&&a.control.appearance){var T=a.control.appearance.toString().replace("minimal","");if(/search\([^\)|(]+\)/i.test(T)){var N=T.match(/search\([^\)|(]+\)/i)||[""];I=this.getProcessedString(N[0])}}if(a.control&&a.control.appearance&&/search\([^\)|(]+\)/i.test(a.control.appearance))I.map(function(e){return F.push({label:e.label,value:e.name})}),this.setOptionList(I);else if(a.itemset){if(n&&n[a.itemset.trim()]){h.forEach(n[a.itemset.trim()],function(t){if(a.choice_filter&&e.props.getEvaluatedExpressionSelectorForSelect(a.choice_filter,i+a.name,t)){var r=te(t,d);F.push({label:r,value:t.name})}});var L=[];F&&F.map(function(e){var t={};t.name=e.value,t.label=e.label,L.push(t)}),this.setOptionList(L)}}else a.children&&(a.children.map(function(e){var t=te(e,d);F.push({label:t,value:e.name})}),this.setOptionList(a.children));var x=[],V=!1;if(s&&s.length>0){var P=[];F.map(function(e){e.value&&P.push(e.value)});var O=s,w=Array.isArray(O),q=0;for(O=w?O:O[Symbol.iterator]();;){var R;if(w){if(q>=O.length)break;R=O[q++]}else{if((q=O.next()).done)break;R=q.value}var k=R;P.includes(k)?x.push(k):V=!0}}s&&s.length>0&&V&&this.props.assignFieldValueActionCreator(this.props.fieldParentTreeName+a.name,x||[]);var _=[];if(s&&s.length>0&&F.map(function(e){var t=s,r=Array.isArray(t),n=0;for(t=r?t:t[Symbol.iterator]();;){var a;if(r){if(n>=t.length)break;a=t[n++]}else{if((n=t.next()).done)break;a=n.value}e.value===a&&_.push(e)}}),"string"==typeof this.props.fieldValue){var H=s.split(" ");this.props.assignFieldValueActionCreator(i+a.name,H)}var G=m(i+a.name);return t.createElement(o.FormGroup,null,t.createElement(o.Label,null,b," ",v&&t.createElement("span",{className:"requiredTextSteric"},"*")),t.createElement("div",{key:a.name,className:"selectAllDropDown"},t.createElement(l,{isMulti:!0,name:a.name,options:F,onChange:this.onChangeHandler(a.name),value:_||[]})),g&&G&&t.createElement(f.FontAwesomeIcon,{icon:"exclamation-circle",className:"errorSign"}),a.hint&&t.createElement(o.Label,{className:"hintText"},S),g&&E&&t.createElement(o.Label,{className:"requiredText"},A),C&&t.createElement(o.Label,{className:"constraintText"},y))}return null!=s&&(this.props.assignFieldValueActionCreator(i+a.name,null),m(i+a.name)&&this.props.removeErrorInputIdActionCreator(i+a.name)),null!=this.props.optionList&&this.props.assignOptionListActionCreator(this.props.fieldParentTreeName+a.name,null),null},r}(t.Component),vt=n.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Re(e,t,r)},i=De(e);return{fieldValue:we(e,n+r.name),getEvaluatedExpressionSelector:a,getEvaluatedExpressionSelectorForSelect:function(t,r,n){return ke(e,t,n,r)},getFormSubmitStatusSelector:i,isComponentRender:oe(r,n,a),isPresentInErrorSelector:function(t){return _e(e,t)},optionList:qe(e,n+r.name)}},{addErrorInputIdActionCreator:Ne,assignFieldValueActionCreator:Ae,assignOptionListActionCreator:Fe,removeErrorInputIdActionCreator:Le})(ht),gt=function(e){function r(){var t;return(t=e.apply(this,arguments)||this).onChangeHandlerCheckBox=function(e){var r=t.props,n=r.fieldValue,a=r.fieldParentTreeName+r.fieldElement.name;if(e.target.checked)n&&n.length>0&&!n.includes(e.target.value)?t.props.assignFieldValueActionCreator(a,[].concat(n,[e.target.value])):t.props.assignFieldValueActionCreator(a,[e.target.value]);else if(n&&n.length>0&&n.includes(e.target.value)){var i=n.filter(function(t){return t!==e.target.value});t.props.assignFieldValueActionCreator(a,i.length?i:null)}},t.getProcessedString=function(e){var r=(e.match(/\([^\)]+\)/i)||[""])[0];if(r.length>2){var n=(r=r.substring(1,r.length-1)).split(","),a=[].concat(n);return a=a.splice(2,a.length),t.extractAndFilterOptions(n[0],n[1]||null,a||[])}return[]},t.extractAndFilterOptions=function(e,r,n){r&&(r=(r=r.trim()).substring(1,r.length-1).trim());var a=[],i=[],o=[];if(t.props.csvList[e=e.substring(1,e.length-1)+".csv"]){var l=e.replace(/'/g,"");a=t.props.csvList[l]||[]}if(r&&"matches"===r.trim()){for(var s=0,u=function(){var e=n[s].trim();e=e.substring(1,e.length-1).trim();var r=n[s+1],i=[].concat(a),l=[];i.forEach(function(e){l=t.props.getEvaluatedExpressionSelectorForSelect(r,t.props.fieldParentTreeName+t.props.fieldElement.name,e)});var u=0;l.map(function(){a.map(function(t){t[e]===l[u]&&o.push(t)}),u+=1}),s+=2};s<n.length;)u();a=[].concat(Array.from(new Set(o)))}if(0!==a.length){var c="",p="";return t.props.fieldElement.children&&t.props.fieldElement.children[0]&&t.props.fieldElement.children[0].name&&t.props.fieldElement.children[0].label&&(c=te(t.props.fieldElement.children[0],t.props.defaultLanguage),p=t.props.fieldElement.children[0].name),a.forEach(function(e){var t={};t.label=e[c].trim(),t.name=e[p].trim(),i.push(t)}),h.uniqBy(i,"name")}return[]},t}return b(r,e),r.prototype.render=function(){var e=this,r=this.props,n=r.choices,a=r.fieldElement,i=r.fieldParentTreeName,l=r.fieldValue,s=r.isComponentRender,u=r.getEvaluatedExpressionSelector,c=r.getFormSubmitStatusSelector,p=r.isPresentInErrorSelector,m=r.defaultLanguage,d=ie(a),v=c,g=d&&(!l||l===[]),E=l&&l!==[]&&se(a,i,u),b=ne(u,te(a,m),i+a.name),y=ne(u,ae(a,m),i+a.name),S=re(a,m);if(s){null==l&&"default"in a&&this.props.assignFieldValueActionCreator(i+a.name,a.default);var I=le(a,i,u);!g&&!E||p(i+a.name)?g||E||!p(i+a.name)||this.props.removeErrorInputIdActionCreator(i+a.name):this.props.addErrorInputIdActionCreator(i+a.name);var F=[],T=[];if(a.control&&a.control.appearance){var N=a.control.appearance.toString().replace("minimal","");if(/search\([^\)|(]+\)/i.test(N)){var L=N.match(/search\([^\)|(]+\)/i)||[""];F=this.getProcessedString(L[0])}}var x=[];a.children&&a.children.map(function(e){var t={};t.name=e.name,t.label=e.label,x.push(t)});var V=[];if(a.control&&a.control.appearance&&/search\([^\)|(]+\)/i.test(a.control.appearance)){V=[],T=[];var P=[],O=!1;if(F.map(function(e){return T.push({label:e.label,value:e.name})}),l&&l.length>0){var w=[];T.map(function(e){e.value&&w.push(e.value)});var q=l,R=Array.isArray(q),k=0;for(q=R?q:q[Symbol.iterator]();;){var _;if(R){if(k>=q.length)break;_=q[k++]}else{if((k=q.next()).done)break;_=k.value}var H=_;w.includes(H)?P.push(H):O=!0}}l&&l.length>0&&O&&this.props.assignFieldValueActionCreator(this.props.fieldParentTreeName+a.name,P||[]),h.isEqual(this.props.optionList,C({},F))||this.props.assignOptionListActionCreator(this.props.fieldParentTreeName+a.name,F),V=[].concat(F)}else if(a.itemset){V=[],T=[];var G=[],j=[],M=!1;if(n&&n[a.itemset.trim()]&&h.forEach(n[a.itemset.trim()],function(t){if(a.choice_filter&&e.props.getEvaluatedExpressionSelectorForSelect(a.choice_filter,i+a.name,t)){var r=te(t,m);T.push({label:r,value:t.name})}}),l&&l.length>0){var D=[];T.map(function(e){e.value&&D.push(e.value)});var B=l,U=Array.isArray(B),z=0;for(B=U?B:B[Symbol.iterator]();;){var W;if(U){if(z>=B.length)break;W=B[z++]}else{if((z=B.next()).done)break;W=z.value}var J=W;D.includes(J)?G.push(J):M=!0}}l&&l.length>0&&M&&this.props.assignFieldValueActionCreator(this.props.fieldParentTreeName+a.name,G||[]),T&&T.map(function(e){var t={};t.name=e.value,t.label=e.label,j.push(t)}),h.isEqual(this.props.optionList,C({},j))||this.props.assignOptionListActionCreator(this.props.fieldParentTreeName+a.name,j),V=[].concat(j)}else V=[],T=[],a.children&&a.children.map(function(e){return T.push({label:e.label,value:e.name})}),h.isEqual(this.props.optionList,C({},x))||this.props.assignOptionListActionCreator(this.props.fieldParentTreeName+a.name,x),V=[].concat(x);var $=[];l&&l.length>0&&T.map(function(e){var t=l,r=Array.isArray(t),n=0;for(t=r?t:t[Symbol.iterator]();;){var a;if(r){if(n>=t.length)break;a=t[n++]}else{if((n=t.next()).done)break;a=n.value}e.value===a&&$.push(e.value)}});var Y=!1;if(a.control&&a.control.appearance&&a.control.appearance.split(" ").forEach(function(e){Y||"horizontal-compact"!==e||(Y=!0)}),"string"==typeof this.props.fieldValue){var K=l.split(" ");this.props.assignFieldValueActionCreator(i+a.name,K)}var Q=p(i+a.name);return t.createElement("div",null,t.createElement(o.Label,null,b," ",d&&t.createElement("span",{className:"requiredTextSteric"},"*")),t.createElement(o.Form,{key:"selectAll"},V.map(function(r,n){return t.createElement(o.FormGroup,{key:n,check:!0,inline:Y},t.createElement(o.Label,{check:!0},t.createElement(o.Input,{key:a.name+"-"+n,type:"checkbox",name:a.name,value:r.name||[],onChange:e.onChangeHandlerCheckBox,readOnly:I,checked:$.includes(r.name)})," ",te(r,m)))})),v&&Q&&t.createElement(f.FontAwesomeIcon,{icon:"exclamation-circle",className:"errorSign"}),a.hint&&t.createElement(o.Label,{className:"hintText"},S),v&&g&&t.createElement(o.Label,{className:"requiredText"},A),E&&t.createElement(o.Label,{className:"constraintText"},y))}return null!=l&&(this.props.assignFieldValueActionCreator(i+a.name,null),p(i+a.name)&&this.props.removeErrorInputIdActionCreator(i+a.name)),null!=this.props.optionList&&this.props.assignOptionListActionCreator(this.props.fieldParentTreeName+a.name,null),null},r}(t.Component),Et=n.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Re(e,t,r)},i=De(e);return{fieldValue:we(e,n+r.name),getEvaluatedExpressionSelector:a,getEvaluatedExpressionSelectorForSelect:function(t,r,n){return ke(e,t,n,r)},getFormSubmitStatusSelector:i,isComponentRender:oe(r,n,a),isPresentInErrorSelector:function(t){return _e(e,t)},optionList:qe(e,n+r.name)}},{addErrorInputIdActionCreator:Ne,assignFieldValueActionCreator:Ae,assignOptionListActionCreator:Fe,removeErrorInputIdActionCreator:Le})(gt),Ct=function(e){function r(){return e.apply(this,arguments)||this}return b(r,e),r.prototype.render=function(){return pe(this.props.fieldElement)?t.createElement(vt,Object.assign({},this.props)):t.createElement(Et,Object.assign({},this.props))},r}(t.Component),bt=function(e){function r(){var t;return(t=e.apply(this,arguments)||this).setOptionList=function(e){var r=[];e.map(function(e){var t={};t.name=e.name,t.label=e.label,r.push(t)}),h.isEqual(t.props.optionList,C({},r))||t.props.assignOptionListActionCreator(t.props.fieldParentTreeName+t.props.fieldElement.name,r)},t.onChangeHandler=function(e){return function(r){t.props.assignFieldValueActionCreator(t.props.fieldParentTreeName+e,r.value||"")}},t.getProcessedString=function(e){var r=(e.match(/\([^\)]+\)/i)||[""])[0];if(r.length>2){var n=(r=r.substring(1,r.length-1)).split(","),a=[].concat(n);return a=a.splice(2,a.length),t.extractAndFilterOptions(n[0],n[1]||null,a||[])}return[]},t.extractAndFilterOptions=function(e,r,n){r&&(r=(r=r.trim()).substring(1,r.length-1).trim());var a=[],i=[];if(t.props.csvList[e=e.substring(1,e.length-1)+".csv"]){var o=e.replace(/'/g,"");a=t.props.csvList[o]||[]}if(r&&"matches"===r.trim())for(var l=0,s=function(){var e=n[l].trim();e=e.substring(1,e.length-1).trim();var r=n[l+1],i=[].concat(a),o="";i.forEach(function(e){o=t.props.getEvaluatedExpressionSelectorForSelect(r,t.props.fieldParentTreeName+t.props.fieldElement.name,e)}),a=a.filter(function(t){return t[e]===o}),l+=2};l<n.length;)s();if(0!==a.length){var u="",c="";return t.props.fieldElement.children&&t.props.fieldElement.children[0]&&t.props.fieldElement.children[0].name&&t.props.fieldElement.children[0].label&&(u=te(t.props.fieldElement.children[0],t.props.defaultLanguage),c=t.props.fieldElement.children[0].name),a.forEach(function(e){var t={};t.label=e[u].trim(),t.name=e[c].trim(),i.push(t)}),h.uniqBy(i,"name")}return[]},t}return b(r,e),r.prototype.render=function(){var e=this,r=this.props,n=r.choices,a=r.fieldElement,i=r.fieldParentTreeName,s=r.fieldValue,u=r.isComponentRender,c=r.getEvaluatedExpressionSelector,p=r.getFormSubmitStatusSelector,m=r.isPresentInErrorSelector,d=r.defaultLanguage,v=ie(a),g=p,E=v&&(!s||""===s),C=s&&""!==s&&se(a,i,c),b=ne(c,te(a,d),i+a.name),y=ne(c,ae(a,d),i+a.name),S=re(a,d);if(u){null==s&&"default"in a&&this.props.assignFieldValueActionCreator(i+a.name,a.default),!E&&!C||m(i+a.name)?E||C||!m(i+a.name)||this.props.removeErrorInputIdActionCreator(i+a.name):this.props.addErrorInputIdActionCreator(i+a.name);var I,F=[],T=[];if(a.control&&a.control.appearance){var N=a.control.appearance.toString().replace("minimal","");if(/search\([^\)|(]+\)/i.test(N)){var L=N.match(/search\([^\)|(]+\)/i)||[""];F=this.getProcessedString(L[0])}}if(a.control&&a.control.appearance&&/search\([^\)|(]+\)/i.test(a.control.appearance)?(F.map(function(e){return T.push({label:e.label,value:e.name})}),this.setOptionList(F)):a.itemset?n&&n[a.itemset.trim()]&&(h.forEach(n[a.itemset.trim()],function(t){if(a.choice_filter&&e.props.getEvaluatedExpressionSelectorForSelect(a.choice_filter,i+a.name,t)){var r=te(t,d);T.push({label:r,value:t.name})}}),this.setOptionList(n[a.itemset.trim()])):a.children&&(a.children.map(function(e){var t=te(e,d);T.push({label:t,value:e.name})}),this.setOptionList(a.children)),s){var x=[];T.map(function(e){e.value&&x.push(e.value)}),x.includes(s)||this.props.assignFieldValueActionCreator(this.props.fieldParentTreeName+a.name,"")}T.map(function(e){e.value===s&&(I=e)});var V=m(i+a.name);return t.createElement(o.FormGroup,null,t.createElement(o.Label,null,b," ",v&&t.createElement("span",{className:"requiredTextSteric"},"*")),t.createElement("div",{key:a.name,className:"selectOneDropDown"},t.createElement(l,{multi:!1,name:a.name,options:T,value:I||"",onChange:this.onChangeHandler(a.name)})),g&&V&&t.createElement(f.FontAwesomeIcon,{icon:"exclamation-circle",className:"errorSign"}),a.hint&&t.createElement(o.Label,{className:"hintText"},S),g&&E&&t.createElement(o.Label,{className:"requiredText"},A),C&&t.createElement(o.Label,{className:"constraintText"},y))}return null!=s&&(this.props.assignFieldValueActionCreator(i+a.name,null),m(i+a.name)&&this.props.removeErrorInputIdActionCreator(i+a.name)),null},r}(t.Component),yt=n.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Re(e,t,r)},i=De(e);return{fieldValue:we(e,n+r.name),getEvaluatedExpressionSelector:a,getEvaluatedExpressionSelectorForSelect:function(t,r,n){return ke(e,t,n,r)},getFormSubmitStatusSelector:i,isComponentRender:oe(r,n,a),isPresentInErrorSelector:function(t){return _e(e,t)},optionList:qe(e,n+r.name)}},{addErrorInputIdActionCreator:Ne,assignFieldValueActionCreator:Ae,assignOptionListActionCreator:Fe,removeErrorInputIdActionCreator:Le})(bt),St=function(e){function r(){var t;return(t=e.apply(this,arguments)||this).onChangeHandlerRadio=function(e){return function(r){t.props.assignFieldValueActionCreator(t.props.fieldParentTreeName+e,r.target.value||"")}},t.getProcessedString=function(e){var r=(e.match(/\([^\)]+\)/i)||[""])[0];if(r.length>2){var n=(r=r.substring(1,r.length-1)).split(","),a=[].concat(n);return a=a.splice(2,a.length),t.extractAndFilterOptions(n[0],n[1]||null,a||[])}return[]},t.extractAndFilterOptions=function(e,r,n){r&&(r=(r=r.trim()).substring(1,r.length-1).trim());var a=[],i=[];if(t.props.csvList[e=e.substring(1,e.length-1)+".csv"]){var o=e.replace(/'/g,"");a=t.props.csvList[o]||[]}if(r&&"matches"===r.trim())for(var l=0,s=function(){var e=n[l].trim();e=e.substring(1,e.length-1).trim();var r=n[l+1],i=[].concat(a),o="";i.forEach(function(e){o=t.props.getEvaluatedExpressionSelectorForSelect(r,t.props.fieldParentTreeName+t.props.fieldElement.name,e)}),a=a.filter(function(t){return t[e]===o}),l+=2};l<n.length;)s();if(0!==a.length){var u="",c="";return t.props.fieldElement.children&&t.props.fieldElement.children[0]&&t.props.fieldElement.children[0].name&&t.props.fieldElement.children[0].label&&(u=te(t.props.fieldElement.children[0],t.props.defaultLanguage),c=t.props.fieldElement.children[0].name),a.forEach(function(e){var t={};t.label=e[u].trim(),t.name=e[c].trim(),i.push(t)}),h.uniqBy(i,"name")}return[]},t}return b(r,e),r.prototype.render=function(){var e=this,r=this.props,n=r.choices,a=r.fieldElement,i=r.fieldParentTreeName,l=r.fieldValue,s=r.isComponentRender,u=r.getEvaluatedExpressionSelector,c=r.getFormSubmitStatusSelector,p=r.isPresentInErrorSelector,m=r.defaultLanguage,d=ie(a),v=c,g=d&&(!l||""===l),E=l&&""!==l&&se(a,i,u),b=ne(u,te(a,m),i+a.name),y=ne(u,ae(a,m),i+a.name),S=re(a,m);if(s){null==l&&"default"in a&&this.props.assignFieldValueActionCreator(i+a.name,a.default);var I=le(a,i,u);!g&&!E||p(i+a.name)?g||E||!p(i+a.name)||this.props.removeErrorInputIdActionCreator(i+a.name):this.props.addErrorInputIdActionCreator(i+a.name);var F=[];if(a.control&&a.control.appearance&&/search\([^\)|(]+\)/i.test(a.control.appearance)){var T=a.control.appearance.match(/search\([^\)|(]+\)/i)||[""];F=this.getProcessedString(T[0])}var N=[];a.children&&a.children.map(function(e){var t={};t.name=e.name,t.label=e.label,N.push(t)});var L=[];if(a.control&&a.control.appearance&&/search\([^\)|(]+\)/i.test(a.control.appearance)){if(L=[],l){var x=[];F.map(function(e){e.name&&x.push(e.name)}),x.includes(l)||this.props.assignFieldValueActionCreator(this.props.fieldParentTreeName+a.name,"")}h.isEqual(this.props.optionList,C({},F))||this.props.assignOptionListActionCreator(this.props.fieldParentTreeName+a.name,F),L=[].concat(F)}else if(a.itemset){var V=[];if(L=[],n&&n[a.itemset.trim()]){if(h.forEach(n[a.itemset.trim()],function(t){if(a.choice_filter&&e.props.getEvaluatedExpressionSelectorForSelect(a.choice_filter,i+a.name,t)){var r=te(t,m);V.push({label:r,name:t.name})}}),l){var P=[];V.map(function(e){e.name&&P.push(e.name)}),P.includes(l)||this.props.assignFieldValueActionCreator(this.props.fieldParentTreeName+a.name,"")}h.isEqual(this.props.optionList,C({},V))||this.props.assignOptionListActionCreator(this.props.fieldParentTreeName+a.name,V),L=[].concat(V)}}else L=[],h.isEqual(this.props.optionList,C({},N))||this.props.assignOptionListActionCreator(this.props.fieldParentTreeName+a.name,N),L=[].concat(N);var O=!1;a.control&&a.control.appearance&&a.control.appearance.split(" ").forEach(function(e){O||"horizontal-compact"!==e||(O=!0)});var w=p(i+a.name);return t.createElement("div",null,t.createElement(o.Label,null,b," ",d&&t.createElement("span",{className:"requiredTextSteric"},"*")),t.createElement(o.Form,{key:"selectOne"},L.map(function(r,n){return t.createElement(o.FormGroup,{key:n,check:!0,inline:O},t.createElement(o.Label,{check:!0},t.createElement(o.Input,{key:a.name+"-"+n,type:"radio",name:a.name,value:r.name,onChange:e.onChangeHandlerRadio(a.name),readOnly:I,checked:r.name===l})," ",te(r,m)))})),v&&w&&t.createElement(f.FontAwesomeIcon,{icon:"exclamation-circle",className:"errorSign"}),a.hint&&t.createElement(o.Label,{className:"hintText"},S),v&&g&&t.createElement(o.Label,{className:"requiredText"},A),E&&t.createElement(o.Label,{className:"constraintText"},y))}return null!=l&&(this.props.assignFieldValueActionCreator(i+a.name,null),p(i+a.name)&&this.props.removeErrorInputIdActionCreator(i+a.name)),null},r}(t.Component),It=n.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Re(e,t,r)},i=De(e);return{fieldValue:we(e,n+r.name),getEvaluatedExpressionSelector:a,getEvaluatedExpressionSelectorForSelect:function(t,r,n){return ke(e,t,n,r)},getFormSubmitStatusSelector:i,isComponentRender:oe(r,n,a),isPresentInErrorSelector:function(t){return _e(e,t)},optionList:qe(e,n+r.name)}},{addErrorInputIdActionCreator:Ne,assignFieldValueActionCreator:Ae,assignOptionListActionCreator:Fe,removeErrorInputIdActionCreator:Le})(St),At=function(e){function r(){return e.apply(this,arguments)||this}return b(r,e),r.prototype.render=function(){return pe(this.props.fieldElement)?t.createElement(yt,Object.assign({},this.props)):t.createElement(It,Object.assign({},this.props))},r}(t.Component),Ft=function(e){function r(t){var r;return(r=e.call(this,t)||this).onChangeHandler=function(e){r.setState(C({},r.state,{fieldValue:e.currentTarget.value||"",isFocused:!0}))},r.onBlurHandler=function(e){r.setState(C({},r.state,{fieldValue:e.currentTarget.value||"",isFocused:!1})),r.props.assignFieldValueActionCreator(r.props.fieldParentTreeName+e.currentTarget.name,e.currentTarget.value||"")},r.state={fieldValue:"",isFocused:!1},r}return b(r,e),r.prototype.render=function(){var e=this.props,r=e.fieldElement,n=e.fieldParentTreeName,a=e.fieldValue,i=e.isComponentRender,l=e.getEvaluatedExpressionSelector,s=e.getFormSubmitStatusSelector,u=e.isPresentInErrorSelector,c=e.defaultLanguage,p=ie(r),m=s,d=p&&(!a||""===a),h=a&&""!==a&&se(r,n,l),v=ne(l,te(r,c),n+r.name),g=ne(l,ae(r,c),n+r.name),E=re(r,c);if(i){null==a&&"default"in r&&this.props.assignFieldValueActionCreator(n+r.name,r.default);var b=le(r,n,l);!d&&!h||u(n+r.name)?d||h||!u(n+r.name)||this.props.removeErrorInputIdActionCreator(n+r.name):this.props.addErrorInputIdActionCreator(n+r.name);var y,S=u(n+r.name);return r.bind&&r.bind.calculate?((y=this.props.getEvaluatedExpressionSelector(r.bind.calculate,n+r.name))&&y!==a&&this.props.assignFieldValueActionCreator(n+r.name,y),t.createElement(o.FormGroup,null,t.createElement(o.Label,null,v," ",p&&t.createElement("span",{className:"requiredTextSteric"},"*")),t.createElement(o.Input,{type:"text",name:r.name,onChange:this.onChangeHandler,onBlur:this.onBlurHandler,value:this.state.isFocused?this.state.fieldValue||"":y||"",readOnly:b}),m&&S&&t.createElement(f.FontAwesomeIcon,{icon:"exclamation-circle",className:"errorSign"}),r.hint&&t.createElement(o.Label,{className:"hintText"},E),m&&d&&t.createElement(o.Label,{className:"requiredText"},A),h&&t.createElement(o.Label,{className:"constraintText"},g))):t.createElement(o.FormGroup,null,t.createElement(o.Label,null,v," ",p&&t.createElement("span",{className:"requiredTextSteric"},"*")),t.createElement(o.Input,{type:"text",name:r.name,onChange:this.onChangeHandler,onBlur:this.onBlurHandler,value:this.state.isFocused?this.state.fieldValue||"":a||"",readOnly:b}),m&&S&&t.createElement(f.FontAwesomeIcon,{icon:"exclamation-circle",className:"errorSign"}),r.hint&&t.createElement(o.Label,{className:"hintText"},E),m&&d&&t.createElement(o.Label,{className:"requiredText"},A),h&&t.createElement(o.Label,{className:"constraintText"},g))}return this.state.isFocused&&this.setState(C({},this.state,{isFocused:!1})),null!=a&&(this.props.assignFieldValueActionCreator(n+r.name,null),u(n+r.name)&&this.props.removeErrorInputIdActionCreator(n+r.name)),null},r}(t.Component),Tt=n.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Re(e,t,r)},i=De(e);return{fieldValue:we(e,n+r.name),getEvaluatedExpressionSelector:a,getFormSubmitStatusSelector:i,isComponentRender:oe(r,n,a),isPresentInErrorSelector:function(t){return _e(e,t)}}},{addErrorInputIdActionCreator:Ne,assignFieldValueActionCreator:Ae,removeErrorInputIdActionCreator:Le})(Ft),Nt=function(e){function r(){var t;return(t=e.apply(this,arguments)||this).onChangeHandler=function(e){t.props.assignFieldValueActionCreator(t.props.fieldParentTreeName+e.currentTarget.name,""!==e.currentTarget.value?e.currentTarget.value:null)},t}return b(r,e),r.prototype.render=function(){var e=this.props,r=e.fieldElement,n=e.fieldParentTreeName,a=e.fieldValue,i=e.isComponentRender,l=e.getEvaluatedExpressionSelector,s=e.getFormSubmitStatusSelector,u=e.isPresentInErrorSelector,c=e.defaultLanguage,p=ie(r),m=s,d=p&&(!a||""===a),h=a&&""!==a&&se(r,n,l),v=ne(l,te(r,c),n+r.name),g=ne(l,ae(r,c),n+r.name),E=re(r,c);if(i){null==a&&"default"in r&&this.props.assignFieldValueActionCreator(n+r.name,r.default);var C=le(r,n,l);!d&&!h||u(n+r.name)?d||h||!u(n+r.name)||this.props.removeErrorInputIdActionCreator(n+r.name):this.props.addErrorInputIdActionCreator(n+r.name);var b=u(n+r.name);return t.createElement(o.FormGroup,null,t.createElement(o.Label,null,v," ",p&&t.createElement("span",{className:"requiredTextSteric"},"*")),t.createElement(o.Input,{type:"time",name:r.name,onChange:this.onChangeHandler,value:a||"",readOnly:C}),m&&b&&t.createElement(f.FontAwesomeIcon,{icon:"exclamation-circle",className:"errorSign"}),r.hint&&t.createElement(o.Label,{className:"hintText"},E),m&&d&&t.createElement(o.Label,{className:"requiredText"},A),h&&t.createElement(o.Label,{className:"constraintText"},g))}return null!=a&&(this.props.assignFieldValueActionCreator(n+r.name,null),u(n+r.name)&&this.props.removeErrorInputIdActionCreator(n+r.name)),null},r}(t.Component),Lt=n.connect(function(e,t){var r=t.fieldElement,n=t.fieldParentTreeName,a=function(t,r){return Re(e,t,r)},i=De(e);return{fieldValue:we(e,n+r.name),getEvaluatedExpressionSelector:a,getFormSubmitStatusSelector:i,isComponentRender:oe(r,n,a),isPresentInErrorSelector:function(t){return _e(e,t)}}},{addErrorInputIdActionCreator:Ne,assignFieldValueActionCreator:Ae,removeErrorInputIdActionCreator:Le})(Nt),xt=function(e){function r(){return e.apply(this,arguments)||this}b(r,e);var n=r.prototype;return n.render=function(){var e=this.props;return this.typeEvaluator(e.choices,e.csvList,e.fieldElement,e.fieldParentTreeName,e.defaultLanguage)},n.typeEvaluator=function(e,r,n,a,i){switch(n.type){case"text":return t.createElement(Tt,{fieldElement:n,fieldParentTreeName:a,defaultLanguage:i});case"date":return t.createElement(rt,{fieldElement:n,fieldParentTreeName:a,defaultLanguage:i});case"time":return t.createElement(Lt,{fieldElement:n,fieldParentTreeName:a,defaultLanguage:i});case"dateTime":return t.createElement(at,{fieldElement:n,fieldParentTreeName:a,defaultLanguage:i});case"integer":return t.createElement(mt,{fieldElement:n,fieldParentTreeName:a,defaultLanguage:i});case"decimal":return t.createElement(ot,{fieldElement:n,fieldParentTreeName:a,defaultLanguage:i});case"note":return t.createElement(ft,{fieldElement:n,fieldParentTreeName:a,defaultLanguage:i});case"calculate":return t.createElement(et,{fieldElement:n,fieldParentTreeName:a,defaultLanguage:i});case"select one":return t.createElement(At,{choices:e,fieldElement:n,fieldParentTreeName:a,defaultLanguage:i,csvList:r});case"select all that apply":return t.createElement(Ct,{choices:e,fieldElement:n,fieldParentTreeName:a,defaultLanguage:i,csvList:r});case"photo":case"file":return t.createElement(ct,{fieldElement:n,fieldParentTreeName:a,defaultLanguage:i});default:return t.createElement("div",{style:{display:"none"}},"Other ",n.type," ",n.name)}},r}(t.Component),Vt=function(e){function r(){var t;return(t=e.apply(this,arguments)||this).getAppearanceValue=function(e,r,n){var a=oe(e,r,t.props.getEvaluatedExpressionSelector);if(!a)return 0;if(a&&n&&e.control&&e.control.appearance&&/^w(\d+)\b/i.test(e.control.appearance)){var i=e.control.appearance.match(/^w(\d+)\b/i)[0].replace("w","");return isNaN(i)?12:parseInt(i,10)}return 12},t}b(r,e);var n=r.prototype;return n.render=function(){var e=this,r=this.props,n=r.choices,a=r.csvList,i=r.fieldParentTreeName,l=r.defaultLanguage,s=r.isAppearanceApplicable;return t.createElement(o.Row,{className:"groupTypeEvaluatorRow"},r.fieldElements.map(function(r){var u=e.getAppearanceValue(r,i,s);return t.createElement(o.Col,{key:"group_"+r.name,className:"groupTypeEvaluator",md:u,hidden:0===u},e.typeEvaluator(n,a,r,i,l))}))},n.typeEvaluator=function(e,r,n,a,i){switch(n.type){case"group":return t.createElement("div",null,t.createElement(We,{choices:e,fieldElement:n,fieldParentTreeName:a,defaultLanguage:i,csvList:r}));case"repeat":return t.createElement("div",null,t.createElement(Xe,{choices:e,fieldElement:n,fieldParentTreeName:a,defaultLanguage:i,csvList:r}));default:return t.createElement(xt,{choices:e,fieldElement:n,fieldParentTreeName:a,defaultLanguage:i,csvList:r})}},r}(t.Component),Pt=n.connect(function(e){return{getEvaluatedExpressionSelector:function(t,r){return Re(e,t,r)}}})(Vt);a.library.add(i.faPlusCircle,i.faMinusCircle,i.faExclamationCircle);var Ot=function(e){function r(t){var r;return(r=e.call(this,t)||this).handleSelect=function(e){r.setState({defaultLanguage:e})},r.handleClick=function(e){var t=r.props,n=t.handleSubmit,a=t.mediaList;t.isNoErrors?n(t.userInputObj,a):(n("Field Violated",a),r.setState({isSubmissionError:!0}),r.props.setFormSubmitStatusAction(!0),window.scrollTo(0,0))},r.toggleStateValue=function(){r.setState({isSubmissionError:!1})},r}b(r,e);var n=r.prototype;return n.componentDidMount=function(){var e=this.props,t=e.userInputJson,r=e.userInputObj;this.props.resetStoreActionCreator(),t&&t!==r&&this.props.setUserInputAction(t),this.setState({defaultLanguage:this.props.defaultLanguage,isSubmissionError:!1})},n.render=function(){var e=this.props,r=e.languageOptions,n=(this.state||this.props).defaultLanguage,a={choices:e.choices,csvList:e.csvList,defaultLanguage:n,fieldElements:e.fieldElements,fieldParentTreeName:"",isAppearanceApplicable:!1,languageOptions:r};return t.createElement(o.Container,{className:"form-container"},t.createElement(o.Row,{className:"form-title formTitle"},t.createElement(o.Col,null,t.createElement("h3",{className:"headerText"},e.formTitle)),t.createElement(I,{languages:r,onChangeSelect:this.handleSelect,defaultLanguage:n})),this.state&&this.state.isSubmissionError&&t.createElement(S,{color:"danger",isOpen:this.state.isSubmissionError,handleToggle:this.toggleStateValue,headerText:"Oh snap! You got an error!",bodyText:"Please make sure the required fields are not missing and there are no errors"}),t.createElement(o.Row,{className:"formFieldBody"},t.createElement(o.Col,null,t.createElement(Pt,Object.assign({},a)),t.createElement(o.Row,{className:"welcome-box"},t.createElement(o.Col,null,t.createElement(o.Button,{className:"btn btn-success",onClick:this.handleClick},"Submit"))))))},r}(t.Component),wt=n.connect(function(e){return{isNoErrors:je(e),mediaList:Ue(e),userInputObj:Me(e)}},{resetStoreActionCreator:function(){return{type:ge}},setFormSubmitStatusAction:function(e){return{isFormSubmitted:e,type:Ie}},setUserInputAction:function(e){return{type:Se,userInputObj:e}}})(Ot),qt=g.createStore(Oe,E.composeWithDevTools());exports.default=function(e){function r(){return e.apply(this,arguments)||this}return b(r,e),r.prototype.render=function(){var e=this.props,r=e.formDefinitionJson;return t.createElement(n.Provider,{store:qt},t.createElement(wt,Object.assign({},{choices:r.choices||{},csvList:e.csvList,defaultLanguage:e.defaultLanguage,fieldElements:r.children,formTitle:r.title,handleSubmit:e.handleSubmit,languageOptions:e.languageOptions,userInputJson:e.userInputJson})))},r}(t.Component);
//# sourceMappingURL=odkformrenderer.cjs.production.min.js.map
